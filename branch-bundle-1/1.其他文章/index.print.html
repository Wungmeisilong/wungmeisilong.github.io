<!DOCTYPE html>
<html lang="zh" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.120.4">
    <meta name="generator" content="Relearn 5.23.2+tip">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="1.文章 :: Maloudown">
    <meta name="twitter:description" content="">
    <meta property="og:title" content="1.文章 :: Maloudown">
    <meta property="og:description" content="">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://wungmeisilong.github.io/branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/">
    <meta property="og:site_name" content="Maloudown">
    <title>1.文章 :: Maloudown</title>
    <link href="https://wungmeisilong.github.io/branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/" rel="canonical" type="text/html" title="1.文章 :: Maloudown">
    <link href="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/index.xml" rel="alternate" type="application/rss+xml" title="1.文章 :: Maloudown">
    <link href="../../images/favicon.png?1743696567" rel="icon" type="image/png">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="../../css/fontawesome-all.min.css?1743696568" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../css/fontawesome-all.min.css?1743696568" rel="stylesheet"></noscript>
    <link href="../../css/nucleus.css?1743696568" rel="stylesheet">
    <link href="../../css/auto-complete.css?1743696568" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../css/auto-complete.css?1743696568" rel="stylesheet"></noscript>
    <link href="../../css/perfect-scrollbar.min.css?1743696568" rel="stylesheet">
    <link href="../../css/fonts.css?1743696568" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../css/fonts.css?1743696568" rel="stylesheet"></noscript>
    <link href="../../css/theme.css?1743696568" rel="stylesheet">
    <link href="../../css/theme-auto.css?1743696568" rel="stylesheet" id="R-variant-style">
    <link href="../../css/variant.css?1743696568" rel="stylesheet">
    <link href="../../css/print.css?1743696568" rel="stylesheet" media="print">
    <link href="../../css/format-print.css?1743696568" rel="stylesheet">
    <link href="../../css/ie.css?1743696568" rel="stylesheet">
    <script src="../../js/url.js?1743696568"></script>
    <script src="../../js/variant.js?1743696568"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="../../index.search.js";
      var root_url="../../";
      var baseUri=root_url.replace(/\/$/, '');
      window.relearn = window.relearn || {};
      window.relearn.baseUriFull='https:\/\/wungmeisilong.github.io/';
      // variant stuff
      window.variants && variants.init( [ 'auto', 'zen-light', 'zen-dark', 'neon', 'zen-light' ] );
      // translations
      window.T_Copy_to_clipboard = `复制到剪贴板`;
      window.T_Copied_to_clipboard = `复制到剪贴板！`;
      window.T_Copy_link_to_clipboard = `将链接复制到剪贴板`;
      window.T_Link_copied_to_clipboard = `链接复制到剪贴板！`;
      window.T_Reset_view = `重置视图`;
      window.T_View_reset = `查看重置！`;
      window.T_No_results_found = `找不到"{0}"的结果`;
      window.T_N_results_found = `为"{0}"找到 {1} 个结果`;
    </script>
  </head>
  <body class="mobile-support print" data-url="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide">
              <button class="topbar-control" onclick="toggleNav()" type="button" title="导航 (CTRL&#43;ALT&#43;n)">
                <i class="fa-fw fas fa-bars"></i>
              </button>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../"><span itemprop="name">Maloudown</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../branch-bundle-1/"><span itemprop="name">一、博客文章</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">1.文章</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable chapter narrow" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="chapter">
            <header class="headline">
            </header>
<div class="article-subheading">目录 1</div>
<h1 id="1文章">1.文章</h1>


<ul class="children children-li children-sort-">
	
<li><a href="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/14.%E5%88%9D%E6%AC%A1%E5%AE%89%E8%A3%85ad%E9%9C%80%E8%A6%81%E5%81%9A%E5%93%AA%E4%BA%9B%E8%AE%BE%E7%BD%AE/">14.初次安装AD需要做哪些设置？</a><p>设置自动保存 打开程序点击系统设置，如下图： 按照下图步骤设置自动保存，每10分钟保存一次（你也可以设置成其他的，但不建议设置太小或太大比如1分</p></li>
<li><a href="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/13.%E7%89%A9%E8%81%94%E7%BD%91%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E8%AE%BA/">13.物联网网络安全论</a><p>物联网主要解决什么问题?- 主要解决物品到物品（T2T）、人到物品（H2T）、人到人（H2H）之间的互联，核心共性技术、网络与信息安全技术、以</p></li>
<li><a href="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/12.%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/">12.嵌入式系统设计知识点</a><p>基于Cortex-A9微处理器的硬件平台 RISC和CISC RISC是精简指令集计算机，CISC是复杂指令集计算机 RISC（精简指令集计算机，</p></li>
<li><a href="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/">物联网应用系统设计</a><p>物联网结构系统与传统网路系统的区别 前者由三个部分构成 信息物品 自主网络 智能应用 需求分析 基本概念 需求规格说明：开发、测试、质量保证、项目管理以及</p></li>
<li><a href="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/10.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E7%9A%84%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%97%AE%E9%A2%98/">10.云端一体化的环境变量问题</a><p>参数context 与环境变量有关，不管是系统还是用户自定义的都用这个来获取，获取方式：context.env 先部署云函数到远端，然后在去远端</p></li>
<li><a href="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/9.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/">9.云端一体化如何查看云函数日志？</a><p>调用云函数的时候我们总有输入输出结果不符合自己预期的时候，这个时候查看日志很重要！！在云端一体化开发过程中，我们可以通过下面的方式解决这一问</p></li>
<li><a href="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/8.%E9%80%9F%E9%80%9Aarkts%E8%AF%AD%E8%A8%80/">8.速通ArkTS语言</a><p>数据类型 练习网址： 条件语句 拓展：for in与for of的使用 for in ：遍历得到数组的角标， for of ：直接得到元素。 函数 使用function关键字声明</p></li>
<li><a href="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/6.github%E5%92%8Catomgit%E7%9A%84%E6%B7%B7%E5%90%88%E4%BD%BF%E7%94%A8%E9%82%A3%E4%BA%9B%E6%98%AF%E5%80%BC%E5%BE%97%E6%B3%A8%E6%84%8F%E7%9A%84/">6.github和atomgit的混合使用，哪些是值得注意的？</a><p>一台电脑如何使用多个远程仓库？ 下载好git，并做好相关的配置 关联github仓库 创建github仓库 克隆仓库到本地 git clone &lt;你的远程仓库U</p></li>
<li><a href="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/5.%E5%BA%B7%E5%A5%88%E5%B0%94%E7%AC%94%E8%AE%B0%E6%A0%B7%E5%BC%8F%E7%9A%84%E5%88%9B%E5%BB%BA/">5.自定义页面以康奈尔笔记格式输出</a><p>Cues Cues Notes 创建css文件 在hugo配置中设置 在markdown文档中引用 Summary 标签/提示 ：静态网页，康奈尔笔记，hugo，自定义页面输出格式。 Notes 创建</p></li>
<li><a href="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/4.%E5%A6%82%E4%BD%95%E5%9C%A8github%E4%B8%8A%E4%BD%BF%E7%94%A8%E9%AB%98%E7%BA%A7%E6%90%9C%E7%B4%A2%E6%90%9C%E5%87%BA%E8%87%AA%E5%B7%B1%E6%83%B3%E8%A6%81%E7%9A%84%E9%A1%B9%E7%9B%AE/">4.如何在github上使用高级搜索搜出自己想要的项目？</a><p>原文章链接 附件</p></li>
<li><a href="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/3.%E6%96%87%E7%AB%A0%E6%A0%87%E9%A2%98%E7%9A%84%E5%A4%9A%E6%A0%B7%E8%AE%BE%E8%AE%A1/">文章标题的多样设计</a><p>在标题前面显示图标： +++ menuPre = &#34;&lt;i class=&#39;fab fa-github&#39;&gt;&lt;/i&gt; &#34; +++添加这个后的效果如下： 附件</p></li>
<li><a href="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/github%E5%B8%B8%E9%81%87%E9%97%AE%E9%A2%98/">常与问题总结</a><p>1、使用git commi -m &ldquo;……&ldquo;时报错： Your branch is up to date with ‘origin/master‘ 今天在提交项目的时候报了这个错误，在网</p></li>
<li><a href="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/">如何用旧电脑搭建自己的服务器？</a><p>拥有一个属于自己的服务器个人感觉就很赞，我最初是在不买公网IP情况下，用一台电脑做服务器，然后另外一台电脑可以远程访问，部署网站，然后别人可</p></li>
<li><a href="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/experimence/">创建hugo静态网站的经历</a><p>附件 一、为什么要创建属于自己博客网站 自从进入大三的学习，自己接触了许多开发板、以及七七八八的软件，个人记忆力又不咋地，平时很容易把重要或者重</p></li>
<li><a href="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/1.%E5%B8%B8%E7%94%A8%E6%A8%A1%E7%89%88/">网站内常用到的模版</a><p>代码分制表 以&lt; tabs title=&quot;file name&quot; &gt;，&lt; /tabs &gt;结尾； 然后里面写以% tab title=&quot;code name&quot; style=&quot;info&quot; color=&quot;blue &quot; %，% /tab %结尾 他们都需要用{{}}括起来 &#8203; 代码 {{&lt; tabs title=&#34;hello.&#34; &gt;}}</p></li>
<li><a href="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/2.%E7%9B%AE%E5%BD%95%E5%88%9B%E5%BB%BA/">网站的目录与子目录创建</a><p>不论是创建首页页面，还是左边框的选项，归根结底它们都是“目录”，从根上说，你需要创建一个目录然后在目录里面创建一个.md文件来装这个目录或说</p></li>
</ul>

            <footer class="footline">
            </footer>
          </article>

          <section>
            <h1 class="a11y-only">1.文章 的子部分</h1>
          <article class="default">
            <header class="headline">
            </header>
<h1 id="14初次安装ad需要做哪些设置">14.初次安装AD需要做哪些设置？</h1>

<h2 id="设置自动保存">设置自动保存</h2>
<p>打开程序点击系统设置，如下图：</p>
<p><a href="#R-image-2ae9024e9e615ded1b1d023dedfebdf9" class="lightbox-link"><img src="https://img-blog.csdnimg.cn/img_convert/c1fb1a624013dcb464404fecc119f9a2.png" alt="系统设置" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-2ae9024e9e615ded1b1d023dedfebdf9"><img src="https://img-blog.csdnimg.cn/img_convert/c1fb1a624013dcb464404fecc119f9a2.png" alt="系统设置" class="lightbox-image        " loading="lazy"></a></p>
<p>按照下图步骤设置自动保存，每10分钟保存一次（你也可以设置成其他的，但不建议设置太小或太大比如1分钟或者30分钟）</p>
<p><a href="#R-image-d485f9363c580db8ccdcb311c8c7d160" class="lightbox-link"><img src="https://img-blog.csdnimg.cn/img_convert/7d36887f3eb34181db45fe5ef9ec1f26.png" alt="设置自动保存" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d485f9363c580db8ccdcb311c8c7d160"><img src="https://img-blog.csdnimg.cn/img_convert/7d36887f3eb34181db45fe5ef9ec1f26.png" alt="设置自动保存" class="lightbox-image        " loading="lazy"></a></p>
<h2 id="设置单一表示负信号">设置单一&rsquo;'表示负信号</h2>
<p>按照下图设置</p>
<p><a href="#R-image-1d9177673df67b78a97be4777f81eac2" class="lightbox-link"><img src="https://img-blog.csdnimg.cn/img_convert/5726209f81f50a65ab51737433722a1a.png" alt="在这里插入图片描述" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-1d9177673df67b78a97be4777f81eac2"><img src="https://img-blog.csdnimg.cn/img_convert/5726209f81f50a65ab51737433722a1a.png" alt="在这里插入图片描述" class="lightbox-image        " loading="lazy"></a></p>
<p><a href="#R-image-5d2c30328b0b87a3f06b465406c925ea" class="lightbox-link"><img src="https://img-blog.csdnimg.cn/img_convert/e698a4aa176f2b1fb1fd705ea6f05e5a.png" alt="负信号表示" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5d2c30328b0b87a3f06b465406c925ea"><img src="https://img-blog.csdnimg.cn/img_convert/e698a4aa176f2b1fb1fd705ea6f05e5a.png" alt="负信号表示" class="lightbox-image        " loading="lazy"></a></p>
<p><a href="#R-image-270d64d99f5c62c9981f92c499364de3" class="lightbox-link"><img src="https://img-blog.csdnimg.cn/img_convert/54ca63f1224388be7413e81a5918d9c8.png" alt="最终效果" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-270d64d99f5c62c9981f92c499364de3"><img src="https://img-blog.csdnimg.cn/img_convert/54ca63f1224388be7413e81a5918d9c8.png" alt="最终效果" class="lightbox-image        " loading="lazy"></a></p>
<p><a href="#R-image-80efa13b7d0c65719130e002b62ee02b" class="lightbox-link"><img src="https://img-blog.csdnimg.cn/img_convert/73b933c047333cee6cd893654cc93637.png" alt="设置复制自动增加" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-80efa13b7d0c65719130e002b62ee02b"><img src="https://img-blog.csdnimg.cn/img_convert/73b933c047333cee6cd893654cc93637.png" alt="设置复制自动增加" class="lightbox-image        " loading="lazy"></a></p>
<p><a href="#R-image-d1b81d66f63813f004a58647773be5c7" class="lightbox-link"><img src="https://img-blog.csdnimg.cn/img_convert/c4ac8007871184e28e67455d4fa9c0b7.png" alt="复制自动增加" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d1b81d66f63813f004a58647773be5c7"><img src="https://img-blog.csdnimg.cn/img_convert/c4ac8007871184e28e67455d4fa9c0b7.png" alt="复制自动增加" class="lightbox-image        " loading="lazy"></a></p>
<p><a href="#R-image-666ec1cc68675aa4676d26bd124852e5" class="lightbox-link"><img src="https://img-blog.csdnimg.cn/img_convert/fc222b1f998436fbea98ed4feec6499c.png" alt="复制不自动增加" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-666ec1cc68675aa4676d26bd124852e5"><img src="https://img-blog.csdnimg.cn/img_convert/fc222b1f998436fbea98ed4feec6499c.png" alt="复制不自动增加" class="lightbox-image        " loading="lazy"></a></p>
<h1 id="设置显示对话框">设置显示对话框</h1>
<p>我设置前</p>
<p><a href="#R-image-3e1a7ecffcbc78a95c918b8ebc67cffe" class="lightbox-link"><img src="https://img-blog.csdnimg.cn/img_convert/3f34f4a98985cc17cf8898e517859d88.png" alt="名字重叠" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-3e1a7ecffcbc78a95c918b8ebc67cffe"><img src="https://img-blog.csdnimg.cn/img_convert/3f34f4a98985cc17cf8898e517859d88.png" alt="名字重叠" class="lightbox-image        " loading="lazy"></a></p>
<p><a href="#R-image-dd9da437009461463125e891369daf2f" class="lightbox-link"><img src="https://img-blog.csdnimg.cn/img_convert/31b40b7e9edd5a38004086708a020ae5.png" alt="未设置前" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-dd9da437009461463125e891369daf2f"><img src="https://img-blog.csdnimg.cn/img_convert/31b40b7e9edd5a38004086708a020ae5.png" alt="未设置前" class="lightbox-image        " loading="lazy"></a></p>
<p>当把上面的打钩后</p>
<p><a href="#R-image-c5712119ec68b7067e6120848e00d915" class="lightbox-link"><img src="https://img-blog.csdnimg.cn/img_convert/19dc26c7d13732b02714687ca50bba02.png" alt="设置后" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c5712119ec68b7067e6120848e00d915"><img src="https://img-blog.csdnimg.cn/img_convert/19dc26c7d13732b02714687ca50bba02.png" alt="设置后" class="lightbox-image        " loading="lazy"></a></p>
<p><a href="#R-image-f06c94f636811a499afbd13de361085a" class="lightbox-link"><img src="https://img-blog.csdnimg.cn/img_convert/dd75ba2048f4f2507622006608cd62de.png" alt="在这里插入图片描述" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f06c94f636811a499afbd13de361085a"><img src="https://img-blog.csdnimg.cn/img_convert/dd75ba2048f4f2507622006608cd62de.png" alt="在这里插入图片描述" class="lightbox-image        " loading="lazy"></a></p>
<p>[外链图片转存中&hellip;(img-ZngLHveL-1719559556141)]</p>
<p><a href="#R-image-9b7565cf433bea276c0307a16e923de0" class="lightbox-link"><img src="https://img-blog.csdnimg.cn/img_convert/f410e5cecc9ae34ac16a2ad647c6aab5.png" alt="在这里插入图片描述" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-9b7565cf433bea276c0307a16e923de0"><img src="https://img-blog.csdnimg.cn/img_convert/f410e5cecc9ae34ac16a2ad647c6aab5.png" alt="在这里插入图片描述" class="lightbox-image        " loading="lazy"></a></p>
<p><a href="#R-image-152c66ac755c9edab7a5d6c8cca2aac1" class="lightbox-link"><img src="https://img-blog.csdnimg.cn/img_convert/8d80e72f3123a7172212fcc06338a61c.png" alt="在这里插入图片描述" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-152c66ac755c9edab7a5d6c8cca2aac1"><img src="https://img-blog.csdnimg.cn/img_convert/8d80e72f3123a7172212fcc06338a61c.png" alt="在这里插入图片描述" class="lightbox-image        " loading="lazy"></a></p>
<p><a href="#R-image-4887b4577f73b5e797f76329fec7e85f" class="lightbox-link"><img src="https://img-blog.csdnimg.cn/img_convert/c02b4c0b77a6dbd581238fc65b86a6f7.png" alt="在这里插入图片描述" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4887b4577f73b5e797f76329fec7e85f"><img src="https://img-blog.csdnimg.cn/img_convert/c02b4c0b77a6dbd581238fc65b86a6f7.png" alt="在这里插入图片描述" class="lightbox-image        " loading="lazy"></a></p>
<p>按住shift+h可以显示和关闭</p>
<p>[外链图片转存中&hellip;(img-bxjUhYCS-1719559556142)]</p>
<p><a href="#R-image-825518ed867d52f0f8a5ef380af77f78" class="lightbox-link"><img src="https://img-blog.csdnimg.cn/img_convert/83e54a74166c16385873c0bb590d3057.png" alt="在这里插入图片描述" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-825518ed867d52f0f8a5ef380af77f78"><img src="https://img-blog.csdnimg.cn/img_convert/83e54a74166c16385873c0bb590d3057.png" alt="在这里插入图片描述" class="lightbox-image        " loading="lazy"></a></p>
<p>[外链图片转存中&hellip;(img-qKvH9IRn-1719559556142)]
<a href="#R-image-1c5438e462fcdb8315d3e6ec5db54884" class="lightbox-link"><img src="https://img-blog.csdnimg.cn/img_convert/c61197f3e47d35ecb8f046a70c4eeaad.png" alt="在这里插入图片描述" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-1c5438e462fcdb8315d3e6ec5db54884"><img src="https://img-blog.csdnimg.cn/img_convert/c61197f3e47d35ecb8f046a70c4eeaad.png" alt="在这里插入图片描述" class="lightbox-image        " loading="lazy"></a></p>
<p>[外链图片转存中&hellip;(img-HAD9BmgV-1719559556142)]</p>
<p><a href="#R-image-979d157c1c05ddb99cf701a05ff88c1c" class="lightbox-link"><img src="https://img-blog.csdnimg.cn/img_convert/ab22d2cfb50206497eac47abce62778d.png" alt="在这里插入图片描述" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-979d157c1c05ddb99cf701a05ff88c1c"><img src="https://img-blog.csdnimg.cn/img_convert/ab22d2cfb50206497eac47abce62778d.png" alt="在这里插入图片描述" class="lightbox-image        " loading="lazy"></a>
<a href="#R-image-2d8af21cfba7c87104313afb0f5ec38a" class="lightbox-link"><img src="https://img-blog.csdnimg.cn/img_convert/c6ad53b8e1917c275f6b13a3ea5bd4a5.png" alt="在这里插入图片描述" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-2d8af21cfba7c87104313afb0f5ec38a"><img src="https://img-blog.csdnimg.cn/img_convert/c6ad53b8e1917c275f6b13a3ea5bd4a5.png" alt="在这里插入图片描述" class="lightbox-image        " loading="lazy"></a></p>
<p><a href="#R-image-4ad946d6aeba34ce8aece47dc13cc8d7" class="lightbox-link"><img src="https://img-blog.csdnimg.cn/img_convert/bef0a3910f44c66d05a4b511c0b5468c.png" alt="在这里插入图片描述" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4ad946d6aeba34ce8aece47dc13cc8d7"><img src="https://img-blog.csdnimg.cn/img_convert/bef0a3910f44c66d05a4b511c0b5468c.png" alt="在这里插入图片描述" class="lightbox-image        " loading="lazy"></a></p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>
<h1 id="13物联网网络安全论">13.物联网网络安全论</h1>

<h2 id="物联网主要解决什么问题-">物联网主要解决什么问题?-</h2>
<p>主要解决物品到物品（T2T）、人到物品（H2T）、人到人（H2H）之间的互联，核心共性技术、网络与信息安全技术、以及关键技术是物联网当前主要的研究方向</p>
<h2 id="物联网的安全特性">物联网的安全特性</h2>
<p>从物联网的信息处理来看，数据信息要经过采集、汇聚、融合、传输、决策与控制等过程</p>
<h2 id="物联网的功能特点">物联网的功能特点</h2>
<ul>
<li>全面感知能力</li>
<li>数据信息的可靠传输</li>
<li>智能化处理</li>
<li>可以根据各个行业、各种业务的具体特点形成各个不同的应用或系统的应用解决方案</li>
</ul>
<h2 id="数据加密中出现的攻击旁路系统是什么">数据加密中出现的攻击——旁路系统是什么</h2>
<p>攻击者可能试图通过旁路系统，如物理地取走数据库，在通信线路上窃听，面对这样的威胁最有效的方式是对数据进行加密，以加密的格式存储和传输数据。</p>
<h2 id="数字签名的使用">数字签名的使用</h2>
<ul>
<li>鉴权：非对称秘钥加密系统允许每一位发送数据的用户使用公钥进行数据加密，数字签名能够让信息接受者确认信息发送者的身份</li>
<li>验证完整性：数据传输的双方都希望数据在传输的过程没有被修改</li>
<li>保证不可抵赖性： 在密文的背景下，抵赖这个词指的是不承认与消息有关的举动（即声称消息来自第三方）。消息接受方可以通过数字签名的方式来抵制后续的抵赖，因为接收方可以出示数字签名证明数据的来源。</li>
</ul>
<h2 id="节点认证机制中的pki是什么">节点认证机制中的PKI是什么？</h2>
<p>KPI是遵循既定标准的秘钥管理平台，它能够为所有的网络应用提供加密和数字签名等密码服务，以及必要的秘钥和证书管理体系。
简单来说KPI是利用公钥的理论和技术建立的提供安全服务的基础设施。</p>
<h2 id="路由协议的安全威胁">路由协议的安全威胁</h2>
<table>
<thead>
<tr>
<th>路由协议</th>
<th>安全威胁</th>
</tr>
</thead>
<tbody>
<tr>
<td>TyniOS信标</td>
<td>虚假路由攻击、选择性转发攻击、污水池攻击、女巫攻击、虫洞攻击、Hello泛红攻击</td>
</tr>
<tr>
<td>定向扩散</td>
<td>虚假路由攻击、选择性转发攻击、污水池攻击、女巫攻击、虫洞攻击、Hello泛红攻击</td>
</tr>
<tr>
<td>地理位置路由</td>
<td>虚假路由攻击、选择性转发攻击、污水池攻击、女巫攻击</td>
</tr>
<tr>
<td>最低成本转发</td>
<td>虚假路由攻击、选择性转发攻击、污水池攻击、女巫攻击、虫洞攻击、Hello泛红攻击</td>
</tr>
<tr>
<td>谣传路由</td>
<td>虚假路由攻击、选择性转发攻击、污水池攻击、女巫攻击、虫洞攻击</td>
</tr>
<tr>
<td><strong>能量节约的拓扑维护</strong>（SPAN、GAF、CEC、AFECA）</td>
<td>虚假路由攻击、女巫攻击、Hello泛红攻击</td>
</tr>
<tr>
<td>聚簇路由协议（LEACH、TEEN）</td>
<td>选择性转发攻击、Hello泛红攻击</td>
</tr>
</tbody>
</table>
<p>SPAN、GAF、CEC、AFECA 是网络拓扑维护中用于节约能量的几种不同策略或算法的缩写。它们主要用于无线传感器网络（WSN）或其他类型的网络中，以优化网络结构，减少冗余，延长网络寿命，从而节约能量消耗。下面是每个缩写的具体含义：</p>
<p>SPAN (Sparse Topology Control):</p>
<p>稀疏拓扑控制。SPAN 是一种拓扑控制算法，旨在通过创建一个稀疏的网络拓扑来减少节点间的消息传递，从而降低能量消耗。这种方法通过选择性地关闭一些节点或链接来减少网络的密集度，但同时保持网络的连通性。</p>
<p>GAF (Geographic Adaptive Fidelity):</p>
<p>地理自适应保真度。GAF 是一种基于地理位置信息的拓扑控制机制，它根据节点的地理位置和重要性来调整通信频率和范围。在 GAF 中，节点根据其地理位置和网络需求动态调整它们的通信行为，以减少不必要的通信和监听，从而节省能量。</p>
<p>CEC (Critical Energy Consumption):</p>
<p>关键能量消耗。CEC 可能指的是一种考虑网络中关键节点或链接的能量消耗的策略。这种策略旨在识别和优化那些对网络性能和稳定性至关重要的节点或链接的能量使用，以确保网络的关键部分能够在能量受限的情况下继续运作。</p>
<p>AFECA (Adaptive Fault-tolerant Energy-efficient Clustering Algorithm):</p>
<p>自适应容错节能聚类算法。AFECA 是一种聚类算法，它结合了容错机制和能量效率，以适应网络条件的变化。通过自适应地调整聚类结构和领导者选举，AFECA 旨在在保持网络稳定性的同时减少能量消耗，并提高网络的容错能力。</p>
<h2 id="撒凯加密">撒凯加密</h2>
<p>撒凯加密法的分明文和密文，密文计算公式如下：</p>
<p><strong>公式：F(a)=(a+K)mod26。</strong></p>
<h2 id="加密技术分类">加密技术分类</h2>
<p>对称加密技术：是一种传统的加密体制，也称为私钥密码体制。在这一体制中加密和解密使用相同的秘钥。</p>
<p><strong>对于N个用户网络，需要n(n-1)/2个秘钥。</strong></p>
<h2 id="对称加密算法">对称加密算法</h2>
<p>DES（Data Encryption Standard，数据加密标准）该算法速度快，适用于加密大量数据。</p>
<p>3DES：是DES的变体，对同一块数据使用3个不同的秘钥进行3次加密，强度增强。</p>
<p>AES（Advenced Encryption Standard，高级加密标准）：该算法基于排序和置换算法。它也是一种迭代的、对称加密分组的密码，它可以用128、192和256位秘钥，用128位的分组加密和解密。</p>
<h2 id="单向扩散列函数">单向扩散列函数</h2>
<p>在实际生活中，采用公钥对长文件进行加密耗时，为节省时间数字签名协议经常和单向扩散列函数一起使用。
Alice并不对整个文件进行签名，而是只对三设置签名。签名过程参照书籍61页</p>
<h2 id="零知识证明的基本协议">零知识证明的基本协议</h2>
<p>这里做一个比喻，假设P知道开一扇门的密码，现在想向验证者V证明自己知道这扇门的密码，但具体密码是多少不让V知道，那么验证方法就是去开这扇门，只要P开了门就可以证明P知道门的密码。</p>
<p>下面是书本的证明步骤：
<a href="#R-image-26add8732a625678e0012bd8ce819b60" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/13.%E7%89%A9%E8%81%94%E7%BD%91%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E8%AE%BA/image.png" alt="1" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-26add8732a625678e0012bd8ce819b60"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/13.%E7%89%A9%E8%81%94%E7%BD%91%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E8%AE%BA/image.png" alt="1" class="lightbox-image        " loading="lazy"></a></p>
<ul>
<li>V站在A点。</li>
<li>P进入洞中，到达C点或D点</li>
<li>P点进入洞中之后，V走到B点；</li>
<li>V叫P信左边或右边出来</li>
<li>P按照V的要求从左边或有边出来；</li>
<li>P和V重复执行上面的步骤N次</li>
</ul>
<p>如果每次P走的都正确，则认为P知道咒语。</p>
<h2 id="标签和读写器的通信模式">标签和读写器的通信模式</h2>
<p>标签分类及其特点</p>
<table>
   <tr>
        <td>分类</td> 
        <td>能量来源</td> 
        <td>发送器类型</td> 
        <td>最大距离/cm</td>
   </tr>
   <tr>
        <td>被动式标签</td>
        <td>被动式</td>
        <td>被动</td>
        <td>10</td>  
   </tr>
   <tr>
        <td>主动式标签</td>
        <td>内部电池</td>
        <td>主动</td>
        <td>1000</td>  
   </tr>
   <tr>
        <td>半主动式标签</td>
        <td>内部电池</td>
        <td>被动</td>
        <td>100</td>  
   </tr>  
</table>
<p>标签分类及其功能</p>
<table>
   <tr>
        <td>分类</td> 
        <td>能量来源</td> 
        <td>别名</td> 
        <td>存储</td>
        <td>特点</td>
   </tr>
   <tr>
        <td>class0</td>
        <td>被动式</td>
        <td>防盗窃标签</td>
        <td>无</td>  
        <td>EAS功能</td>
   </tr>
   <tr>
        <td>class1</td>
        <td>任意</td>
        <td>EPC（电子产品标签）</td>
        <td>只读</td> 
        <td>仅用于识别</td>  
   </tr>
   <tr>
        <td>class2</td>
        <td>任意</td>
        <td>EPC（电子产品标签）</td>
        <td>读写</td> 
        <td>数据日志记录</td>  
   </tr>
   <tr>
        <td>class3</td>
        <td>内部电池</td>
        <td>传感器标签</td>
        <td>读写</td> 
        <td>环境传感器</td>  
   </tr>
   <tr>
        <td>class4</td>
        <td>内部电池</td>
        <td>智能颗粒</td>
        <td>读写</td> 
        <td>自动组网</td>  
   </tr>
</table>
<h2 id="rfid病毒">RFID病毒</h2>
<p>2006年3月荷兰Vrije大学一组计算机研究员宣布，发现包括EPC标签在内的RFID标签可以携带病毒，并能攻击计算机。他们认为，可读写的电子标签存在着安全隐患。</p>
<h2 id="rfid系统通信模型">RFID系统通信模型</h2>
<p>这一个模型的物理层主要关心的问题是什么？</p>
<ul>
<li>物理模型主要关心电气信号的问题，例如频道分配、物理载波等，其中最重要的问题是载波切割问题。</li>
</ul>
<p>其他层关注的问题：</p>
<ul>
<li>
<p>通信层主要解决多个标签的访问问题。</p>
</li>
<li>
<p>应用层主要解决与最上层应用直接相关的内容，包括认证、识别、以及应用层数据表示。</p>
</li>
</ul>
<h2 id="rfid技术中epc系统的安全问题">RFID技术中EPC系统的安全问题</h2>
<p>EPC（电子产品标签）</p>
<ul>
<li>标签本身的缺陷
<ul>
<li>用户都可以利用合法的读写器或自购的读写器对电子标签进行读写或修改里面的存储信息。</li>
<li>支持EPC global标准的无源标签大多数只允许写入一次，但是支持其他标准（ISO标准）的RFID标签可以写入多次；</li>
<li>电子标签可以写入多次带来便利的同时，也带来了很多安全隐患。</li>
</ul>
</li>
<li>通信链路上的安全问题
<ul>
<li>黑客非法截取通信</li>
<li>拒绝服务器攻击（Dos）</li>
<li>利用假冒标签向读写器发送数据</li>
<li>RFID读写器与后台系统之间的通信信息安全</li>
</ul>
</li>
</ul>
<h2 id="采用密码机制解决rfid安全问题">采用密码机制解决RFID安全问题</h2>
<p>几种常用的密码机制协议：</p>
<ul>
<li>Hash-Lock协议</li>
<li>随机化Hash-Lock协议</li>
<li>Hash链协议</li>
<li>基于散列的ID变化协议</li>
<li>数字图书馆RFID协议</li>
<li>分布式RFID询问-应答协议</li>
<li>LCAP协议：也是一种询问-应答协议，只是每次执行之后都要刷新ID</li>
<li>再次加密机制</li>
</ul>
<h2 id="传感器网络组网技术面临的安全问题">传感器网络组网技术面临的安全问题</h2>
<table>
<thead>
<tr>
<th>网络层次</th>
<th>受到的攻击</th>
</tr>
</thead>
<tbody>
<tr>
<td>物理层</td>
<td>物理破坏、信道阻塞</td>
</tr>
<tr>
<td>链路层</td>
<td>制造冲突攻击、反馈伪造攻击、链路阻塞耗尽攻击</td>
</tr>
<tr>
<td>网络层</td>
<td>路由攻击、虫洞攻击、女巫攻击、HELLO泛红攻击</td>
</tr>
<tr>
<td>应用层</td>
<td>去同步攻击、拒绝服务攻击</td>
</tr>
</tbody>
</table>
<h2 id="传感器网络中的攻击和防疫手段">传感器网络中的攻击和防疫手段</h2>
<table>
   <tr>
        <td>网络层次</td> 
        <td>攻击手段</td> 
        <td>防御手段</td>
   </tr>
   <tr>
        <td>物理层</td> 
        <td>阻塞攻击</td> 
        <td>调频、消息优先级、低占空比、区域映射、模式转换</td>
   </tr>
   <tr>
        <td rowspan="4"><b>链路层</b></td> 
        <td>物理破坏</td> 
        <td>伪装和隐藏</td>
   </tr>
   <tr>
        <td>冲突攻击</td> 
        <td>纠错码</td> 
   </tr>
   <tr>
        <td>耗尽攻击</td> 
        <td>设计竞争门限</td> 
   </tr>
   <tr>
       <td>非公平竞争</td> 
        <td>短帧和非优先级策略</td> 
   </tr>
   <tr>
        <td rowspan="4">网络层</td> 
        <td>丢弃和贪婪破坏</td> 
        <td>冗余路径探测机制</td> 
   </tr>
    <tr>
        <td>汇聚节点攻击</td> 
        <td>加密和逐条认证机制</td> 
   </tr>
   <tr>
        <td>方向误导攻击</td> 
        <td>出口过滤、认证监视机制</td> 
   </tr>
   <tr>
        <td>黑洞攻击</td> 
        <td>认证、监视、冗余机制</td> 
   </tr>
   <tr>
        <td rowspan="2">应用层</td> 
        <td>泛红攻击</td> 
        <td>客户端谜题</td> 
   </tr>
   <tr>
        <td>去同步攻击</td> 
        <td>认证</td> 
   </tr>
</table>
<h2 id="入侵检测技术">入侵检测技术</h2>
<p>由于在物联网中依靠密码机制不能完全抵御所有攻击，所以采用入侵检测技术作为信息安全的第二道防线。</p>
<p>入侵检测技术是一种网络安全手段，旨在通过监控网络和系统的活动来发现违反安全策略的行为。这项技术能够识别未授权访问、攻击行为以及其他潜在的安全威胁。</p>
<p>按照检测节点是否主动发送消息，可将入侵检测分为主动检测和被动检测。</p>
<p>主动检测主要有四种：</p>
<ul>
<li>路径诊断的方法：源节点向故障路径上的检测节点发送消息，收到消息的检测消息要回复消息，如果某一路径上的检测节点没有回复，说明这一路径上出现故障，需要在这一路经上插入新的节点，重新检测；</li>
<li>邻居检测的方法：</li>
<li>通过向多个路径发送ping包的方式发现路径上的关键节点，从而部署攻击检测算法；</li>
<li>基于主动信息提供的检测。网络中部分节点定期广播邻居节点信息，其他节点通过分析累计一定时间后的信息发现重复节点。</li>
</ul>
<h2 id="zigbee网络结构">ZigBee网络结构</h2>
<ul>
<li>星状结构</li>
<li>网状结构</li>
<li>簇状结构</li>
</ul>
<h2 id="数据链路层安全">数据链路层安全</h2>
<p><strong>注意：</strong> 这里指的是ZigBee中的数据链路。</p>
<p><strong>IEEE802.15.4</strong> 标准MAC子层使用的是CCM模式，CCM是一种通用的认证和加密模式，被定义使用在类似AES的128位数据块上，它由CTR模式和CBC-MAC模式组成。</p>
<h2 id="zigbee中确保安全的方法">ZigBee中确保安全的方法</h2>
<ul>
<li>加密技术:使用AES-128加密算法</li>
<li>鉴权技术：保证信息的原始性，使得信息不被第三方攻击；</li>
<li>完整性保护：对信息的完整性保护有四种选择，分别是0、32、64和128位，默认采用64位；</li>
</ul>
<h2 id="无线通信网络安全中安全连接的三要素">无线通信网络安全中安全连接的三要素</h2>
<ul>
<li>鉴权：在信息被允许传输前，无线网络节点必须被识别，而且必须提交能够被认为有效的信任书；</li>
<li>加密：在发送无线网络的数据包之前，无线网络节点必须对数据进行加密以确保数据的机密性；</li>
<li>数据的完整性：在发送数据包之前，无线网络节点必须确保数据包中包含有关的数据完整性的信息，这样接收者才能确认数据在传输的过程中没有被动过。</li>
</ul>
<h2 id="无线网络安全所面临的威胁地址欺骗和会话拦截">无线网络安全所面临的威胁——地址欺骗和会话拦截</h2>
<p>由于IEEE802.11无线局网不对数据帧进行认证，</p>
<ul>
<li>攻击者可以通过欺骗帧重定向数据流；</li>
<li>攻击者可以使ARP（地址解析协议）表变得混乱；</li>
<li>攻击者可以通过简单的方法获取节点的MAC地址，恶意攻击时会使用到这些MAC地址。</li>
</ul>
<h2 id="无线局域网安全技术之wep">无线局域网安全技术之WEP</h2>
<p>IEEE802.11.b标准规定了一种 <strong>有线等效加密</strong> （WEP）的可选加密方案，目的是为WLAN提供与有线网络相同级别的安全保护。
WEP在数据传输上起到一定安全性和保密性作用，可以组织无线用户无意地查看AT和STA传输的信息。
这个方案也有其缺点，这里只说明其中一个</p>
<ul>
<li>ICV算法不适合。ICV是一种基于RCR-32的用于检测传输噪音和普通错误的算法。CRC-32是信息的线性函数，意味着攻击者可以篡改加密信息，并很容易修改IVC，使信息表面上看起来可信。</li>
</ul>
<h2 id="无线网络主流技术安全解决方案wpa">无线网络主流技术安全解决方案——WPA</h2>
<p>主流解决方案有很多，这里只介绍WPA。</p>
<p>WPA是下一代无线局域网标准IEEE802.11i之前的过渡方案，WPA也是IEEE802.11i的一部分。WPA率先使用IEEE802.11i中的加密技术——TKIP，这项技术可以大幅度解决IEEE802.11i使用WEP时隐藏的安全问题。</p>
<h2 id="互联网网络安全防火墙的作用">互联网网络安全——防火墙的作用</h2>
<ul>
<li>阻止：阻止某种类型的通信量通过防火墙；</li>
<li>允许：允许与阻止相反。</li>
</ul>
<h2 id="防火墙的结构屏蔽子网模式">防火墙的结构——屏蔽子网模式</h2>
<p>简单而言就是在外网与内网之间建一个子网屏蔽网络，及时这个子网被攻陷，外网还是要经过内网路由。</p>
<p><a href="#R-image-df0a8f43f03d8ca42dffd5ecc5359730" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/13.%E7%89%A9%E8%81%94%E7%BD%91%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E8%AE%BA/%E7%BB%98%E5%9B%BE1.jpg" alt="屏蔽子网模式" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-df0a8f43f03d8ca42dffd5ecc5359730"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/13.%E7%89%A9%E8%81%94%E7%BD%91%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E8%AE%BA/%E7%BB%98%E5%9B%BE1.jpg" alt="屏蔽子网模式" class="lightbox-image        " loading="lazy"></a></p>
<h2 id="vpn在中国使用要解决哪些问题">VPN在中国使用要解决哪些问题？</h2>
<ul>
<li>IPSec通过包封装的方法</li>
<li>建立隧道</li>
<li>IPSec VPN的类型</li>
<li>怎样找到VPN节点类型</li>
<li>如何建立隧道
<ul>
<li>UDP和TCP都可以穿过防火墙，即可以使用这两协议封装信息建立隧道，但是TCP有握手挥手过程，这一过程会占用时间，选择UDP更为合适。</li>
<li>选择好封装协议后，为避免两个节点VPN可能在防火墙之后的情形，需要通过第三方建立隧道传输信息，即两个设备都可以与第三个设备进行通信。</li>
</ul>
</li>
<li>如何找到与本VPN相关的节点</li>
</ul>
<h2 id="中间件的体系结构和核心模块">中间件的体系结构和核心模块</h2>
<p><a href="#R-image-2d94da5f3c5655484ab4fd57c4440e1f" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/13.%E7%89%A9%E8%81%94%E7%BD%91%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E8%AE%BA/%E7%BB%98%E5%9B%BE2.jpg" alt="屏蔽子网模式" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-2d94da5f3c5655484ab4fd57c4440e1f"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/13.%E7%89%A9%E8%81%94%E7%BD%91%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E8%AE%BA/%E7%BB%98%E5%9B%BE2.jpg" alt="屏蔽子网模式" class="lightbox-image        " loading="lazy"></a></p>
<p>
<div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
  <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
  <ul class="box-content attachments-files">
  </ul>
</div>#</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="Tags" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../../tags/cortex-a9%E5%BE%AE%E5%A4%84%E7%90%86%E5%99%A8/">Cortex-A9微处理器</a></li>
    <li><a class="term-link" href="../../tags/linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">Linux操作系统</a></li>
    <li><a class="term-link" href="../../tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/">嵌入式</a></li>
  </ul>
</div>
            </header>
<h1 id="12嵌入式系统设计知识点">12.嵌入式系统设计知识点</h1>

<h2 id="基于cortex-a9微处理器的硬件平台">基于Cortex-A9微处理器的硬件平台</h2>
<h3 id="risc和cisc">RISC和CISC</h3>
<p>RISC是精简指令集计算机，CISC是复杂指令集计算机</p>
<p>RISC（精简指令集计算机，Reduced Instruction Set Computer）和CISC（复杂指令集计算机，Complex Instruction Set Computer）是两种不同的计算机架构设计理念，它们在指令集的复杂性、指令执行方式、硬件实现等方面有所区别。以下是RISC和CISC的主要特点及其区别：</p>
<ul>
<li>RISC（精简指令集计算机）
<ul>
<li>指令集简单：RISC架构拥有较少的指令，通常每个指令执行一个简单的操作。</li>
<li>指令执行快速：由于指令简单，大多数RISC指令可以在单个时钟周期内完成。</li>
<li>寄存器丰富：RISC架构通常具有更多的寄存器，以减少对内存的访问次数。</li>
<li>流水线执行：RISC处理器设计易于实现流水线技术，提高指令吞吐率。</li>
<li>编译器优化：RISC架构依赖编译器将复杂操作转换为一系列简单的指令。</li>
</ul>
</li>
<li>CISC（复杂指令集计算机）
<ul>
<li>指令集复杂：CISC架构拥有大量的指令，包括一些执行复杂操作的指令。</li>
<li>指令执行较慢：CISC指令可能需要多个时钟周期来完成。</li>
<li>寄存器较少：CISC架构通常具有较少的寄存器，更多依赖内存访问。</li>
<li>微指令执行：CISC处理器可能使用微指令（microcode）来实现复杂指令。</li>
<li>硬件复杂性：CISC处理器的硬件设计相对复杂，以支持广泛的指令集。</li>
</ul>
</li>
</ul>
<p>区别</p>
<ul>
<li>指令集大小：RISC的指令集较小，CISC的指令集较大。</li>
<li>指令复杂性：RISC指令简单，CISC指令复杂。</li>
<li>执行速度：RISC指令通常执行更快，CISC指令执行可能较慢。</li>
<li>硬件设计：RISC处理器设计相对简单，CISC处理器设计复杂。</li>
<li>内存访问：RISC架构倾向于减少内存访问，CISC架构可能更频繁地访问内存。</li>
<li>依赖编译器：RISC架构更依赖编译器优化，CISC架构则在硬件层面提供复杂操作。</li>
</ul>
<h3 id="arm处理器支持的基本数据类型">ARM处理器支持的基本数据类型</h3>
<p>数据类型：字、半字、字节。</p>
<p>说明：</p>
<ul>
<li>一个字节占8位，半个字节占16位，一个字占32位；</li>
<li>在存储数据时，字要按照4个字节来存储，所以每一次存时地址都加4，地址末位是00，例如0x13FFFFF8,0x13FFFFFC，</li>
<li>在存储数据时，半字要按照2个字节来存，所以每一次存时地址都加2，地址末位是0，例如0x13FFFFF4,0x13FFFFF6，；</li>
</ul>
<h3 id="arm处理器的工作状态">ARM处理器的工作状态</h3>
<p>主要有两种状态，主要区别就是执行的指令集位数不同；</p>
<ul>
<li>Thumb状态，微处理器执行16位的半字对齐的Thumb指令集，Thumb指令集是从ARM微处理的第四个版本开始增加（v4T）；</li>
<li>ARM状态，微处理器执行32位的字对齐的ARM指令集。</li>
</ul>
<h3 id="arm存储格式">ARM存储格式</h3>
<ul>
<li>
<p>大端格式：高字节存储在低地址，低字节存储在低地址；</p>
</li>
<li>
<p>小端格式:高字节存在高地址，低字节存储在低地址；
说明：</p>
</li>
<li>
<p>对高字节和低字节可以这样理解，假设有一个32位的地址为0x13FFFFF1，它的高字节是31，也可以理解成最高那一位的下标，31这一位存了0，低字节是0存了1。把这个理解带入上面的大端格式，小端格式。</p>
</li>
</ul>
<h3 id="arm处理器寄存器">ARM处理器寄存器</h3>
<ul>
<li>共有40个32位的寄存器，其中33个通用寄存器，7个状态寄存器；</li>
<li>通用寄存器
<ul>
<li>未分组寄存器（R0-R7）；</li>
<li>分组寄存器（R8-R14）；</li>
</ul>
</li>
<li>ARM处理器的程序状态寄存器包括：CPSR（当前程序状态寄存器）和SPSR（程序状态备份寄存器）</li>
</ul>
<h3 id="中断">中断</h3>
<h3 id="arm工作模式">ARM工作模式</h3>
<ul>
<li>
<p>用户模式（usr）:应用程序执行状态。</p>
</li>
<li>
<p>快速中断模式（fiq）：用于高速数据传输或通道处理。</p>
</li>
<li>
<p>外部中断模式（irq）：用于通用的外部中断。</p>
</li>
<li>
<p>特权模式（svc）：操作系统使用的保护模式。</p>
</li>
<li>
<p>数据访问中止模式（abt）：当数据或指令预取终止时进入该模式，可以用于虚拟存储及存储保护。</p>
</li>
<li>
<p>未定义指令中止模式（und）：当未定义的指令执行时进入该模式，可用于支持硬件协处理器的软件仿真。</p>
</li>
<li>
<p>系统模式（sys）：运行具有特权的操作系统任务。</p>
</li>
<li>
<p>监控模式（mon）：可在安全模式与非安全模式之间转换。</p>
</li>
<li>
<p>执行程序什么模式？</p>
</li>
<li>
<p>读指令并执行，读取未定义指令什么模式？</p>
</li>
<li>
<p>遇到特权任务什么模式？</p>
</li>
<li>
<p>遇到中断什么模式?</p>
</li>
<li>
<p>指令执行结束什么模式？</p>
</li>
</ul>
<h3 id="3级5级流水线">3级、5级流水线</h3>
<ul>
<li>3级流水线指令可以分解成取指令、编译、执行；</li>
<li>5级流水线指令可以分解成取指令、编译、执行、缓冲、写回。</li>
</ul>
<h3 id="程序状态寄存器">程序状态寄存器</h3>
<ul>
<li>
<p>CPSR中的[31:27]为条件标志位，具体含义如下：</p>
<ul>
<li>N：符号标志位。当用两个补码表示的带符号数进行运算时，N=1表示运算的结果为负数；N=0表示运算的结果为正数或零。</li>
<li>Z：结果是否为0的标志。Z=1，表示运算结果为0；Z=0，表示运算结果为非0。</li>
<li>C：进位或借位标志位。加法运算结果产生了借位时C=1，减法运算产生了借位时C=1，否则为0；包含移位操作的非加/减运算指令，C为移出值的最后一位；其他运算指令，C的值通常不变。</li>
<li>V：溢出标志位。对于加减法运算指令，V=1表示符号位溢出，其它指令的影响V位。</li>
</ul>
</li>
<li>
<p>CPSR中的[7:0]为控制位，具体含义如下：</p>
<ul>
<li>I：IRQ中断使能位；</li>
<li>F：FIQ中断使能位；</li>
<li>T：处理器运行状态控制位；</li>
<li>M[4:0]：运行模式位。</li>
</ul>
</li>
<li>
<p>其它标志位。</p>
</li>
</ul>
<h3 id="arm指令集条件域">ARM指令集条件域</h3>
<ul>
<li>EQ：相等，（CPSR）Z=1；</li>
<li>GT：大于，Z=0&amp;&amp;N=Z;</li>
<li>TF：小于等于，Z=1||N=Z；</li>
</ul>
<h3 id="寻址指令">寻址指令</h3>
<h3 id="数据处理指令">数据处理指令</h3>
<ul>
<li>RSB 逆向减法，例如：</li>
</ul>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>  RSB Rd Rn op2 ;op2<span style="color:#f92672">-</span>Rn赋值给Rd</span></span></code></pre></div><ul>
<li>
<p>MUL 32位乘法，</p>
</li>
<li>
<p>CMP 比较，例如</p>
</li>
</ul>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>  CMP Rn op2 ;Rn<span style="color:#f92672">-</span>op2</span></span></code></pre></div><ul>
<li>
<p>MOV指令:它的传送指令只能是把一个寄存器的值(要能用立即数表示)赋给另一个寄存器，或者将一个常量赋给寄存器，将后边的量赋给前边的量</p>
</li>
<li>
<p>ADD指令:ADD指令用于把两个操作数相加，并将结果存放到目的寄存器中。</p>
</li>
<li>
<p>SUB指令:SUB指令用于把操作数1减去操作数2，并将结果存放到目的寄存器中</p>
</li>
</ul>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>SUB  r0, r1, r2 ; r0 <span style="color:#f92672">=</span> r1 <span style="color:#f92672">-</span> r2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>SUB  r0, r1, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">256</span>                
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>SUB  r0, r2, r3, LSL<span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">1</span>  ; r0 <span style="color:#f92672">=</span> r2 <span style="color:#f92672">-</span> (r3 <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">1</span>)</span></span></code></pre></div><ul>
<li>LDR指令:LDR指令用于从存储器中将一个32位的字数据传送到目的寄存器中.</li>
</ul>
<p>用法1：
LDR r0, =0x20000000
用法2：
LDR r0, =0x30000000</p>
<ul>
<li>STR指令:STR指令用于从源寄存器中将一个32位的字数据传送到存储器中。即：将前边的量赋值给后边的量。</li>
</ul>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>STR r0<span style="color:#960050;background-color:#1e0010">，</span>[r1]  ; <span style="color:#960050;background-color:#1e0010">将</span>r0中的字数据写入以r1为地址的存储器中
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>STR r0<span style="color:#960050;background-color:#1e0010">，</span>[r1], <span style="color:#960050;background-color:#1e0010">＃</span><span style="color:#ae81ff">8</span> ; <span style="color:#960050;background-color:#1e0010">将</span>r0中的字数据写入以r1为地址的存储器中<span style="color:#960050;background-color:#1e0010">，并将新地址</span>r1<span style="color:#960050;background-color:#1e0010">＋</span><span style="color:#ae81ff">8</span><span style="color:#960050;background-color:#1e0010">写入</span>r1<span style="color:#960050;background-color:#1e0010">。</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>STR r0<span style="color:#960050;background-color:#1e0010">，</span>[r1, <span style="color:#960050;background-color:#1e0010">＃</span><span style="color:#ae81ff">8</span>] ; <span style="color:#960050;background-color:#1e0010">将</span>r0中的字数据写入以r1<span style="color:#960050;background-color:#1e0010">＋</span><span style="color:#ae81ff">8</span><span style="color:#960050;background-color:#1e0010">为地址的存储器中。</span></span></span></code></pre></div><h3 id="跳转指令">跳转指令</h3>
<h3 id="案例1">案例1</h3>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>     CMP  R0<span style="color:#960050;background-color:#1e0010">，</span> <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0</span>                            
</span></span><span style="display:flex;"><span>     MOVEQ  R1<span style="color:#960050;background-color:#1e0010">，</span> <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0</span>    
</span></span><span style="display:flex;"><span>     MOVGT  R1<span style="color:#960050;background-color:#1e0010">，</span> <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">1</span>  
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">解：</span>CMP  R0<span style="color:#960050;background-color:#1e0010">，</span> <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0</span>     ; <span style="color:#960050;background-color:#1e0010">将</span>R0的值减去0<span style="color:#960050;background-color:#1e0010">，并根据结果设置</span>CPSR的标志位                           
</span></span><span style="display:flex;"><span>        MOVEQ  R1<span style="color:#960050;background-color:#1e0010">，</span> <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0</span>   ; <span style="color:#960050;background-color:#1e0010">若</span>R0等于0<span style="color:#960050;background-color:#1e0010">，</span>Z<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">，则将立即数</span><span style="color:#ae81ff">0</span><span style="color:#960050;background-color:#1e0010">装入到</span>R1
</span></span><span style="display:flex;"><span>        MOVGT  R1<span style="color:#960050;background-color:#1e0010">，</span> <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">1</span>   ; <span style="color:#960050;background-color:#1e0010">若</span>R0大于0<span style="color:#960050;background-color:#1e0010">，</span>Z<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span><span style="color:#960050;background-color:#1e0010">，</span>N<span style="color:#f92672">=</span>V<span style="color:#960050;background-color:#1e0010">，则将立即数</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">装入到</span>R1</span></span></code></pre></div><p>程序实现的功能是判断R0的值与0的关系，将结果装入R1，若R0=0则R1=0，若R0&gt;0则R1=1.用C语言描述如下。
设R0对应变量a，R1对应变量b，</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>          <span style="color:#66d9ef">if</span>(a<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>                 b<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">else</span>  <span style="color:#a6e22e">if</span>(a<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>                 b<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>; 
</span></span></code></pre></div><h3 id="案例2">案例2</h3>
<p>对程序各条指令进行注释，最后分析整个程序的功能。</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>	 AREA	Example1,CODE,READONLY	  ; <span style="color:#960050;background-color:#1e0010">声明代码段</span>Example1  
</span></span><span style="display:flex;"><span>	 ENTRY				     ; <span style="color:#960050;background-color:#1e0010">标识程序入口</span>
</span></span><span style="display:flex;"><span>	 CODE32				  ; <span style="color:#960050;background-color:#1e0010">声明</span><span style="color:#ae81ff">32</span><span style="color:#960050;background-color:#1e0010">位</span>ARM指令
</span></span><span style="display:flex;"><span>START 	                   ; <span style="color:#960050;background-color:#1e0010">标号</span><span style="color:#f92672">/</span><span style="color:#960050;background-color:#1e0010">标签</span>
</span></span><span style="display:flex;"><span>MOV  R0, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0</span>			  ; <span style="color:#960050;background-color:#1e0010">设置参数，</span>R0<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>	MOV  R1, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">10</span>           ; <span style="color:#960050;background-color:#1e0010">设置参数，</span>R1<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>LOOP                       ; <span style="color:#960050;background-color:#1e0010">标号</span><span style="color:#f92672">/</span><span style="color:#960050;background-color:#1e0010">标签</span>
</span></span><span style="display:flex;"><span>BL  ADD_SUB	         ; <span style="color:#960050;background-color:#1e0010">调用子程序</span>ADD_SUB
</span></span><span style="display:flex;"><span>	B	LOOP			     ; <span style="color:#960050;background-color:#1e0010">跳转到</span>LOOP
</span></span><span style="display:flex;"><span>ADD_SUB	                ; <span style="color:#960050;background-color:#1e0010">标号</span><span style="color:#f92672">/</span><span style="color:#960050;background-color:#1e0010">标签</span>
</span></span><span style="display:flex;"><span>	ADDS  R0, R0, R1		  ; R0 <span style="color:#f92672">=</span> R0 <span style="color:#f92672">+</span> R1<span style="color:#960050;background-color:#1e0010">，并根据结果设置</span>CPSR的标志位
</span></span><span style="display:flex;"><span>	MOV	  PC, LR	     	  ; <span style="color:#960050;background-color:#1e0010">子程序返回，</span>PC<span style="color:#f92672">=</span>LR
</span></span><span style="display:flex;"><span>	END				         ; <span style="color:#960050;background-color:#1e0010">声明文件结束</span></span></span></code></pre></div><p><strong>整个程序的功能</strong>：程序实现了一个死循环，每次循环R0都增加10。</p>
<h2 id="linux编程基础">LInux编程基础</h2>
<h3 id="gcc编译的4个过程的主要功能">GCC编译的4个过程的主要功能</h3>
<ul>
<li>预编译：主要功能是读取源文件，并对头文件预编译语句和一些特殊符号进行分析和处理；</li>
<li>编译：主要包括检查代码语法和将预编译后的文件转换成汇编语言；</li>
<li>汇编：主要的功能是将汇编语言的代码编程目标文件；（机器代码，0和1）</li>
<li>连接：主要功能是连接代码，生成可执行文件。</li>
</ul>
<h3 id="简述make工具和makefile的基本结构">简述Make工具和Makefile的基本结构</h3>
<p>Make又叫工程管理工具，即管理较多的工程文件。</p>
<p>主要的功能:</p>
<ul>
<li>通过Makefile文件来描述源程序之间相互依赖的关系，并自动完成维护编译工作；</li>
<li>能够根据文件的时间戳发现更新的文件，可以减少编译工作；</li>
</ul>
<p>基本结构：</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>target <span style="color:#960050;background-color:#1e0010">：</span> dependency
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;</span>tab <span style="color:#960050;background-color:#1e0010">键</span><span style="color:#f92672">&gt;</span> command</span></span></code></pre></div><p>target:目标；
dependency：依赖关系
command：命令</p>
<h3 id="makefile变量">Makefile变量</h3>
<ul>
<li>用户自定义变量</li>
<li>预定义变量</li>
<li>自动变量</li>
</ul>
<p>后两个是系统的变量，是Makefile文件常用的变量，其中有部分变量用户可以修改。</p>
<h3 id="预定义变量">预定义变量</h3>
<p>需要记住两个比较重要且常用的预定义变量，即</p>
<ul>
<li>CC：C编译器名称，默认cc</li>
<li>CFLAGS：C编译器的选项，无默认值</li>
</ul>
<h3 id="自动变量又叫系统变量">自动变量（又叫系统变量）</h3>
<ul>
<li>$@ :规则的目标所对应的文件；</li>
<li>$&lt;：规则中的第一个依赖文件；</li>
<li>$^:规则中所有依赖的列表，以空格为间隔符。</li>
</ul>
<h3 id="文件操作编程">文件操作编程</h3>
<p>C语言库中的fopen、fclose、fwrite、fread等函数。</p>
<p>其实是由操作系统的API函数封装而来，如</p>
<ul>
<li>fopen内部其实调用的是open函数，</li>
<li>fwrite内部调用的是write函数。</li>
</ul>
<p>用户也可以直接利用Linux系统的API函数来完成文件操作编程</p>
<h4 id="在linux操作系统下用c语言实现文件操作可以采用哪两种方法">在Linux操作系统下，用C语言实现文件操作可以采用哪两种方法？</h4>
<p>在LInux操作系统中，实现文件操作有两种方法，第一种是调用C语言标准库，第二种是通过Linux系统调用实现。前者独立于操作系统，在任何操作系统下使用C语言标准库函数操作文件，而后者以来于操作系统。</p>
<h3 id="时间编程">时间编程</h3>
<ul>
<li>time函数</li>
</ul>
<p>返回1970.1.1 0时到现在所经历的时间，操作失败返回((time_t)-1)</p>
<ul>
<li>gmtime函数
将日历转化为格林威治标准时间，结果存在结构体tm中。</li>
</ul>
<p>在课堂上老师叫我们使用的并非上面这个函数，而是用localtime(const time_t *timep)这个函数,这个函数可以将日历转为本地时间，具体用法请看<a href="#%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B">综合案例</a></p>
<ul>
<li>gettimeofday函数</li>
</ul>
<p>获取从今日凌晨到现在的时差并存储在tv中，tz存放当地时区差；</p>
<h3 id="综合案例">综合案例</h3>
<p>（4）编写一个程序，将系统时间以“year-month-day hour:minute:second”格式保存在time.txt文件中。</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span><span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span><span style="color:#75715e">&lt;string.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span><span style="color:#75715e">&lt;fcntl.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span><span style="color:#75715e">&lt;time.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#define MAX 40
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> fd,n,ret;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">char</span> writebuf[MAX];
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">struct</span> tm <span style="color:#f92672">*</span>t;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">time_t</span> lt;
</span></span><span style="display:flex;"><span>        lt<span style="color:#f92672">=</span><span style="color:#a6e22e">time</span>(NULL);
</span></span><span style="display:flex;"><span>        t<span style="color:#f92672">=</span><span style="color:#a6e22e">localtime</span>(<span style="color:#f92672">&amp;</span>lt);  <span style="color:#75715e">//将日历时间转化为本地时间
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">sprintf</span>(writebuf,<span style="color:#e6db74">&#34;%d-%d-%d %d:%d:%d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>,t<span style="color:#f92672">-&gt;</span>tm_year<span style="color:#f92672">+</span><span style="color:#ae81ff">1900</span>,t<span style="color:#f92672">-&gt;</span>tm_mon<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>,t<span style="color:#f92672">-&gt;</span>tm_mday,t<span style="color:#f92672">-&gt;</span>tm_hour,t<span style="color:#f92672">-&gt;</span>tm_min,t<span style="color:#f92672">-&gt;</span>tm_sec);   <span style="color:#75715e">//按指定格式保存时间        
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e">/*打开文件，如果文件不存在，则会创建文件*/</span>
</span></span><span style="display:flex;"><span>        fd <span style="color:#f92672">=</span> <span style="color:#a6e22e">open</span>(<span style="color:#e6db74">&#34;time.txt&#34;</span>, O_RDWR <span style="color:#f92672">|</span> O_CREAT);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/*向文件写入字符串*/</span> 
</span></span><span style="display:flex;"><span>        ret <span style="color:#f92672">=</span> <span style="color:#a6e22e">write</span>(fd, writebuf, <span style="color:#a6e22e">strlen</span>(writebuf));
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (ret <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>){
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">perror</span>(<span style="color:#e6db74">&#34;Write Error!&#34;</span>); <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;write %d characters!</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, ret);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/*关闭时，会自动保存文件*/</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">close</span>(fd);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h3 id="多线程编程">多线程编程</h3>
<h4 id="基本用法">基本用法</h4>
<p>使用到pthread_createh头文件，以及libpthread.so和libpthread.a库文件；</p>
<ul>
<li>pthread_create函数：创建线程</li>
<li>pthread_exit函数：退出线程</li>
<li>pthread_join函数：阻塞线程</li>
</ul>
<h3 id="互斥锁线程">互斥锁线程</h3>
<p>解决多个线程在一起执行的时候共享数据、资源的问题。在POSIX中有两种线程同步机制，分别为互斥锁和信号量</p>
<ul>
<li>pthread_mutex_init:初始化互斥锁</li>
<li>pthread_mutex_lock：互斥锁上锁</li>
<li>pthread_mutex_unlock：互斥锁释放</li>
</ul>
<h2 id="嵌入式开发交叉编译与系统移植">嵌入式开发交叉编译与系统移植</h2>
<h3 id="嵌入式软件调试方法">嵌入式软件调试方法</h3>
<ul>
<li>实时在线仿真</li>
<li>模拟调试</li>
<li>软件调试</li>
<li>片上调试</li>
</ul>
<h3 id="引导程序移植">引导程序移植</h3>
<p>操作系统运行前的一个程序，也就是启动程序。</p>
<ul>
<li>BoolLoader工作模式
<ul>
<li>启动加载模式</li>
<li>下载模式</li>
</ul>
</li>
<li>BoolLoader启动过程
<ul>
<li>第一阶段
<ul>
<li>主要依赖CPU的体系结构硬件初始化的代码，通常使用汇编语言编写。</li>
<li>这个阶段的功能主要有：
<ul>
<li>基本硬件设备初始化；</li>
<li>为第二阶段准备ARM空间；</li>
<li>复制BootLoader的第二阶段代码到RAM；</li>
<li>设置栈堆；</li>
<li>跳转到第二阶段的入口点；</li>
</ul>
</li>
</ul>
</li>
<li>第二阶段
<ul>
<li>通常使用C语言完成，以便实现更复杂的功能，使程序具有更好的可读性和可移植性。</li>
<li>这一阶段的主要任务是：
<ul>
<li>初始化这一阶段要使用的硬件设备;</li>
<li>检测系统内存映射；</li>
<li>将内核文件和根目录系统映像文件从Flash读到RAM；</li>
<li>为内核设置启动参数，</li>
<li>调用内核。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>常用的启动文件有很多，这里介绍Uboot。</p>
<p>Uboot是一个开源项目，最早是由德国登克斯（DENX）小组的开发，然后发布在网上，许多对这款软件感兴趣的开发人员共同来维护。</p>
<h4 id="bootloader的核心任务是什么">BootLoader的核心任务是什么？</h4>
<p>启动内核，向内核提供启动参数，完成系统软件的部署功能。</p>
<h4 id="系统加电后执行的第一段代码是什么">系统加电后执行的第一段代码是什么？</h4>
<p>BootLoader(引导程序)是系统上电后运行的第一段代码。</p>
<h4 id="u-boot命令和环境变量">U-Boot命令和环境变量</h4>
<p>U-Boot通常支持几十个常用命令，通过这些命令，可以对目标机进行调试，也可以引导Linux内核，还可以擦写Flash完成系统部署等功能。</p>
<ul>
<li>常用命令：
print: 通常用于打印信息或变量的值到控制台或终端。</li>
</ul>
<p>setenv: 设置环境变量。环境变量是在操作系统中存储的配置信息，可以影响程序的行为。</p>
<p>saveenv: 保存环境变量。这个命令通常用于将当前的环境变量设置保存到非易失性存储器，以便在系统重启后保持这些设置。</p>
<p>ping: 网络诊断工具，用于测试主机之间的网络连接是否可达。</p>
<p>tftp: Trivial File Transfer Protocol（简单文件传输协议）的缩写，用于在设备之间传输文件。</p>
<p>boot: 启动系统或加载执行程序。</p>
<ul>
<li>组合命令
<ul>
<li>movi read:用来读取iNand到DDR上</li>
<li>movi write:用来将DDR写到到iNand上</li>
</ul>
</li>
</ul>
<p><strong>注释</strong>：</p>
<ul>
<li>非易失性存储器 iNand</li>
<li>动态数据随机存取存储器 DDR</li>
</ul>
<h3 id="linux内核简介">linux内核简介</h3>
<p>Linux内核主要功能有：</p>
<ul>
<li>进程管理</li>
<li>内存管理</li>
<li>文件管理</li>
<li>设备管理</li>
<li>网络管理</li>
</ul>
<p>Linux内核源代码非常庞大，它使用目录树结构，内核源码的顶层有许多子目录,分别组织存放各种内核子系统或者文件,如下表：
<a href="#R-image-2e5eb3bd1db806f413bc46f11f915526" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/12.%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image.png" alt="1" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-2e5eb3bd1db806f413bc46f11f915526"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/12.%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image.png" alt="1" class="lightbox-image        " loading="lazy"></a></p>
<h3 id="linux内核移植">Linux内核移植</h3>
<p>Linux内核支持多种处理器，如果目标机使用的是ARM处理器核，使用的交叉编译工具链是arm-linux-，内核移植时要指定处理器的类型以及使用的交叉编译工具链，简述具体操作方法。</p>
<p>具体操作如下。
打开内核顶层目录下的Makefile文件，在文件中找到如下内容。
ARCH？=$(SUBARCH)
CROSS_COMPILE?=$(CONFIG_CROSS_COMPILE:“%”=%)
将找到的以上代码修改为如下内容。
ARCH？=arm
CROSS_COMPILE?=arm-none-linux-gnueabi-
其中，ARCH是CPU架构变量；CROSS_COMPILE是交叉编译工具链变量。修改完成后，保存文件退出。</p>
<h2 id="驱动程序">驱动程序</h2>
<h3 id="驱动程序的功能">驱动程序的功能</h3>
<ul>
<li>对设备初始化和释放</li>
<li>数据传输:把数据从内核传送到硬件和从硬件读取数据,读取应用程序传送给设备文件的数据和回送应用程序请求的数据.</li>
<li>检测和处理设备出现的错误</li>
</ul>
<h4 id="open入口点">Open入口点</h4>
<p>对象：字符设备文件；
特点：字符设备文件都需要经过open入口点调用
open子程序功能：为I/O口作必要的准备工作
同一时刻只能有一个程序访问此设备（即设备是独占的）,则 open子程序必须设置一些标志以表示设备处于忙碌状态。open子程序的调用格式如下。
int open(char  * filename,int acess)</p>
<h4 id="第一个功能中">第一个功能中</h4>
<p>打开设备是由调用定义在incliude/linux/fs.h中的file_operations结构体中的 open()函数完成的。open()函数主要完成的主要工作：</p>
<p>1.若是首次打开，先初始化
2.增加设备的使用计数
3.检测设备是否异常，及时发现设备相关错误
4.读取设备次设备号。</p>
<h3 id="驱动程序的主要组成部分">驱动程序的主要组成部分</h3>
<ul>
<li>自动配置和初始化子程序：检测驱动的硬件设备是否正常，能否正常工作</li>
<li>服务子程序和中断服务程序:这两者分别是驱动程序的上下两部分。
<ul>
<li>驱动上部分，即设备服务子程序，它是系统调用的结果，并且伴随着用户态向核心态的演变，在此过程中还可以调用与进程运行环境有关的函数，比如 sleep()函数。</li>
<li>驱动程序的下半部分，即中断服务子程序</li>
</ul>
</li>
</ul>
<h3 id="linux设备分类-用c表示设备">Linux设备分类 （用C表示设备）</h3>
<ul>
<li>字符设备</li>
<li>块设备</li>
<li>网络设备</li>
</ul>
<p>应用程序操作设备框图
<a href="#R-image-05aed8a262b6b61bdfda23058c327d44" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/12.%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-1.png" alt="2" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-05aed8a262b6b61bdfda23058c327d44"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/12.%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-1.png" alt="2" class="lightbox-image        " loading="lazy"></a></p>
<h3 id="简述驱动程序和应用程序的区别">简述驱动程序和应用程序的区别</h3>
<p>第一，应用程序一般有一个main函数，并从头到尾执行一个任务；驱动程序没有main函数，它在加载时，通过调用module_init宏，完成驱动设备的初始化和注册工作之后便停止工作，并等待被应用程序调用。</p>
<p>第二，应用程序可以和GLIBC库连接，因此可以包含标准的头文件；驱动程序不能使用标准的C库，因此不能调用所有的C库函数，比如输出函数不能使用printf，只能用内核的printk，包含的头文件只能是内核的头文件，比如Linux/module.h。</p>
<p>第三，驱动程序运行在内核空间（又称内核态）比应用程序执行的优先级要高很多。应用程序则运行在最低级别的用户空间（又称用户态），在这一级别禁止对硬件的直接访问和对内存的未授权访问。</p>
<p>应用程序一般有一个main函数,并从头到尾执行一个任务；
应用程序可以和 GLIBC 库连接,因此可以包含标准的头文件；
驱动程序运行在内核空间(又称内核态),比应用程序执行的优先级要高很多。</p>

<div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
  <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
  <ul class="box-content attachments-files">
      <li><a href="../../branch-bundle-1/1.%e5%85%b6%e4%bb%96%e6%96%87%e7%ab%a0/12.%e5%b5%8c%e5%85%a5%e5%bc%8f%e7%b3%bb%e7%bb%9f%e8%ae%be%e8%ae%a1/index.files/%e5%b5%8c%e5%85%a5%e5%bc%8f%e5%a4%8d%e4%b9%a0PPT.pptx">嵌入式复习PPT.pptx</a> (659 KB)</li>
      <li><a href="../../branch-bundle-1/1.%e5%85%b6%e4%bb%96%e6%96%87%e7%ab%a0/12.%e5%b5%8c%e5%85%a5%e5%bc%8f%e7%b3%bb%e7%bb%9f%e8%ae%be%e8%ae%a1/index.files/%e5%b5%8c%e5%85%a5%e5%bc%8f%e4%bd%9c%e4%b8%9a.docx">嵌入式作业.docx</a> (52 KB)</li>
  </ul>
</div>

            <footer class="footline">
<div class=" taxonomy-categories term-list cstyle  " title="Categories" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../../categories/f1-%E5%A4%8D%E4%B9%A0/">F1-复习</a></li>
  </ul>
</div>
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="Tags" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../../tags/esp8266/">ESP8266</a></li>
    <li><a class="term-link" href="../../tags/stm32/">STM32</a></li>
    <li><a class="term-link" href="../../tags/%E7%89%A9%E8%81%94%E7%BD%91/">物联网</a></li>
    <li><a class="term-link" href="../../tags/%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/">物联网应用系统设计</a></li>
  </ul>
</div>
            </header>
<h1 id="物联网应用系统设计">物联网应用系统设计</h1>

<p>物联网结构系统与传统网路系统的区别</p>
<p><a href="#R-image-9e210d2cf7a9f20db81d0045c6997888" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/images/index/1716688211399.png" alt="1716688211399" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-9e210d2cf7a9f20db81d0045c6997888"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/images/index/1716688211399.png" alt="1716688211399" class="lightbox-image        " loading="lazy"></a></p>
<p>前者由三个部分构成</p>
<ul>
<li>信息物品</li>
<li>自主网络</li>
<li>智能应用</li>
</ul>
<h2 id="需求分析">需求分析</h2>
<h3 id="基本概念">基本概念</h3>
<p><a href="#R-image-9ce2907860ef533666e70adcd631f048" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/images/index/1716688246145.png" alt="1716688246145" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-9ce2907860ef533666e70adcd631f048"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/images/index/1716688246145.png" alt="1716688246145" class="lightbox-image        " loading="lazy"></a></p>
<p>需求规格说明：开发、测试、质量保证、项目管理以及相关的项目功能等地方都有重要的作用</p>
<p>需求：功能、性能 、行为、设计约束等方面的期望</p>
<p>需求分析：对要解决的问题的详细分析说明，弄清问题的需求</p>
<h3 id="需求分析过程">需求分析过程</h3>
<p>获取用户需求——分析用户需求——编写需求文档——评审需求分析</p>
<h3 id="需求管理">需求管理</h3>
<p>一、需求管理开发与需求管理的界限</p>
<p><a href="#R-image-a041b66de8bda8c1aabadd53c73703b6" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/images/index/1716688269268.png" alt="1716688269268" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a041b66de8bda8c1aabadd53c73703b6"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/images/index/1716688269268.png" alt="1716688269268" class="lightbox-image        " loading="lazy"></a></p>
<p>需求开发中编写的需求文档数据来自于市场、用户、管理，以基准需求说明为界限，需求管理从这个文档中获取开发信息，通过市场等变动修改这个文档。</p>
<h2 id="需求分析任务">需求分析任务</h2>
<p>1。确定系统运行环境</p>
<p>硬件环境的要求：外存种类、数据的输入方式、数据通信接口；</p>
<p>软件环境的需求：哪一种操作系统、数据库系统；</p>
<p>2。系统性能需求</p>
<p>数据输入系统后系统多久可以可以做出反应；</p>
<p>3。系统功能</p>
<p>确定目标系统的所有功能</p>
<h2 id="设计概要">设计概要</h2>
<h3 id="任务">任务</h3>
<p>根据需求文档确定系统的整体结构，设计其中硬件结构、软件结构和数据结构</p>
<ul>
<li>硬件结构：确定系统功能对应的硬件环境，以及硬件之间的关系；</li>
<li>软件结构：将一个复杂系统按照功能进行模块划分，建立模块的层次结构以及调用关系，确定模块之间的接口以及人机界面</li>
<li>数据结构：数据特征描述、确定数据结构特点何人数据库的设计</li>
</ul>
<h3 id="概要设计原则">概要设计原则</h3>
<p>抽象： <strong>抽象就是抽出事物的本质特征，而暂时不考虑细节。它允许我们定义一个操作的步骤，而不需要立即知道这些步骤是如何执行的。</strong></p>
<p>抽样方法：</p>
<ul>
<li>（1）过程抽象</li>
</ul>
<p>过程抽象关注的是操作的序列，而不是具体实现的细节。它允许我们定义一个操作的步骤，而不需要立即知道这些步骤是如何执行的。</p>
<p><strong>举例</strong>： 假设我们要设计一个软件来管理图书馆的借书和还书过程。过程抽象可能包括以下步骤：</p>
<ul>
<li>用户登录</li>
<li>查询书籍</li>
<li>借书</li>
<li>还书</li>
<li>用户登出</li>
</ul>
<p>在这个抽象级别，我们不需要知道用户如何登录（比如是通过用户名和密码，还是通过社交媒体账号），也不需要知道查询书籍的具体算法。我们只是定义了需要执行的操作序列。</p>
<ul>
<li>（2）数据抽象</li>
</ul>
<p>数据抽象关注的是数据的结构和行为，而不是数据的具体表示。它允许我们定义数据类型和操作，而隐藏了数据的内部细节。</p>
<p><strong>举例</strong>： 考虑一个银行账户系统。数据抽象可能包括以下定义：</p>
<ul>
<li>账户类型（如储蓄账户、支票账户）</li>
<li>账户操作（如存款、取款、转账）</li>
<li>账户属性（如账户号码、账户余额、账户持有人）</li>
</ul>
<p>在这个抽象级别，我们定义了账户是什么以及可以对账户执行哪些操作，但我们不需要知道账户数据是如何存储的（比如是在数据库中，还是在内存中）。</p>
<ul>
<li>（3）控制抽象</li>
</ul>
<p>控制抽象关注的是程序的控制流，而不是具体的控制机制。它允许我们定义程序的执行路径，而不需要立即知道控制流的具体实现。</p>
<p><strong>举例</strong>： 假设我们正在设计一个交通信号灯控制系统。控制抽象可能包括以下逻辑：</p>
<ul>
<li>红灯亮起</li>
<li>等待一定时间</li>
<li>黄灯闪烁</li>
<li>绿灯亮起</li>
<li>等待一定时间后返回到红灯</li>
</ul>
<p>在这个抽象级别，我们定义了信号灯变化的顺序，但我们不需要知道具体的计时机制或者信号灯是如何被激活的。控制抽象允许我们专注于信号灯变化的逻辑，而不是实现细节。</p>
<h2 id="网络结构的基本拓扑结构">网络结构的基本拓扑结构</h2>
<h3 id="拓扑结构的类型和使用选择">拓扑结构的类型和使用选择</h3>
<p>按照组网方式和组网形态：</p>
<ul>
<li>集中式</li>
<li>分布式</li>
<li>混合式</li>
<li>网状式</li>
</ul>
<p>按照节点和结构层次</p>
<ul>
<li>平面网络结构</li>
<li>分级网络结构</li>
<li>混合网络结构</li>
<li>Mesh网络结构</li>
</ul>
<h2 id="表示工具">表示工具</h2>
<h3 id="流程图">流程图</h3>
<ol>
<li>
<p>基本成分</p>
<ul>
<li>处理；</li>
<li>判断条件；</li>
<li>控制流。</li>
</ul>
</li>
<li>
<p>基本的控制结构</p>
<ul>
<li>顺序型；</li>
<li>选择型；</li>
<li>先判断（While）型循环；</li>
<li>后判断（Until）型循环；</li>
<li>多情况（Case）选择型。</li>
</ul>
</li>
<li>
<p>优点
对控制流程的描绘直观、清晰，易于学习掌握。</p>
</li>
<li>
<p>缺点</p>
<ul>
<li>诱使程序员过早地考虑程序的控制流程，而不去考虑程序的全局结构；</li>
<li>用箭头代表控制流，可以完全不顾结构程序设计的思想，随意转移控制；</li>
<li>不易表示数据结构；</li>
<li>修改麻烦。</li>
</ul>
</li>
</ol>
<h3 id="问题分析图">问题分析图</h3>
<p><a href="#R-image-932a710fdd8472345f06ca51043540a6" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/images/index/1716690626234.png" alt="1716690626234" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-932a710fdd8472345f06ca51043540a6"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/images/index/1716690626234.png" alt="1716690626234" class="lightbox-image        " loading="lazy"></a></p>
<h3 id="合图">合图</h3>
<p><a href="#R-image-42e473777bb2d5da091fdb97f8cdece0" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/images/index/1716690895413.png" alt="1716690895413" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-42e473777bb2d5da091fdb97f8cdece0"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/images/index/1716690895413.png" alt="1716690895413" class="lightbox-image        " loading="lazy"></a></p>
<p>优点</p>
<ul>
<li>功能明确，可以一眼看出来；</li>
<li>没有箭头，无法随意转移控制；</li>
<li>很容易确定局部和全局的作用域；</li>
<li>很容易表示嵌套关系，也可以表示模块的参差结构</li>
<li>强制让设计人员按照结程序设计描述方案；</li>
<li>图形直观。容易理解设计意图</li>
</ul>
<p>缺点</p>
<ul>
<li>当分支嵌套较多时较麻烦，有时候在一页纸上很难画下来；</li>
<li>画图麻烦修改麻烦</li>
</ul>
<h3 id="层次图">层次图</h3>
<p><a href="#R-image-7e971cb8542a77346fb5d65ccd4c9807" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image.png" alt="666" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-7e971cb8542a77346fb5d65ccd4c9807"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image.png" alt="666" class="lightbox-image        " loading="lazy"></a></p>
<h2 id="概要设计与详细设计的区别">概要设计与详细设计的区别</h2>
<ul>
<li>概要设计通常得到软件结构图</li>
<li>详细设计常用的描述方式（常用的图）：
<ul>
<li><a href="#%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90%E5%9B%BE">流程图</a>、</li>
<li><a href="#%E5%90%88%E5%9B%BE">N-S图</a>、</li>
<li><a href="#%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90%E5%9B%BE">PAD图</a>、</li>
<li>过程设计语言（PLD），又称伪代码。</li>
</ul>
</li>
</ul>
<p>注：伪代码——伪代码是一种非正式的、类似编程语言的描述方式，它用于描述算法的逻辑流程而不涉及具体的编程语言细节。伪代码使得设计者可以在不编写实际代码的情况下表达算法和程序结构。</p>
<h2 id="接口设计">接口设计</h2>
<p>外部接口：外部用户、软/硬环境与软件系统的接口；
内部系统：已划分出的模块间接口。</p>
<h2 id="工厂方法模式">工厂方法模式</h2>
<p>为创建对象提供过度接口，以便将创建对象的具体过程屏蔽隔离起来，达到提高灵活性的目的</p>
<p>工厂模式在《java与模式》中分为：</p>
<ul>
<li>简单工厂模式</li>
<li>工厂方法模式</li>
<li>抽象工厂模式</li>
</ul>
<h2 id="拓扑控制中考虑的设计目标和相关概念-覆盖">拓扑控制中考虑的设计目标和相关概念-覆盖</h2>
<p>覆盖可以理解为对传感器网络质量的度量
覆盖可以分为：</p>
<ul>
<li>区域覆盖：研究对目标区域的覆盖（监测）问题；</li>
<li>点覆盖：研究离散的目标覆盖问题；</li>
<li>栅栏覆盖：研究运动穿过网络部署区域被发现的概率问题。</li>
</ul>
<h2 id="manet路由协议按需路由协议也是一种算法">MANET路由协议——按需路由协议（也是一种算法）</h2>
<p>TORA(temporally ordered routing alorithm)协议是临时按需路由协议，是一种有向环基础上提出的基于路由反转的自适应分布式路由算法。</p>
<p>作为一个有源端发起的按需路由，它可以找到从源头到目的节点的多条路由，当网络拓扑发生改变时，控制消息在改变的拓扑结构范围内传播，节点只需要维护相邻节点的路由信息；</p>
<p>协议由路由建立、路由维护、路由拆除三部分组成。</p>
<h2 id="无线传感网络选择">无线传感网络选择</h2>
<ul>
<li>选择有线还是无线</li>
<li>选择专利还是标准化无线方案</li>
<li>无线标准
<ul>
<li>GPRS</li>
<li>Wi-Fi</li>
<li>蓝牙</li>
<li>ZigBee</li>
</ul>
</li>
<li>无线网络拓扑结构</li>
</ul>
<h2 id="无线体域网">无线体域网</h2>
<p>WBAN由三部分组成：</p>
<ul>
<li>植入或佩戴于人体的<strong>网络神经</strong>，</li>
<li>作为通信枢纽的<strong>汇聚节点</strong>，</li>
<li>负责信息处理和控制整个网络的<strong>上位机监控系统</strong>。</li>
</ul>
<h3 id="wban采集人体生理信息的过程">WBAN采集人体生理信息的过程</h3>
<ol>
<li>某一种生理信号传感器和无线收发装置能够构成一个网络节点，各个节点分布式的分布在人体上，构成局域网。</li>
<li>网络节点在上位机电脑和汇聚节点的指令下收集人体生理信息，将收集到的信息通过汇聚节点传输到上位机电脑。</li>
</ol>
<h2 id="系统集成">系统集成</h2>
<ul>
<li>
<p>系统集成式指综合分布先系统和计算机网络技术，将各个分离的设备、功能和信息等集成到相互关联、统一和协调的系统之中，以达到资源充分共享，实现集中、高效、便利的管理。</p>
</li>
<li>
<p>系统集成采用功能集成、网络集成、软件界面集成等多种集成技术；</p>
</li>
<li>
<p>系统集成的关键在于解决系统之间互联和互操作性的问题，它是一个对厂商、多协议和面向各种应用的结构系统</p>
</li>
</ul>
<p>简而言之，就是把分散的东西集成到一起，使得它们之间可以相互通信共享数据的一种技术。</p>
<h2 id="软件测试的方法">软件测试的方法</h2>
<ul>
<li>黑盒测试，</li>
<li>白盒测试</li>
<li>灰盒测试。</li>
</ul>
<h2 id="静态测试">静态测试</h2>
<p>不执行代码。主要对编程格式、结构等方面进行评估并发现存在的错误。</p>
<p>优点：</p>
<ul>
<li>不必动态地运行代码，不必设计测试用例，不用判断测试结果；</li>
<li><strong>可以由人工进行，充分发挥人的逻辑思维优势，检查出错误的水平很高</strong>；</li>
<li>不需要特别条件，容易开展。</li>
</ul>
<p>具体步骤：</p>
<ul>
<li>代码审查</li>
<li>代码走查</li>
<li>桌面检查</li>
</ul>
<p>其他步骤（查看PPT）</p>
<p><a href="#R-image-fdd2d30e66e5760dca8b349da57e285e" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-1.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-fdd2d30e66e5760dca8b349da57e285e"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-1.png" alt="alt text" class="lightbox-image        " loading="lazy"></a></p>
<h2 id="动态测试">动态测试</h2>
<p>通过运行软件来检查软件的动态行为和运行结果是否正确的方法。</p>
<p>特点：</p>
<ul>
<li>运行被测程序，取得程序运行的真实情况和动态情况，在进行打分；</li>
<li><strong>必须生成测试数据来运行程序，测试质量依赖于测试数据</strong>；</li>
<li>生成测试数据、分析测试结果的工作量大，展开测试费时、费力；</li>
<li><strong>动态测试中涉及多方面的工作，人员多、设备多、数据多、要求有较好的管理和工程规划</strong>；</li>
</ul>
<p>（1） 功能确认与接口测试
（2） 覆盖率分析
（3） 性能分析
（4） 内存分析</p>
<h2 id="集成测试">集成测试</h2>
<p>集成测试也称为组装测试或综合测试，在单元测试的基础上，将模块按照设计要求组装成子系统或系统，进行集成测试。</p>
<p>制定集成测试计划——设计集成测试——实施集成测试——评估集成模块</p>
<p>集成测试完成标准：</p>
<ul>
<li>成功执行了测试计划中规定的所有集成测试；</li>
<li><strong>修整了发现的错误；</strong></li>
<li>测试结果通过了专门小组的评审。</li>
</ul>
<hr>
<p><strong>MQTT和HTTP的底层都是TCP/IP，也就是物联网装置可以沿用既有的网路架构和设备，只是在网路上流通的「讯息格式」以及应用程式的处理机制不同.</strong></p>
<hr>
<h2 id="mqtt协议概述">MQTT协议概述</h2>
<p><a href="#R-image-4a019bf77ca0e32cb795635c8c02c6cd" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-2.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4a019bf77ca0e32cb795635c8c02c6cd"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-2.png" alt="alt text" class="lightbox-image        " loading="lazy"></a>
MQTT不同于HTTP标头采用文字描述，而是采用数字编码，整个长度只占2位元组，等同两个字元，后面跟着讯息的主题（topic）和内容（payload），格式如下：</p>
<table>
   <tr>
        <td></td> 
        <td></td> 
        <td></td> 
        <td></td>
        <td></td> 
        <td></td> 
        <td></td> 
        <td></td>
   </tr>
    <tr>
        <td colspan="4">讯息类型</td> 
        <td colspan="1">DUP(是否为副本)</td> 
        <td colspan="2">QoP(传输品质)</td> 
        <td colspan="1">R(是否保留)</td>
   </tr>
   <tr>
        <td>0</td> 
        <td>0</td> 
        <td>1</td> 
        <td>1</td>
        <td>0</td> 
        <td>0</td> 
        <td>0</td> 
        <td>0</td>
   </tr>
    <tr>
      <td colspan="8">剩余资料长度</td>    
    </tr>
</table>
<p><a href="#R-image-dc93b11237f152b5df7363b72d7482d4" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-4.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-dc93b11237f152b5df7363b72d7482d4"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-4.png" alt="alt text" class="lightbox-image        " loading="lazy"></a></p>
<p><a href="#R-image-69d4090f5be33fd8bdf6fea00bab9463" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-5.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-69d4090f5be33fd8bdf6fea00bab9463"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-5.png" alt="alt text" class="lightbox-image        " loading="lazy"></a></p>
<h2 id="传输品质qos">传输品质QoS</h2>
<p>传输品质QoS表示发布者与代理人（订阅者）之间数据传输的品质。</p>
<table>
<thead>
<tr>
<th>传输品质 QoS</th>
<th>说明</th>
<th>阿里云IOT</th>
</tr>
</thead>
<tbody>
<tr>
<td>QoS=0</td>
<td>最多传输一次，可能收不到</td>
<td>支持</td>
</tr>
<tr>
<td>QoS=1</td>
<td>最少传输一次可能会重传</td>
<td>支持</td>
</tr>
<tr>
<td>QoS=2</td>
<td>有且仅有一次传输</td>
<td>不支持</td>
</tr>
</tbody>
</table>
<p>注：<strong>MosQuito全都支持</strong></p>
<h2 id="mqttlens订阅以及发布消息">MQTTLens订阅以及发布消息</h2>
<p>订阅者可以透过下列三个叙述订阅多个主题：
<a href="#R-image-10cde2bf74c004447ae6aaa3c12934c1" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-5.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-10cde2bf74c004447ae6aaa3c12934c1"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-5.png" alt="alt text" class="lightbox-image        " loading="lazy"></a>
结合上面这张图来理解</p>
<p>1.假设订阅者要订阅温度，温度可以来自主题A（yard），主题B(soil)，主题C（Tool）。</p>
<p>订阅某个属性的信息</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>   home<span style="color:#f92672">/+/</span>DHT11
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">+</span><span style="color:#960050;background-color:#1e0010">号内容可以是</span>yard<span style="color:#960050;background-color:#1e0010">，</span>soil可以写为
</span></span><span style="display:flex;"><span>   home<span style="color:#f92672">/</span>yard<span style="color:#f92672">/</span>DHT11
</span></span><span style="display:flex;"><span>   home<span style="color:#f92672">/</span>soil<span style="color:#f92672">/</span>DHT11
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#960050;background-color:#1e0010">但不可以写为：</span>
</span></span><span style="display:flex;"><span>   home<span style="color:#f92672">/</span>yard<span style="color:#f92672">/</span>pond<span style="color:#f92672">/</span>DHT11
</span></span><span style="display:flex;"><span>   home<span style="color:#f92672">/</span>soil<span style="color:#f92672">/</span>DHT11<span style="color:#f92672">/</span>Temp</span></span></code></pre></div><p>订阅三个主题</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>   home<span style="color:#f92672">/+/+</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#960050;background-color:#1e0010">包含三个主题，具体如下</span>
</span></span><span style="display:flex;"><span>   home<span style="color:#f92672">/</span>yard<span style="color:#f92672">/</span>DHT11
</span></span><span style="display:flex;"><span>   home<span style="color:#f92672">/</span>soil<span style="color:#f92672">/</span>DHT11
</span></span><span style="display:flex;"><span>   home<span style="color:#f92672">/</span>Tool<span style="color:#f92672">/</span>RID</span></span></code></pre></div><p>订阅某个主题的所有属性</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>   home<span style="color:#f92672">/</span>yard<span style="color:#f92672">/</span><span style="color:#960050;background-color:#1e0010">#</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#960050;background-color:#1e0010">包含三个主题，具体如下</span>
</span></span><span style="display:flex;"><span>   home<span style="color:#f92672">/</span>yard<span style="color:#f92672">/</span>DHT11
</span></span><span style="display:flex;"><span>   home<span style="color:#f92672">/</span>yard<span style="color:#f92672">/</span>pond<span style="color:#f92672">/</span>DHT11
</span></span><span style="display:flex;"><span>   home<span style="color:#f92672">/</span>yard<span style="color:#f92672">/</span>DHT11<span style="color:#f92672">/</span>temp
</span></span><span style="display:flex;"><span>   home<span style="color:#f92672">/</span>yard<span style="color:#f92672">/</span>DHT11<span style="color:#f92672">/</span>humi</span></span></code></pre></div><p>在上面的代码中所写的#号表示订阅所有的主题，在使用时注意下面的写法是无效的：</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>home<span style="color:#f92672">/</span><span style="color:#960050;background-color:#1e0010">#</span><span style="color:#f92672">/</span>DHT11 <span style="color:#75715e">//无效
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>home<span style="color:#f92672">/</span>yard<span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#75715e">//无效
</span></span></span></code></pre></div><h2 id="综合实验局域网内手机通信">综合实验——局域网内手机通信</h2>
<p>创建AP接入点、TCP服务器，通过手机连接ESP8266模块控制STM32开发板上的LED和蜂鸣器；</p>
<h3 id="实现的功能">实现的功能</h3>
<p>(1)STM32控制ESP8266模块创建AP接入点。</p>
<p>(2)STM32控制ESP8266创建TCP服务器。</p>
<p>(3)通过手机的软件连接ESP8266模块的TCP服务器。</p>
<p>(4)手机上可以通过WIFI模块控制STM32开发板的LED1、LED2、LED3和蜂鸣器。</p>
<p>(5)手机上可以看到STM32上传的温度和湿度。</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">//ESP8266初始化
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//Esp8266Mode:WIFI模块的工作模式，STA和AP
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//ssid:要生成或者接入的SSID名字，如果已经一键配网，要写NULL
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//password:对应SSID的密码，如果已经一键配网，要写NULL
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//ip:如果要设置静态IP，要写对应的IP，否则写NULL。
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>u8 <span style="color:#a6e22e">ESP8266_init</span>(u8 Esp8266Mode, <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>ssid,<span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>password, <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>ip)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    u8 i<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">memset</span>(esp8266.sta_ip,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">20</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">memset</span>(esp8266.ap_ip,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">20</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(Esp8266Mode<span style="color:#f92672">==</span>ESP8266_MODE_STA)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        esp8266.mode<span style="color:#f92672">=</span>ESP8266_MODE_STA;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//STA模式有可能通过了一键配网模式得到了SSID和PSW
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span>(ssid<span style="color:#f92672">!=</span>NULL) <span style="color:#a6e22e">sprintf</span>(esp8266.sta_ssid, <span style="color:#e6db74">&#34;%s&#34;</span>, ssid);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(password<span style="color:#f92672">!=</span>NULL) <span style="color:#a6e22e">sprintf</span>(esp8266.sta_password, <span style="color:#e6db74">&#34;%s&#34;</span>, password);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(ip<span style="color:#f92672">!=</span>NULL) <span style="color:#a6e22e">sprintf</span>(esp8266.sta_ip, <span style="color:#e6db74">&#34;%s&#34;</span>, ip);<span style="color:#75715e">//设置STA模式静态IP
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ESP8266_Printf</span>(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\r\n</span><span style="color:#e6db74">STA ssid:%s, psw:%s</span><span style="color:#ae81ff">\r\n</span><span style="color:#e6db74">&#34;</span>, esp8266.sta_ssid, esp8266.sta_password);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        esp8266.ap_chl<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>;<span style="color:#75715e">//通道号
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        esp8266.ap_ecn<span style="color:#f92672">=</span>ESP8266_ECN_WPA_PSK;<span style="color:#75715e">//加密方式
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>        esp8266.mode<span style="color:#f92672">=</span>ESP8266_MODE_AP;
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">sprintf</span>(esp8266.ap_ssid, <span style="color:#e6db74">&#34;%s&#34;</span>, ssid);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">sprintf</span>(esp8266.ap_password, <span style="color:#e6db74">&#34;%s&#34;</span>, password);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(ip<span style="color:#f92672">!=</span>NULL) <span style="color:#a6e22e">sprintf</span>(esp8266.ap_ip, <span style="color:#e6db74">&#34;%s&#34;</span>, ip);<span style="color:#75715e">//设置AP模式静态IP
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ESP8266_Printf</span>(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\r\n</span><span style="color:#e6db74">AP ssid:%s, psw:%s</span><span style="color:#ae81ff">\r\n</span><span style="color:#e6db74">&#34;</span>, esp8266.ap_ssid, esp8266.ap_password);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    esp8266.smartconfig<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ESP8266_reset</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ESP8266_SendAT</span>(<span style="color:#e6db74">&#34;ATE0</span><span style="color:#ae81ff">\r\n</span><span style="color:#e6db74">&#34;</span>,<span style="color:#ae81ff">1</span>);<span style="color:#75715e">//关回显
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//AP模式
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span>(esp8266.mode<span style="color:#f92672">==</span>ESP8266_MODE_AP<span style="color:#f92672">||</span>esp8266.mode<span style="color:#f92672">==</span>ESP8266_MODE_AP_STA)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">ESP8266_SetWiFiWorkMode</span>(esp8266.mode);
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">ESP8266_SoftAp</span>(esp8266.ap_ssid, esp8266.ap_password, esp8266.ap_chl, esp8266.ap_ecn);
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">ESP8266_SoftAp_staticIp</span>(esp8266.ap_ip);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//STA模式
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span>(esp8266.mode<span style="color:#f92672">==</span>ESP8266_MODE_STA<span style="color:#f92672">||</span>esp8266.mode<span style="color:#f92672">==</span>ESP8266_MODE_AP_STA)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">ESP8266_SetWiFiWorkMode</span>(esp8266.mode);
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">ESP8266_ConnectAp</span>(esp8266.sta_ssid, esp8266.sta_password, NULL);
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">ESP8266_Station_staticIp</span>(esp8266.sta_ip);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//启动DHCP
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ESP8266_SetDhcp</span>(esp8266.mode, <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ESP8266_SendAT</span>(<span style="color:#e6db74">&#34;AT+CWLAPOPT=1,2047</span><span style="color:#ae81ff">\r\n</span><span style="color:#e6db74">&#34;</span>,<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//设置WIFI工作的传输模式
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//transportProtocol：UDP，TCPservice,tcp_client
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//localPort:本地端口号
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//remoteIp：远端的IP，如果是TCPservice模式，请写NULL或者&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//remotePort：远端端口号的PORT
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>u8 <span style="color:#a6e22e">ESP8266_SetWorkMode</span>(u8 transportProtocol, u16 localPort, <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>remoteIp, u16 remotePort)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    u8 i<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    esp8266.localPort<span style="color:#f92672">=</span>localPort;
</span></span><span style="display:flex;"><span>    esp8266.isConnect<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;<span style="color:#75715e">//连接是否创建　　1：已经创建
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//ID为无效的ID
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    esp8266.clientId[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">=-</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    esp8266.clientId[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">=-</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    esp8266.clientId[<span style="color:#ae81ff">2</span>]<span style="color:#f92672">=-</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    esp8266.clientId[<span style="color:#ae81ff">3</span>]<span style="color:#f92672">=-</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">memset</span>(esp8266.sta_mac,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">30</span>);
</span></span><span style="display:flex;"><span>    esp8266.curLen<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    esp8266.data_len<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;<span style="color:#75715e">//
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">memset</span>(esp8266.remoteIp,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">20</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(ESP8266_TCP_SERVICE<span style="color:#f92672">==</span>transportProtocol)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      esp8266.connectMode<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;<span style="color:#75715e">//1：TCP service  2:TCP client   3:UDP
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">if</span>(remoteIp<span style="color:#f92672">!=</span>NULL) <span style="color:#a6e22e">sprintf</span>(esp8266.remoteIp, <span style="color:#e6db74">&#34;%s&#34;</span>, remoteIp);
</span></span><span style="display:flex;"><span>      esp8266.remotePort<span style="color:#f92672">=</span>remotePort;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span>(ESP8266_TCP_CLIENT<span style="color:#f92672">==</span>transportProtocol)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      esp8266.connectMode<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>;<span style="color:#75715e">//1：TCP service  2:TCP client   3:UDP
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">if</span>(remoteIp<span style="color:#f92672">!=</span>NULL) <span style="color:#a6e22e">sprintf</span>(esp8266.remoteIp, <span style="color:#e6db74">&#34;%s&#34;</span>, remoteIp);
</span></span><span style="display:flex;"><span>      esp8266.remotePort<span style="color:#f92672">=</span>remotePort;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span>(ESP8266_UDP<span style="color:#f92672">==</span>transportProtocol)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      esp8266.connectMode<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>;<span style="color:#75715e">//1：TCP service  2:TCP client   3:UDP
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">if</span>(remoteIp<span style="color:#f92672">!=</span>NULL) <span style="color:#a6e22e">sprintf</span>(esp8266.remoteIp, <span style="color:#e6db74">&#34;%s&#34;</span>, remoteIp);
</span></span><span style="display:flex;"><span>      esp8266.remotePort<span style="color:#f92672">=</span>remotePort;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ESP8266_Printf</span>(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\r\n</span><span style="color:#e6db74">connectMode:%d, ip:%s, port:%d</span><span style="color:#ae81ff">\r\n</span><span style="color:#e6db74">&#34;</span>, esp8266.connectMode, esp8266.remoteIp,esp8266.remotePort);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>  <span style="color:#75715e">//收到数据
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  ptr <span style="color:#f92672">=</span> (<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#a6e22e">strstr</span>((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)cmd,(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#e6db74">&#34;+IPD,&#34;</span>); <span style="color:#75715e">//接收到+IPD开头，说明接收到数据
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">if</span>(ptr<span style="color:#f92672">!=</span>NULL)
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    u8 id<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//+IPD,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    ptr<span style="color:#f92672">+=</span><span style="color:#ae81ff">5</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(ptr<span style="color:#f92672">==</span>NULL) <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//如果是TCP服务器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//格式会多一个id
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span>(esp8266.connectMode<span style="color:#f92672">==</span><span style="color:#ae81ff">1</span>)<span style="color:#75715e">//如果是TCP服务器，找出&lt;link ID &gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">//TCP服务的处理
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      id<span style="color:#f92672">=</span><span style="color:#a6e22e">atoi</span>(ptr);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">while</span>(ptr<span style="color:#f92672">!=</span>NULL <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">*</span>ptr<span style="color:#f92672">!=</span><span style="color:#e6db74">&#39;,&#39;</span>) ptr<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>      ptr<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    esp8266.data_len<span style="color:#f92672">=</span><span style="color:#a6e22e">atoi</span>(ptr);<span style="color:#75715e">//读出接收到的数据长度
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">while</span>(ptr<span style="color:#f92672">!=</span>NULL <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">*</span>ptr<span style="color:#f92672">!=</span><span style="color:#e6db74">&#39;:&#39;</span>) ptr<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>    ptr<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">memset</span>(esp8266.data, <span style="color:#ae81ff">0</span>, MAX_WIFI_RX_LEN);
</span></span><span style="display:flex;"><span>    esp8266.curLen<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//读出收到的数据
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">while</span>(esp8266.curLen<span style="color:#f92672">&lt;</span>MAX_WIFI_RX_LEN <span style="color:#f92672">&amp;&amp;</span> esp8266.curLen<span style="color:#f92672">&lt;</span>esp8266.data_len <span style="color:#f92672">&amp;&amp;</span> ptr<span style="color:#f92672">!=</span>NULL <span style="color:#f92672">&amp;&amp;</span> ((ptr<span style="color:#f92672">-</span>cmd)<span style="color:#f92672">&lt;=</span>len))
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      esp8266.data[esp8266.curLen]<span style="color:#f92672">=*</span>ptr;<span style="color:#75715e">//数据存储
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      ptr<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>      esp8266.curLen<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//一次性把数据接收全
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span>(esp8266.curLen<span style="color:#f92672">&gt;=</span>esp8266.data_len)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>	   <span style="color:#75715e">//对接收到的数据进行处理
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#a6e22e">ESP8266_RxData</span>(esp8266.data, esp8266.curLen);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      esp8266.curLen<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>      esp8266.data_len<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    re<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>  }</span></span></code></pre></div><h2 id="实验三">实验三</h2>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>    <span style="color:#75715e">//以下是启动AP模式
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ESP8266_init</span>(ESP8266_MODE_AP, WIFI_SSID, WIFI_PASSWORD, WIFI_IP);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//配置协议模式：TCP服务器、TCP客户端或者UDP
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//配置要连接的IP和端口号
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//注意！！注意！！注意！！以下二个配置参数只能打开其中一个。
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//配置TCP服务器参数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//ESP8266_SetWorkMode(ESP8266_TCP_SERVICE, WIFI_PORT, NULL, 10000);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>     <span style="color:#75715e">//ESP8266_SetWorkMode(ESP8266_TCP_CLIENT, WIFI_PORT, ROMOTE_IP, ROMOTE_PORT);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//配置UDP的参数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//这里的IP&#34;192.168.1.90&#34;为UDP服务器所在的电脑IP，根据实际情况修改
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ESP8266_SetWorkMode</span>(ESP8266_UDP, WIFI_PORT, <span style="color:#e6db74">&#34;192.168.1.2&#34;</span>, <span style="color:#ae81ff">10000</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span>(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>((count<span style="color:#f92672">%</span><span style="color:#ae81ff">20</span>)<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>  					<span style="color:#a6e22e">ESP8266_run</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3秒采集温湿度一次
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span>((count<span style="color:#f92672">%</span><span style="color:#ae81ff">300</span>)<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>)<span style="color:#75715e">//300次累加
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">DHT11</span>(<span style="color:#f92672">&amp;</span>t, <span style="color:#f92672">&amp;</span>h);<span style="color:#75715e">//采集温湿度
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">sprintf</span>(buff, <span style="color:#e6db74">&#34;温度:%02d,湿度:%02d.</span><span style="color:#ae81ff">\r\n</span><span style="color:#e6db74">&#34;</span>, t,h);
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Gui_DrawFont_GBK16_line</span>(HAL_LCD_LINE_8,RED,WHITE,buff);<span style="color:#75715e">//发送温度值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">ESP8266_SendData</span>(buff, <span style="color:#a6e22e">strlen</span>(buff));
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">delay_ms</span>(<span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//闪灯表示程序活着
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span>((count<span style="color:#f92672">%</span><span style="color:#ae81ff">20</span>)<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>) LED1<span style="color:#f92672">=!</span>LED1;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        count<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><h2 id="实验十">实验十</h2>
<p><a href="#R-image-0295e942df7828fc51d26bd202dabc44" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-6.png" alt="1" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-0295e942df7828fc51d26bd202dabc44"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-6.png" alt="1" class="lightbox-image        " loading="lazy"></a>
<a href="#R-image-79d3275960ec2abe1eee2c9a8ba7a516" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-7.png" alt="2" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-79d3275960ec2abe1eee2c9a8ba7a516"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-7.png" alt="2" class="lightbox-image        " loading="lazy"></a>
<a href="#R-image-ab983ff55b2638331cde4a279896eb19" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-8.png" alt="3" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-ab983ff55b2638331cde4a279896eb19"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-8.png" alt="3" class="lightbox-image        " loading="lazy"></a>
<a href="#R-image-79a24d90d91b09e6771b63f432529b24" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-9.png" alt="4" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-79a24d90d91b09e6771b63f432529b24"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-9.png" alt="4" class="lightbox-image        " loading="lazy"></a>
<a href="#R-image-39dea019cb8eedb9d6801286a26d8349" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-10.png" alt="5" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-39dea019cb8eedb9d6801286a26d8349"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-10.png" alt="5" class="lightbox-image        " loading="lazy"></a>
<a href="#R-image-2b36bc7ded5fe5d69dcf0014eb928b1b" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-11.png" alt="6" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-2b36bc7ded5fe5d69dcf0014eb928b1b"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-11.png" alt="6" class="lightbox-image        " loading="lazy"></a>
<a href="#R-image-418f9408bcfbdeec03649a8ac90569c8" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-12.png" alt="7" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-418f9408bcfbdeec03649a8ac90569c8"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-12.png" alt="7" class="lightbox-image        " loading="lazy"></a>
<a href="#R-image-5d81855811e2e89c5dec2fd7b9fef31e" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-13.png" alt="8" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5d81855811e2e89c5dec2fd7b9fef31e"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/11.%E7%89%A9%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/image-13.png" alt="8" class="lightbox-image        " loading="lazy"></a></p>
<h2 id="关于stm32工程代码的几点说明">关于STM32工程代码的几点说明</h2>
<p>Define 是C语言中的宏定义，可以提高代码的可读性为编程提供方便。</p>
<p>STM32开发板的下载方式是串口；</p>
<p>函数定义的静态变量可以不赋初值，因为程序会分配存储空间；</p>
<h2 id="温度读取流程">温度读取流程</h2>
<ul>
<li>判断传感器相应是否正确；</li>
<li>安慰读取数值；</li>
<li>判断检验和是否正确；</li>
<li>提取温度值</li>
</ul>
<h2 id="在智慧大棚中采集温度值或者是光照值应该">在智慧大棚中采集温度值或者是光照值应该</h2>
<ul>
<li>在STM32开发板上搭建TCP服务器；</li>
<li>在不同区域放置若干WiFi模块，采集DHT11温湿度传感器；</li>
<li>WiFi模块和STM32模块连到同一个无线路由</li>
<li>WIFI模块通过TCP协议将传感器温湿度值传到服务器</li>
<li>传感器将接收到的数据存储在数据库中。</li>
</ul>
<h2 id="根据土壤情况进行自动灌溉">根据土壤情况进行自动灌溉</h2>
<ul>
<li>在STM32板子上搭建TCP服务器；</li>
<li>在大棚的不同区域放置若干WIFI模块，采集土壤湿度信息；</li>
<li>WiFi模块和STM32板子连接到同一个路由器；</li>
<li>WiFi模块通过TCP通信协议将土壤湿度信息传到服务器；</li>
<li>服务器更具当前的温湿度信息和阈值，启动和停止水泵。

<div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
  <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
  <ul class="box-content attachments-files">
  </ul>
</div></li>
</ul>

            <footer class="footline">
<div class=" taxonomy-categories term-list cstyle  " title="Categories" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../../categories/f1-%E5%A4%8D%E4%B9%A0/">F1-复习</a></li>
  </ul>
</div>
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="Tags" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../../tags/arkts/">ArkTS</a></li>
    <li><a class="term-link" href="../../tags/harmonyos/">HarmonyOS</a></li>
    <li><a class="term-link" href="../../tags/openharmony/">OpenHarmony</a></li>
    <li><a class="term-link" href="../../tags/%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96/">云端一体化</a></li>
  </ul>
</div>
            </header>
<h1 id="10云端一体化的环境变量问题">10.云端一体化的环境变量问题</h1>

<p>参数<strong>context</strong> 与环境变量有关，不管是系统还是用户自定义的都用这个来获取，获取方式：context.env</p>
<ul>
<li>先部署云函数到远端，然后在去远端添加环境变量，然后在本地运行虚拟机查看。</li>
</ul>
<p>负载均衡的四种方式</p>
<ul>
<li>随机</li>
<li>轮询</li>
<li>最少连接数</li>
<li>最短响应时间</li>
</ul>
<p>延迟时长的重试策略</p>
<ul>
<li>zero:一旦云函数调用失败，则调用，中间不等待</li>
<li>constant：调用失败等一段时间</li>
<li>jittered:调用失败等一段时间，再次调用，如果失败等待时间以指数增长</li>
</ul>
<p>熔断</p>
<p>设置一定的条件，满足条件后会执行熔断。熔断后云函数不在提供服务。</p>
<p><a href="#R-image-75400f346a20fffa7599419492a38105" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/10.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E7%9A%84%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%97%AE%E9%A2%98/./log.JPG" alt="e" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-75400f346a20fffa7599419492a38105"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/10.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E7%9A%84%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%97%AE%E9%A2%98/./log.JPG" alt="e" class="lightbox-image        " loading="lazy"></a></p>

<div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
  <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
  <ul class="box-content attachments-files">
  </ul>
</div>

            <footer class="footline">
<div class=" taxonomy-categories term-list cstyle  " title="Categories" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../../categories/%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/">应用开发</a></li>
  </ul>
</div>
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="Tags" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../../tags/arkts/">ArkTS</a></li>
    <li><a class="term-link" href="../../tags/harmonyos/">HarmonyOS</a></li>
    <li><a class="term-link" href="../../tags/openharmony/">OpenHarmony</a></li>
    <li><a class="term-link" href="../../tags/%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96/">云端一体化</a></li>
  </ul>
</div>
            </header>
<h1 id="9云端一体化如何查看云函数日志">9.云端一体化如何查看云函数日志？</h1>

<p>调用云函数的时候我们总有输入输出结果不符合自己预期的时候，这个时候查看日志很重要！！在云端一体化开发过程中，我们可以通过下面的方式解决这一问题：</p>
<p>首先参数event的输出以JSON格式输出，这样方便阅读，下面有一段代码，</p>
<p>云函数代码如下：</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">stringify</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;querystring&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">myHandler</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">event</span>, <span style="color:#a6e22e">context</span>, <span style="color:#a6e22e">callback</span>, <span style="color:#a6e22e">logger</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">info</span>(<span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">event</span>));
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">name</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">callback</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">code</span>: <span style="color:#66d9ef">200</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`Hello </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74">.`</span>
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> { <span style="color:#a6e22e">myHandler</span> };</span></span></code></pre></div><p>获取信息的ets文件如下：</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">cloud</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@hw-agconnect/cloud&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Entry</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Component</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">struct</span> <span style="color:#a6e22e">MyIndex</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">message</span>: <span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">name</span>:<span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">build() {</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Row() {</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">Column() {</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">TextInput</span>({<span style="color:#a6e22e">placeholder</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;请输入姓名&#39;</span>})
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">onChange</span>(<span style="color:#a6e22e">value</span> <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">value</span>
</span></span><span style="display:flex;"><span>          })
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Button</span>(<span style="color:#e6db74">&#39;使用云端一体化&#39;</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">fontSize</span>(<span style="color:#ae81ff">20</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">onClick</span>(<span style="color:#66d9ef">async</span> ()<span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">cloud</span>.<span style="color:#a6e22e">callFunction</span>({
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;login&#39;</span>,<span style="color:#75715e">//云函数的名字
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>              <span style="color:#a6e22e">version</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;$latest&#39;</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">params</span><span style="color:#f92672">:</span>{<span style="color:#a6e22e">name</span>:<span style="color:#66d9ef">this.name</span>}
</span></span><span style="display:flex;"><span>            })
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">message</span><span style="color:#f92672">=</span><span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">getValue</span>().<span style="color:#a6e22e">message</span>
</span></span><span style="display:flex;"><span>          })
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Text</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">message</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">fontSize</span>(<span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">fontWeight</span>(<span style="color:#a6e22e">FontWeight</span>.<span style="color:#a6e22e">Bold</span>)
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">height</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>function函数的说明：</strong></p>
<ul>
<li>触发条件：
<ul>
<li>HTTP请求，</li>
<li>云数据库插入，</li>
<li>云存储</li>
</ul>
</li>
<li>参数含义：
<ul>
<li>输入信息（），</li>
<li>执行时上下文信息（环境变量），</li>
<li>输出（返回结果给调用者），</li>
<li>记录日志（）</li>
</ul>
</li>
</ul>
<p>此处做了这样的处理使得日志输出以JSON格式输出：</p>
<hr>
<pre><code>logger.info(JSON.stringify(event))
</code></pre>
<hr>
<p>当遇到问题时，去官方的开发论坛搜索相关内容，
此处我想实现输入一个名字，然后让云端函数以不同的方式输出，比如：</p>
<hr>
<p>你好，张三</p>
<p>你好，李四</p>
<hr>
<p>但是现在输出的是：<strong>你好，%&amp;*%%</strong></p>
<p>解决办法：</p>
<p><a href="https://developer.huawei.com/consumer/cn/doc/AppGallery-connect-Guides/agc-cloudfunction-appx-event-0000001620581529" target="_blank">查看event参数说明</a></p>
<p><a href="#R-image-a8392123a23a4a2141d71a8b784621e9" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/9.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image.png" alt="jietu1" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a8392123a23a4a2141d71a8b784621e9"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/9.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image.png" alt="jietu1" class="lightbox-image        " loading="lazy"></a></p>
<p>再去CAG官网选择云监控&mdash;&gt;日志服务</p>
<p><a href="#R-image-b89d21d4ab41ba3c08cb406c57a3b403" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/9.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image-1.png" alt="截图2" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-b89d21d4ab41ba3c08cb406c57a3b403"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/9.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image-1.png" alt="截图2" class="lightbox-image        " loading="lazy"></a></p>
<p>然后复制右边的内容,放到一个json文件夹，用编译器（比如VScode）打开，并调整格式(如果用的是VScode，请使用<strong>shift+alt+F</strong>调整json格式)如下：</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-jsonyouweishengke" data-lang="jsonyouweishengke">{
    &#34;path&#34;: &#34;login-$latest&#34;,
    &#34;httpMethod&#34;: &#34;POST&#34;,

    &#34;headers&#34;: 
    {
        &#34;user-agent&#34;: &#34;libcurl-agent/1.0&#34;,
        &#34;x-forwarded-for&#34;: &#34;115.46.239.151, 10.135.135.154, 10.134.64.11&#34;,
        &#34;x-forwarded-port&#34;: &#34;443&#34;,
        &#34;accept&#34;: &#34;*/*&#34;,
        &#34;accept-encoding&#34;: &#34;gzip&#34;,
        &#34;agcgw-trigger-authtype&#34;: &#34;apigw-client&#34;,
        &#34;host&#34;: &#34;10.14.4.31&#34;,
        &#34;content-type&#34;: &#34;application/json;charset=UTF-8&#34;,
        &#34;packagename&#34;: &#34;com.itwcx.test&#34;,
        &#34;appid&#34;: &#34;5765880207853994135&#34;,
        &#34;authorization&#34;: &#34;SDK-HMAC-SHA256 containPath=false,containBody=false,containQuery=false,accessId=m7rTGQ2uNvyq1AGfJFLo,timestamp=1711175951586,signedHeaders=appid;productid,signature=44fe3b4da7d80ec9dfee07ca3747c448e94254b5454fef87f468150089f38623&#34;,
        &#34;x-forwarded-host&#34;: &#34;10.14.4.31&#34;,
        &#34;appversion&#34;: &#34;1.0.0&#34;,
        &#34;sdkplatformversion&#34;: &#34;3.2.0.0&#34;,
        &#34;sdktype&#34;: &#34;TS&#34;,
        &#34;content-length&#34;: &#34;19&#34;,
        &#34;x-real-ip&#34;: &#34;10.134.64.11&#34;,
        &#34;sdkversion&#34;: &#34;1.0.0&#34;,
        &#34;x-forwarded-proto&#34;: &#34;https&#34;,
        &#34;sdkservicename&#34;: &#34;agconnect-cloud&#34;,
        &#34;x-trace-id&#34;: &#34;f09f1070-6d7b-46a9-875d-bfb2bc4bfdb9&#34;,
        &#34;productid&#34;: &#34;388421841222044287&#34;,
        &#34;sdkplatform&#34;: &#34;OpenHarmony&#34;
    },

    &#34;queryStringParameters&#34;: &#34;&#34;,
    &#34;queryParameters&#34;: null,
    &#34;body&#34;: &#34;{\&#34;name\&#34;:\&#34;zhangsan\&#34;}&#34;,
    &#34;isBase64Encoded&#34;: false,
    &#34;pathVariable&#34;: null
}</code></pre></div><p>此处我们只查看参数event的HTTP请求的相关说明：</p>
<p>比较官网的event参数格式与自己日志打印的格式，看看有什么不同</p>
<p><a href="#R-image-fc33623016a05ef72e1d277e219beafd" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/9.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image-2.png" alt="截图3" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-fc33623016a05ef72e1d277e219beafd"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/9.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image-2.png" alt="截图3" class="lightbox-image        " loading="lazy"></a></p>
<p><a href="#R-image-4de907d5c725ae1f2f7affd95887951e" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/9.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image-3.png" alt="截图4" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4de907d5c725ae1f2f7affd95887951e"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/9.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image-3.png" alt="截图4" class="lightbox-image        " loading="lazy"></a></p>
<p>观察可知问题出在body这个参数，参数是json格式，而日志打印的是字符格式，我们需要把字符格式转换成json格式，做如下操作：</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-TS" data-lang="TS"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">stringify</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;querystring&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">myHandler</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">event</span>, <span style="color:#a6e22e">context</span>, <span style="color:#a6e22e">callback</span>, <span style="color:#a6e22e">logger</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">info</span>(<span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">event</span>));
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">obj</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">body</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">obj</span>.<span style="color:#a6e22e">name</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">callback</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">code</span>: <span style="color:#66d9ef">200</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`Hello </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74">.`</span>
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> { <span style="color:#a6e22e">myHandler</span> };</span></span></code></pre></div><p>上面的代码中</p>
<hr>
<pre><code>const obj = JSON.parse(event.body)
const name = obj.name
</code></pre>
<hr>
<p>就是转换操作。</p>
<h2 id="认证服务">认证服务</h2>
<h3 id="登录页面的实现">登录页面的实现</h3>
<p><a href="#R-image-cd1316cd900396e7031361a35e453ff3" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/9.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image-4.png" alt="截图7" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-cd1316cd900396e7031361a35e453ff3"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/9.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image-4.png" alt="截图7" class="lightbox-image        " loading="lazy"></a></p>
<p>登录验证代码：</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">AuthMode</span>,<span style="color:#a6e22e">Login</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@hw-agconnect/auth-component&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">AuthUser</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@hw-agconnect/cloud&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">router</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@ohos.router&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Entry</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Component</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">struct</span> <span style="color:#a6e22e">MyLogin</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">message</span>: <span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Hello World&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">build() {</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Row() {</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">Column() {</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Login</span>({
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">modes</span><span style="color:#f92672">:</span>[<span style="color:#a6e22e">AuthMode</span>.<span style="color:#a6e22e">PHONE_VERIFY_CODE</span>],
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">onSuccess</span><span style="color:#f92672">:</span>(<span style="color:#a6e22e">usr</span>:<span style="color:#66d9ef">AuthUser</span>) <span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">router</span>.<span style="color:#a6e22e">pushUrl</span>({<span style="color:#a6e22e">url</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;page/MyWelcome&#39;</span>})
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        }){
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">Button</span>(<span style="color:#e6db74">&#39;登录&#39;</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">height</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><a href="#R-image-c473723f76bd2e3cd10289830a6ba1c8" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/9.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image-5.png" alt="12" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c473723f76bd2e3cd10289830a6ba1c8"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/9.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image-5.png" alt="12" class="lightbox-image        " loading="lazy"></a></p>
<h2 id="页面登录获取验证码">页面登录获取验证码</h2>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">Auth</span>, <span style="color:#a6e22e">VerifyCodeAction</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@hw-agconnect/cloud&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">cloud</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@hw-agconnect/cloud&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">hilog</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@ohos.hilog&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">router</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@ohos.router&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Entry</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Component</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">struct</span> <span style="color:#a6e22e">MyLogin</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">countDown</span>: <span style="color:#66d9ef">number</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//用一个变量来获取setinterval的ID
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">intervalId</span>:<span style="color:#66d9ef">number</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> <span style="color:#75715e">//因为这个变量与页面显示无关所以不用@State注释
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">verifyCodeButtonEnable</span>:<span style="color:#66d9ef">boolean</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">verifyCodeButtonText</span>:<span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;获取验证码&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">phoneNumber</span>: <span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">verifyCode</span>:<span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;输入验证码&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">//定时器代码
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">waiting</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonEnable</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonText</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">countDown</span><span style="color:#e6db74">}</span><span style="color:#e6db74">s`</span><span style="color:#75715e">//在一点击时，就显示10S
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">intervalId</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">setInterval</span>(() <span style="color:#f92672">=&gt;</span> { <span style="color:#75715e">//要知道定时器结束没有需要知道它的返回结果，这个结果可以通过setinterval的ID获取。
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonText</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">countDown</span><span style="color:#e6db74">}</span><span style="color:#e6db74">s`</span><span style="color:#75715e">//将倒计时显示出来
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">if</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">countDown</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//如果减到0，清楚定时器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">clearInterval</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">intervalId</span>)<span style="color:#75715e">//得到返回结果后清楚定时器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">countDown</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">intervalId</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonText</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;获取验证码&#39;</span><span style="color:#75715e">//倒计时结束时回复
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonEnable</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span> <span style="color:#75715e">//当点击时按键不可用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> <span style="color:#75715e">//不需要再往下继续执行了，所以return
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">countDown</span><span style="color:#f92672">--</span>
</span></span><span style="display:flex;"><span>    },<span style="color:#ae81ff">1000</span>)<span style="color:#75715e">//每隔1秒减一次
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  }
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">judgement</span>(){
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">if</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">phoneNumber</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">11</span>){
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonEnable</span><span style="color:#f92672">=</span><span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>     }<span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonEnable</span><span style="color:#f92672">=</span><span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">async</span> <span style="color:#a6e22e">sending_verifyCode</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> { <span style="color:#75715e">//调用方式异步调用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">cloud</span>.<span style="color:#a6e22e">auth</span>().<span style="color:#a6e22e">requestVerifyCode</span>({
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">verifyCodeType</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">kind</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;phone&#39;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">phoneNumber</span>: <span style="color:#66d9ef">this.phoneNumber</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">countryCode</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;86&#39;</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">action</span>: <span style="color:#66d9ef">VerifyCodeAction.REGISTER_LOGIN</span>, <span style="color:#75715e">//验证的方式
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">lang</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;zh_CN&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">sendInterval</span>: <span style="color:#66d9ef">10</span>
</span></span><span style="display:flex;"><span>      })
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;VerifCode&#39;</span>,<span style="color:#e6db74">&#39;Success&#39;</span>)
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">AlertDialog</span>.<span style="color:#a6e22e">show</span>({ <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;错误&#39;</span>, <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;验证码失败&#39;</span> })<span style="color:#75715e">//弹窗内容
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;VerifCode&#39;</span>,<span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">e</span>))
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">async</span> <span style="color:#a6e22e">login_verify</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">result</span>  <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">cloud</span>.<span style="color:#a6e22e">auth</span>().<span style="color:#a6e22e">signIn</span>({ <span style="color:#75715e">//定义一个变量来接收它的返回结果,返回的是result，在通过result.gitUsr获取用户信息
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">credentialInfo</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">kind</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;phone&#39;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">countryCode</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;86&#39;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">phoneNumber</span>: <span style="color:#66d9ef">this.phoneNumber</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">verifyCode</span>: <span style="color:#66d9ef">this.verifyCode</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      })
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">user</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">getUser</span>()
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">AppStorage</span>.<span style="color:#a6e22e">SetOrCreate</span>(<span style="color:#e6db74">&#39;user&#39;</span>,<span style="color:#a6e22e">user</span>)<span style="color:#75715e">//存储用户到 AppStorage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;Login&#39;</span>,<span style="color:#e6db74">&#39;Success&#39;</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">router</span>.<span style="color:#a6e22e">replaceUrl</span>({ <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;pages/MyLoginLignOut&#39;</span> })
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">AlertDialog</span>.<span style="color:#a6e22e">show</span>({<span style="color:#a6e22e">title</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;错误&#39;</span>,<span style="color:#a6e22e">message</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;登陆失败&#39;</span>})
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;Login&#39;</span>,<span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">e</span>))
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">build() {</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Row() {</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">Column() {</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">TextInput</span>({<span style="color:#a6e22e">placeholder</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;请输入手机号&#39;</span>})
</span></span><span style="display:flex;"><span>          .<span style="color:#66d9ef">type</span>(<span style="color:#a6e22e">InputType</span>.Number)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">onChange</span>(<span style="color:#a6e22e">values</span> <span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">phoneNumber</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">values</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">judgement</span>()<span style="color:#75715e">//点击获取验证码时，判断按键是否可用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        })
</span></span><span style="display:flex;"><span>       <span style="color:#a6e22e">Row</span>(){
</span></span><span style="display:flex;"><span>         <span style="color:#a6e22e">TextInput</span>({<span style="color:#a6e22e">placeholder</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;验证码&#39;</span>})
</span></span><span style="display:flex;"><span>           .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;70%&#39;</span>)
</span></span><span style="display:flex;"><span>           .<span style="color:#a6e22e">onChange</span>(<span style="color:#a6e22e">value</span> <span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>             <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCode</span><span style="color:#f92672">=</span><span style="color:#a6e22e">value</span>
</span></span><span style="display:flex;"><span>           })
</span></span><span style="display:flex;"><span>         <span style="color:#a6e22e">Button</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonText</span>)
</span></span><span style="display:flex;"><span>           .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;30%&#39;</span>)
</span></span><span style="display:flex;"><span>           .<span style="color:#a6e22e">enabled</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonEnable</span>)<span style="color:#75715e">//该属性是控制按键是否可用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>           .<span style="color:#a6e22e">onClick</span>(<span style="color:#66d9ef">async</span> () <span style="color:#f92672">=&gt;</span>{ <span style="color:#75715e">//所在方法加async
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>             <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">waiting</span>()
</span></span><span style="display:flex;"><span>             <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">sending_verifyCode</span>()
</span></span><span style="display:flex;"><span>           })
</span></span><span style="display:flex;"><span>       }
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Button</span>(<span style="color:#e6db74">&#39;登录&#39;</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">enabled</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">phoneNumber</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">11</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCode</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">6</span>)<span style="color:#75715e">//手机号11位，且验证码六位时点击登录才有效
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>          .<span style="color:#a6e22e">onClick</span>(<span style="color:#66d9ef">async</span> ()<span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">login_verify</span>()
</span></span><span style="display:flex;"><span>          })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">height</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>登录后跳转到的页面：</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">cloud</span> ,{<span style="color:#a6e22e">AuthUser</span>}<span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;@hw-agconnect/cloud&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">hilog</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@ohos.hilog&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">router</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@ohos.router&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Entry</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Component</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">struct</span> <span style="color:#a6e22e">MyLoginLignOut</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">photoUrl</span>:<span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span> <span style="color:#75715e">//存储头像路径
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">displayName</span>:<span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span> <span style="color:#75715e">//存储用户昵称
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">@StorageLink</span>(<span style="color:#e6db74">&#39;user&#39;</span>) <span style="color:#a6e22e">user</span>:<span style="color:#66d9ef">AuthUser</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span> <span style="color:#75715e">//定义一个AuthUser的类型来获取用户存的值，(&#39;user&#39;)叫存储对象名，是在另一个页面定义的名字
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">aboutToAppear</span>(){<span style="color:#75715e">//build渲染前就运行
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//1.cloud.auth().getCurrentUser()
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//2.appStorage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">displayName</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">getDisplayName</span>()<span style="color:#75715e">//获取用户，间接通过用户拿到用户头像等数据。
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">photoUrl</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">getPhotoUrl</span>()
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">build() {</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Row() {</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">Column() {</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Row</span>(){
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">Image</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">photoUrl?this.photoUrl</span>:<span style="color:#66d9ef">$r</span>(<span style="color:#e6db74">&#39;app.media.app_icon&#39;</span>))
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">width</span>(<span style="color:#ae81ff">80</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">height</span>(<span style="color:#ae81ff">80</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">onClick</span>(()<span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">photoUrl</span><span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;https://img.btstu.cn/api/images/5a2a5d5560223.jpg&#39;</span>
</span></span><span style="display:flex;"><span>            })
</span></span><span style="display:flex;"><span>        }.<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">justifyContent</span>(<span style="color:#a6e22e">FlexAlign</span>.<span style="color:#a6e22e">Center</span>)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">padding</span>({<span style="color:#a6e22e">bottom</span>:<span style="color:#66d9ef">70</span>})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">TextInput</span>({<span style="color:#a6e22e">placeholder</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;设置昵称&#39;</span>,<span style="color:#a6e22e">text</span>:<span style="color:#66d9ef">this.displayName</span>})
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">fontSize</span>(<span style="color:#ae81ff">25</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">fontWeight</span>(<span style="color:#a6e22e">FontWeight</span>.<span style="color:#a6e22e">Bold</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">onChange</span>(<span style="color:#a6e22e">value</span> <span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">displayName</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">value</span>
</span></span><span style="display:flex;"><span>          })
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Button</span>(<span style="color:#e6db74">&#39;保存&#39;</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">margin</span>({<span style="color:#a6e22e">top</span>:<span style="color:#66d9ef">10</span>,<span style="color:#a6e22e">bottom</span>:<span style="color:#66d9ef">10</span>})
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">width</span>(<span style="color:#ae81ff">90</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">onClick</span>(<span style="color:#66d9ef">async</span> ()<span style="color:#f92672">=&gt;</span>{<span style="color:#75715e">//保存图片与用户名
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">await</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">updateProfile</span>({<span style="color:#75715e">//保存头像、用户名
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">displayName</span>: <span style="color:#66d9ef">this.displayName</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">photoUrl</span>: <span style="color:#66d9ef">this.photoUrl</span>
</span></span><span style="display:flex;"><span>              })
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;updateProfile&#39;</span>,<span style="color:#e6db74">&#39;Success&#39;</span>)
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;updateProfile&#39;</span>,<span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">e</span>))
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>          })
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Button</span>(<span style="color:#e6db74">&#39;登出&#39;</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">margin</span>({<span style="color:#a6e22e">top</span>:<span style="color:#66d9ef">10</span>,<span style="color:#a6e22e">bottom</span>:<span style="color:#66d9ef">10</span>})
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">width</span>(<span style="color:#ae81ff">90</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">onClick</span>(<span style="color:#66d9ef">async</span> ()<span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">cloud</span>.<span style="color:#a6e22e">auth</span>().<span style="color:#a6e22e">signOut</span>()
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;SignOut&#39;</span>,<span style="color:#e6db74">&#39;Success&#39;</span>)
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">router</span>.<span style="color:#a6e22e">replaceUrl</span>({<span style="color:#a6e22e">url</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;pages/MyLogin&#39;</span>})
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;SignOut&#39;</span>,<span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">e</span>))
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>          })
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">height</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h3 id="个人设置中心">个人设置中心</h3>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">cloud</span>, { <span style="color:#a6e22e">AuthUser</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@hw-agconnect/cloud&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">router</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@ohos.router&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">hilog</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@ohos.hilog&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">picker</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@ohos.file.picker&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Entry</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Component</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">struct</span> <span style="color:#a6e22e">MyIndex</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">photoUrl</span>: <span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span> <span style="color:#75715e">//存储头像路径
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">displayName</span>: <span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span> <span style="color:#75715e">//存储用户昵称
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">@StorageLink</span>(<span style="color:#e6db74">&#39;user&#39;</span>) <span style="color:#a6e22e">user</span>: <span style="color:#66d9ef">AuthUser</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span> <span style="color:#75715e">//定义一个AuthUser的类型来获取用户存的值，(&#39;user&#39;)叫存储对象名，是在另一个页面定义的名字
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">uploading</span>: <span style="color:#66d9ef">boolean</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span><span style="color:#75715e">//用户控制图片是否可以点击，上传时不可以点击
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">uploadingText</span>: <span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;0%&#39;</span><span style="color:#75715e">//上传进度
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">aboutToAppear() {</span>  <span style="color:#75715e">//build渲染前就运行
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// 1. cloud.auth().getCurrentUser()
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// 2. AppStorage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">displayName</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">user</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">getDisplayName</span>()<span style="color:#75715e">//获取用户，间接通过用户拿到用户头像等数据。加问号是因为在aboutToAppear运行时是无法获取用户名或图片等信息的
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">photoUrl</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">user</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">getPhotoUrl</span>()
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">build() {</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Row() {</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">Column</span>({ <span style="color:#a6e22e">space</span>: <span style="color:#66d9ef">10</span> }) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Stack() {</span><span style="color:#75715e">//Stack该属性让它所包含的组件重叠
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>          <span style="color:#a6e22e">Image</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">photoUrl</span> <span style="color:#f92672">?</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">photoUrl</span> : <span style="color:#66d9ef">$r</span>(<span style="color:#e6db74">&#39;app.media.user_dark&#39;</span>))
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">width</span>(<span style="color:#ae81ff">70</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">height</span>(<span style="color:#ae81ff">70</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">borderRadius</span>(<span style="color:#ae81ff">70</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">enabled</span>(<span style="color:#f92672">!</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">uploading</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">onComplete</span>(()<span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">uploading</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>            })
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">onClick</span>(<span style="color:#66d9ef">async</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>              <span style="color:#75715e">// this.photoUrl = &#39;网络图片的地址&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>              <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// 1. 从相簿中选照片
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">options</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">picker</span>.<span style="color:#a6e22e">PhotoSelectOptions</span>()
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">options</span>.<span style="color:#a6e22e">MIMEType</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">picker</span>.<span style="color:#a6e22e">PhotoViewMIMETypes</span>.<span style="color:#a6e22e">IMAGE_TYPE</span><span style="color:#75715e">//媒体类型：视频还是图片
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">options</span>.<span style="color:#a6e22e">maxSelectNumber</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span><span style="color:#75715e">//最大选择个数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">picker</span>.<span style="color:#a6e22e">PhotoViewPicker</span>().<span style="color:#a6e22e">select</span>(<span style="color:#a6e22e">options</span>)<span style="color:#75715e">//把参数传给下面的方法，把结果传给result
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;Upload&#39;</span>, <span style="color:#e6db74">`Picker Success </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">photoUris</span>[<span style="color:#ae81ff">0</span>]<span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>)
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">uploading</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// 2. 调云存储 api 上传照片
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">cloud</span>.<span style="color:#a6e22e">storage</span>().<span style="color:#a6e22e">upload</span>({
</span></span><span style="display:flex;"><span>                  <span style="color:#a6e22e">localPath</span>: <span style="color:#66d9ef">result.photoUris</span>[<span style="color:#ae81ff">0</span>],<span style="color:#75715e">//本地图片路径
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                  <span style="color:#a6e22e">cloudPath</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`test/</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">getUid</span>()<span style="color:#e6db74">}</span><span style="color:#e6db74">.jpg`</span>,<span style="color:#75715e">//云存储那边存储的路径
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                  <span style="color:#a6e22e">onUploadProgress</span>: <span style="color:#66d9ef">event</span> <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">percent</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">floor</span>(<span style="color:#ae81ff">100</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">loaded</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">total</span>)<span style="color:#75715e">//获取上传的百分比，event.loaded：已上传的自己数，event.total：总的自己数，Math.floor：舍弃小数点
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">uploadingText</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">percent</span><span style="color:#e6db74">}</span><span style="color:#e6db74">%`</span>  <span style="color:#75715e">//数值更新到uploadingText
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                  }
</span></span><span style="display:flex;"><span>                })
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;Upload&#39;</span>, <span style="color:#e6db74">&#39;Upload Success&#39;</span>)
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// 3. 获取上传照片的网络地址
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">url</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">cloud</span>.<span style="color:#a6e22e">storage</span>().<span style="color:#a6e22e">getDownloadURL</span>(<span style="color:#e6db74">`test/</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">getUid</span>()<span style="color:#e6db74">}</span><span style="color:#e6db74">.jpg`</span>)<span style="color:#75715e">//获取公网地址，拿到图片在网络上的地址
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">photoUrl</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">url</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&amp;ts=</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">new</span> Date().<span style="color:#a6e22e">getTime</span>()<span style="color:#e6db74">}</span><span style="color:#e6db74">`</span><span style="color:#75715e">//这个里做这个处理是因为，图片被缓存起来了，上传的时候如果只是给云存储的地址，那么在传第二张图片到云存储后，photoUrl再获取时，因为图片地址不变照片也不会改变，它会缓存起来，而在图片后面加上一个时间图片就不在被缓存。
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#75715e">// this.uploading = false
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;Upload&#39;</span>, <span style="color:#e6db74">`url: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">url</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>)
</span></span><span style="display:flex;"><span>              } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">error</span>(<span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;Upload&#39;</span>, <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">e</span>))
</span></span><span style="display:flex;"><span>              }
</span></span><span style="display:flex;"><span>            })
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">uploading</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 显示上传进度
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">Text</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">uploadingText</span>)
</span></span><span style="display:flex;"><span>              .<span style="color:#a6e22e">width</span>(<span style="color:#ae81ff">70</span>)
</span></span><span style="display:flex;"><span>              .<span style="color:#a6e22e">height</span>(<span style="color:#ae81ff">70</span>)
</span></span><span style="display:flex;"><span>              .<span style="color:#a6e22e">borderRadius</span>(<span style="color:#ae81ff">70</span>)
</span></span><span style="display:flex;"><span>              .<span style="color:#a6e22e">fontColor</span>(<span style="color:#e6db74">&#39;white&#39;</span>)
</span></span><span style="display:flex;"><span>              .<span style="color:#a6e22e">backgroundColor</span>(<span style="color:#e6db74">&#39;black&#39;</span>)
</span></span><span style="display:flex;"><span>              .<span style="color:#a6e22e">opacity</span>(<span style="color:#ae81ff">0.6</span>)
</span></span><span style="display:flex;"><span>              .<span style="color:#a6e22e">fontSize</span>(<span style="color:#ae81ff">24</span>)
</span></span><span style="display:flex;"><span>              .<span style="color:#a6e22e">fontWeight</span>(<span style="color:#a6e22e">FontWeight</span>.<span style="color:#a6e22e">Bolder</span>)
</span></span><span style="display:flex;"><span>              .<span style="color:#a6e22e">textAlign</span>(<span style="color:#a6e22e">TextAlign</span>.<span style="color:#a6e22e">Center</span>)<span style="color:#75715e">//文字对齐方式
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>          }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">TextInput</span>({ <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;请设置昵称&#39;</span>, <span style="color:#a6e22e">text</span>: <span style="color:#66d9ef">this.displayName</span> })
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;50%&#39;</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">onChange</span>(<span style="color:#a6e22e">value</span> <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">displayName</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">value</span>
</span></span><span style="display:flex;"><span>          })
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Button</span>(<span style="color:#e6db74">`保存`</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">onClick</span>(<span style="color:#66d9ef">async</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">await</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">updateProfile</span>({
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">displayName</span>: <span style="color:#66d9ef">this.displayName</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">photoUrl</span>: <span style="color:#66d9ef">this.photoUrl</span>
</span></span><span style="display:flex;"><span>              })
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;updateProfile&#39;</span>, <span style="color:#e6db74">&#39;Success&#39;</span>)
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">error</span>(<span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;updateProfile&#39;</span>, <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">e</span>))
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>          })
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Button</span>(<span style="color:#e6db74">`登出`</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">onClick</span>(<span style="color:#66d9ef">async</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">cloud</span>.<span style="color:#a6e22e">auth</span>().<span style="color:#a6e22e">signOut</span>()
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;SignOut&#39;</span>, <span style="color:#e6db74">&#39;Success&#39;</span>)
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">router</span>.<span style="color:#a6e22e">replaceUrl</span>({ <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;pages/MyLoginCustom&#39;</span> })
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">error</span>(<span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;SignOut&#39;</span>, <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">e</span>))
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>          })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">height</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h2 id="登录页面">登录页面</h2>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">Auth</span>, <span style="color:#a6e22e">VerifyCodeAction</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@hw-agconnect/cloud&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">cloud</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@hw-agconnect/cloud&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">hilog</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@ohos.hilog&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">router</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@ohos.router&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Entry</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Component</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">struct</span> <span style="color:#a6e22e">MyLogin</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">countDown</span>: <span style="color:#66d9ef">number</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//用一个变量来获取setinterval的ID
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">intervalId</span>:<span style="color:#66d9ef">number</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> <span style="color:#75715e">//因为这个变量与页面显示无关所以不用@State注释
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">verifyCodeButtonEnable</span>:<span style="color:#66d9ef">boolean</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">verifyCodeButtonText</span>:<span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;获取验证码&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">phoneNumber</span>: <span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">verifyCode</span>:<span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;输入验证码&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">private</span> <span style="color:#a6e22e">mainPage</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`pages/StudentPage`</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">async</span> <span style="color:#a6e22e">aboutToAppear() {</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">user</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">cloud</span>.<span style="color:#a6e22e">auth</span>().<span style="color:#a6e22e">getCurrentUser</span>()<span style="color:#75715e">//获取当前认证用户
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">user</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span>) {<span style="color:#75715e">//获取用户是否为空，如果用户已经断开会话，则下一次进入时间走时登录流程
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">AppStorage</span>.<span style="color:#a6e22e">SetOrCreate</span>(<span style="color:#e6db74">&#39;user&#39;</span>, <span style="color:#a6e22e">user</span>) <span style="color:#75715e">// 如果会话未断开，不走登录流程，而是吧用户数据存到AppStorage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">router</span>.<span style="color:#a6e22e">replaceUrl</span>({ <span style="color:#a6e22e">url</span>: <span style="color:#66d9ef">this.mainPage</span> })
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">error</span>(<span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;Login&#39;</span>, <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">e</span>))
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">//定时器代码
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">waiting</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonEnable</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonText</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">countDown</span><span style="color:#e6db74">}</span><span style="color:#e6db74">s`</span><span style="color:#75715e">//在一点击时，就显示10S
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">intervalId</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">setInterval</span>(() <span style="color:#f92672">=&gt;</span> { <span style="color:#75715e">//要知道定时器结束没有需要知道它的返回结果，这个结果可以通过setinterval的ID获取。
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonText</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">countDown</span><span style="color:#e6db74">}</span><span style="color:#e6db74">s`</span><span style="color:#75715e">//将倒计时显示出来
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">if</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">countDown</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//如果减到0，清楚定时器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">clearInterval</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">intervalId</span>)<span style="color:#75715e">//得到返回结果后清楚定时器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">countDown</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">intervalId</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonText</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;获取验证码&#39;</span><span style="color:#75715e">//倒计时结束时回复
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonEnable</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span> <span style="color:#75715e">//当点击时按键不可用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> <span style="color:#75715e">//不需要再往下继续执行了，所以return
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">countDown</span><span style="color:#f92672">--</span>
</span></span><span style="display:flex;"><span>    },<span style="color:#ae81ff">1000</span>)<span style="color:#75715e">//每隔1秒减一次
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  }
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">judgement</span>(){
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">if</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">phoneNumber</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">11</span>){
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonEnable</span><span style="color:#f92672">=</span><span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>     }<span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonEnable</span><span style="color:#f92672">=</span><span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">async</span> <span style="color:#a6e22e">sending_verifyCode</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> { <span style="color:#75715e">//调用方式异步调用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">cloud</span>.<span style="color:#a6e22e">auth</span>().<span style="color:#a6e22e">requestVerifyCode</span>({
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">verifyCodeType</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">kind</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;phone&#39;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">phoneNumber</span>: <span style="color:#66d9ef">this.phoneNumber</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">countryCode</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;86&#39;</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">action</span>: <span style="color:#66d9ef">VerifyCodeAction.REGISTER_LOGIN</span>, <span style="color:#75715e">//验证的方式
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">lang</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;zh_CN&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">sendInterval</span>: <span style="color:#66d9ef">10</span>
</span></span><span style="display:flex;"><span>      })
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;VerifCode&#39;</span>,<span style="color:#e6db74">&#39;Success&#39;</span>)
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">AlertDialog</span>.<span style="color:#a6e22e">show</span>({ <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;错误&#39;</span>, <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;验证码失败&#39;</span> })<span style="color:#75715e">//弹窗内容
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;VerifCode&#39;</span>,<span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">e</span>))
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">async</span> <span style="color:#a6e22e">login_verify</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">result</span>  <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">cloud</span>.<span style="color:#a6e22e">auth</span>().<span style="color:#a6e22e">signIn</span>({ <span style="color:#75715e">//定义一个变量来接收它的返回结果,返回的是result，在通过result.gitUsr获取用户信息
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">credentialInfo</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">kind</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;phone&#39;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">countryCode</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;86&#39;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">phoneNumber</span>: <span style="color:#66d9ef">this.phoneNumber</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">verifyCode</span>: <span style="color:#66d9ef">this.verifyCode</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      })
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">user</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">getUser</span>()
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">AppStorage</span>.<span style="color:#a6e22e">SetOrCreate</span>(<span style="color:#e6db74">&#39;user&#39;</span>,<span style="color:#a6e22e">user</span>)<span style="color:#75715e">//存储用户到 AppStorage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;Login&#39;</span>,<span style="color:#e6db74">&#39;Success&#39;</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">router</span>.<span style="color:#a6e22e">replaceUrl</span>({ <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;pages/MyLoginLignOut&#39;</span> })
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">AlertDialog</span>.<span style="color:#a6e22e">show</span>({<span style="color:#a6e22e">title</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;错误&#39;</span>,<span style="color:#a6e22e">message</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;登陆失败&#39;</span>})
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;Login&#39;</span>,<span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">e</span>))
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">build() {</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Row() {</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">Column() {</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">TextInput</span>({<span style="color:#a6e22e">placeholder</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;请输入手机号&#39;</span>})
</span></span><span style="display:flex;"><span>          .<span style="color:#66d9ef">type</span>(<span style="color:#a6e22e">InputType</span>.Number)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">onChange</span>(<span style="color:#a6e22e">values</span> <span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">phoneNumber</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">values</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">judgement</span>()<span style="color:#75715e">//点击获取验证码时，判断按键是否可用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        })
</span></span><span style="display:flex;"><span>       <span style="color:#a6e22e">Row</span>(){
</span></span><span style="display:flex;"><span>         <span style="color:#a6e22e">TextInput</span>({<span style="color:#a6e22e">placeholder</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;验证码&#39;</span>})
</span></span><span style="display:flex;"><span>           .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;70%&#39;</span>)
</span></span><span style="display:flex;"><span>           .<span style="color:#a6e22e">onChange</span>(<span style="color:#a6e22e">value</span> <span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>             <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCode</span><span style="color:#f92672">=</span><span style="color:#a6e22e">value</span>
</span></span><span style="display:flex;"><span>           })
</span></span><span style="display:flex;"><span>         <span style="color:#a6e22e">Button</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonText</span>)
</span></span><span style="display:flex;"><span>           .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;30%&#39;</span>)
</span></span><span style="display:flex;"><span>           .<span style="color:#a6e22e">enabled</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonEnable</span>)<span style="color:#75715e">//该属性是控制按键是否可用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>           .<span style="color:#a6e22e">onClick</span>(<span style="color:#66d9ef">async</span> () <span style="color:#f92672">=&gt;</span>{ <span style="color:#75715e">//所在方法加async
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>             <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">waiting</span>()
</span></span><span style="display:flex;"><span>             <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">sending_verifyCode</span>()
</span></span><span style="display:flex;"><span>           })
</span></span><span style="display:flex;"><span>       }
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Button</span>(<span style="color:#e6db74">&#39;登录&#39;</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">enabled</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">phoneNumber</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">11</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCode</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">6</span>)<span style="color:#75715e">//手机号11位，且验证码六位时点击登录才有效
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>          .<span style="color:#a6e22e">onClick</span>(<span style="color:#66d9ef">async</span> ()<span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">login_verify</span>()
</span></span><span style="display:flex;"><span>          })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">height</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>希望文档对你有所帮助。</p>

<div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
  <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
  <ul class="box-content attachments-files">
  </ul>
</div>

            <footer class="footline">
<div class=" taxonomy-categories term-list cstyle  " title="Categories" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../../categories/%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/">应用开发</a></li>
  </ul>
</div>
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="Tags" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../../tags/arkts%E8%AF%AD%E8%A8%80/">ArkTS语言</a></li>
    <li><a class="term-link" href="../../tags/harmonyos/">HarmonyOS</a></li>
    <li><a class="term-link" href="../../tags/openharmony/">OpenHarmony</a></li>
  </ul>
</div>
            </header>
<h1 id="8速通arkts语言">8.速通ArkTS语言</h1>

<h2 id="数据类型">数据类型</h2>
<p><a href="#R-image-c061d54238a1238c1f64e93b142bec0c" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/8.%E9%80%9F%E9%80%9Aarkts%E8%AF%AD%E8%A8%80/image.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c061d54238a1238c1f64e93b142bec0c"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/8.%E9%80%9F%E9%80%9Aarkts%E8%AF%AD%E8%A8%80/image.png" alt="alt text" class="lightbox-image        " loading="lazy"></a></p>
<p><a href="https://www.typescriptlang.org/play" target="_blank">练习网址：</a></p>
<h2 id="条件语句">条件语句</h2>
<p><a href="#R-image-f6850b8e304890002109160a9de78ee1" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/8.%E9%80%9F%E9%80%9Aarkts%E8%AF%AD%E8%A8%80/image-1.png" alt="alt text1" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f6850b8e304890002109160a9de78ee1"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/8.%E9%80%9F%E9%80%9Aarkts%E8%AF%AD%E8%A8%80/image-1.png" alt="alt text1" class="lightbox-image        " loading="lazy"></a></p>
<p>拓展：for in与for of的使用</p>
<ul>
<li>for in ：遍历得到数组的角标，</li>
<li>for of ：直接得到元素。
<a href="#R-image-addce6d65e24cd65e196f360bb616f80" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/8.%E9%80%9F%E9%80%9Aarkts%E8%AF%AD%E8%A8%80/image-2.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-addce6d65e24cd65e196f360bb616f80"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/8.%E9%80%9F%E9%80%9Aarkts%E8%AF%AD%E8%A8%80/image-2.png" alt="alt text" class="lightbox-image        " loading="lazy"></a></li>
</ul>
<h2 id="函数">函数</h2>
<p>使用function关键字声明函数，</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-TS" data-lang="TS"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">outname</span>(<span style="color:#a6e22e">name</span>:<span style="color:#66d9ef">string</span>)<span style="color:#f92672">:</span><span style="color:#66d9ef">void</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;你好&#39;</span><span style="color:#f92672">+</span><span style="color:#a6e22e">name</span><span style="color:#f92672">+</span><span style="color:#e6db74">&#34;!&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//第二种写法：
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">outname</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">name</span>:<span style="color:#66d9ef">string</span>)<span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;你好&#39;</span><span style="color:#f92672">+</span><span style="color:#a6e22e">name</span><span style="color:#f92672">+</span><span style="color:#e6db74">&#34;!&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">outname</span>(<span style="color:#e6db74">&#39;lucy&#39;</span>)</span></span></code></pre></div><p>ts还提供了一种可传参数和不传参数也执行的函数的操作，写法如下：</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-TS" data-lang="TS"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">outname</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">name</span>:<span style="color:#66d9ef">string</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;张三&#39;</span>)<span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;你好&#39;</span><span style="color:#f92672">+</span><span style="color:#a6e22e">name</span><span style="color:#f92672">+</span><span style="color:#e6db74">&#34;!&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">outname</span>()</span></span></code></pre></div><h2 id="面向对象">面向对象</h2>
<h2 id="模块的导入导出">模块的导入导出</h2>
<p>提高代码的重复使用
<a href="#R-image-bd706ab55b249fba0c3d9a1a5d180d8e" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/8.%E9%80%9F%E9%80%9Aarkts%E8%AF%AD%E8%A8%80/image-3.png" alt="alt text3" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-bd706ab55b249fba0c3d9a1a5d180d8e"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/8.%E9%80%9F%E9%80%9Aarkts%E8%AF%AD%E8%A8%80/image-3.png" alt="alt text3" class="lightbox-image        " loading="lazy"></a></p>
<h2 id="组件的使用">组件的使用</h2>
<h3 id="image组件">image组件</h3>
<h3 id="textinput组件">textinput组件</h3>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#a6e22e">TextInput</span>({<span style="color:#a6e22e">text</span>:<span style="color:#66d9ef">this.imagewidth.toFixed</span>(<span style="color:#ae81ff">0</span>)})
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">width</span>(<span style="color:#ae81ff">150</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">backgroundColor</span>(<span style="color:#e6db74">&#39;#36D00A&#39;</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#66d9ef">type</span>(<span style="color:#a6e22e">InputType</span>.Number)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">onChange</span>( <span style="color:#a6e22e">values</span> <span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">imagewidth</span> <span style="color:#f92672">=</span> parseInt(<span style="color:#a6e22e">values</span>)
</span></span><span style="display:flex;"><span>          })
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">TextInput</span>({<span style="color:#a6e22e">placeholder</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;nihao&#39;</span>})
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">width</span>(<span style="color:#ae81ff">150</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">backgroundColor</span>(<span style="color:#e6db74">&#39;#4399&#39;</span>)</span></span></code></pre></div><p>效果如下图：
<a href="#R-image-b64e74e7708b18063646b63ed97ad99d" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/8.%E9%80%9F%E9%80%9Aarkts%E8%AF%AD%E8%A8%80/image-4.png" alt="效果1" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-b64e74e7708b18063646b63ed97ad99d"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/8.%E9%80%9F%E9%80%9Aarkts%E8%AF%AD%E8%A8%80/image-4.png" alt="效果1" class="lightbox-image        " loading="lazy"></a>
<a href="#R-image-93d12c9eee1af1b44862dabf707feddc" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/8.%E9%80%9F%E9%80%9Aarkts%E8%AF%AD%E8%A8%80/image-5.png" alt="效果2" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-93d12c9eee1af1b44862dabf707feddc"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/8.%E9%80%9F%E9%80%9Aarkts%E8%AF%AD%E8%A8%80/image-5.png" alt="效果2" class="lightbox-image        " loading="lazy"></a></p>
<p>文本框内输入的值是什么类型的数据呢？</p>
<p>从上面的代码可知是字符型的，此处我们用<code>parseInt</code>将一个变量转换成number类型，又用方法<code>.toFixed()</code>将一个number类型的变量转换成字符串型。</p>
<h3 id="按键组件">按键组件</h3>
<p><a href="#R-image-dbd524fbc3eab153b87c7a012e110946" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/8.%E9%80%9F%E9%80%9Aarkts%E8%AF%AD%E8%A8%80/image-6.png" alt="按键组件" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-dbd524fbc3eab153b87c7a012e110946"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/8.%E9%80%9F%E9%80%9Aarkts%E8%AF%AD%E8%A8%80/image-6.png" alt="按键组件" class="lightbox-image        " loading="lazy"></a></p>
<h3 id="滑动条组件slider">滑动条组件（slider）</h3>
<p><a href="#R-image-738a4314b630b290d4720b98f25c9ccd" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/8.%E9%80%9F%E9%80%9Aarkts%E8%AF%AD%E8%A8%80/image-7.png" alt="Slider" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-738a4314b630b290d4720b98f25c9ccd"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/8.%E9%80%9F%E9%80%9Aarkts%E8%AF%AD%E8%A8%80/image-7.png" alt="Slider" class="lightbox-image        " loading="lazy"></a></p>
<h2 id="页面布局">页面布局</h2>
<h3 id="线性布局">线性布局</h3>
<p><a href="#R-image-f85db83e9a3d39d674ce0d0faacd2251" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/8.%E9%80%9F%E9%80%9Aarkts%E8%AF%AD%E8%A8%80/image-8.png" alt="垂直布局" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f85db83e9a3d39d674ce0d0faacd2251"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/8.%E9%80%9F%E9%80%9Aarkts%E8%AF%AD%E8%A8%80/image-8.png" alt="垂直布局" class="lightbox-image        " loading="lazy"></a></p>
<p>Row布局与Column布局类似，只是主轴方向不同
<a href="#R-image-4494432b94065c5b0415fa94120dba14" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/8.%E9%80%9F%E9%80%9Aarkts%E8%AF%AD%E8%A8%80/image-9.png" alt="水平分布" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4494432b94065c5b0415fa94120dba14"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/8.%E9%80%9F%E9%80%9Aarkts%E8%AF%AD%E8%A8%80/image-9.png" alt="水平分布" class="lightbox-image        " loading="lazy"></a></p>
<h3 id="循环控制foreach">循环控制ForEach</h3>
<h2 id="使用router进行页面跳转时用replaceurl与pushurl的区别">使用router进行页面跳转时用replaceUrl与pushUrl的区别</h2>
<p>后者会保留前一页信息，就是跳转后会返回上一页面，而后面的不会跳回上一页</p>
<p>11&ndash;t</p>
<p>f&ndash;!=11,运行时

<div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
  <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
  <ul class="box-content attachments-files">
  </ul>
</div></p>

            <footer class="footline">
<div class=" taxonomy-categories term-list cstyle  " title="Categories" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../../categories/b5-%E7%BC%96%E7%A8%8B/">B5-编程</a></li>
  </ul>
</div>
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="Tags" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../../tags/atomgit/">atomgit</a></li>
    <li><a class="term-link" href="../../tags/gihub/">gihub</a></li>
  </ul>
</div>
            </header>
<h1 id="6github和atomgit的混合使用哪些是值得注意的">6.github和atomgit的混合使用，哪些是值得注意的？</h1>

<h2 id="一台电脑如何使用多个远程仓库">一台电脑如何使用多个远程仓库？</h2>
<ul>
<li>下载好git，并做好相关的配置</li>
<li>关联github仓库
<ul>
<li>创建github仓库</li>
<li>克隆仓库到本地</li>
</ul>
</li>
</ul>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-git" data-lang="git">  git clone &lt;你的远程仓库URL&gt;</code></pre></div><p>创建多个 SSH 密钥对涉及到在本地生成多个公钥和私钥文件，并将公钥添加到你想要访问的远程服务器上。以下是详细步骤：</p>
<p>打开终端：
打开你的终端（在 macOS 或 Linux 上）或 Git Bash（在 Windows 上）。</p>
<p>导航到 SSH 目录：
使用 cd 命令切换到你的 SSH 目录，通常是 ~/.ssh。</p>
<p><code>cd ~/.ssh</code>
生成新的 SSH 密钥对：
使用 ssh-keygen 命令生成新的密钥对。每次运行此命令时，你都可以指定不同的文件名，以便区分不同的密钥对。例如，为 GitHub 生成的密钥对可能命名为 id_rsa_github，为 GitLab 生成的密钥对可能命名为 id_rsa_gitlab。</p>
<p><code>ssh-keygen -t rsa -b 4096 -C &quot;your_email@example.com&quot; -f id_rsa_github</code>
重复上述步骤，为其他服务生成密钥对，只需更改文件名即可。例如：</p>
<p><code>ssh-keygen -t rsa -b 4096 -C &quot;another_email@example.com&quot; -f id_rsa_gitlab</code></p>
<p>-b是指密码的长度是4096，与加密有关，-f表示要创建的ssh有关文件名</p>
<p>在生成密钥时，系统会提示你输入一个文件名来保存新的密钥对。如果你直接按回车键，它将使用默认的文件名（如 id_rsa）。如果你想要为每个服务使用不同的文件名，确保在命令中指定 -f 选项后跟你想要的文件名。</p>
<p>将公钥添加到远程服务器：
生成密钥对后，你需要将公钥（文件名后缀为 .pub）添加到远程服务器的 SSH 密钥管理界面。例如，在 GitHub 上，你可以在 Settings &gt; SSH and GPG keys 部分添加新的公钥。</p>
<p>配置 SSH 配置文件：
为了确保 SSH 使用正确的密钥对连接到正确的服务器，你可以在 .ssh 目录下创建一个名为 config 的文件（如果该文件不存在的话），并为每个服务配置不同的设置。</p>
<p><code>touch ~/.ssh/config</code></p>
<p>然后编辑这个文件，添加以下内容：</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>Host github.com
</span></span><span style="display:flex;"><span>  User git
</span></span><span style="display:flex;"><span>  IdentityFile <span style="color:#f92672">~/</span>.ssh<span style="color:#f92672">/</span>id_rsa_github
</span></span><span style="display:flex;"><span>  IdentitiesOnly yes
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Host gitlab.com
</span></span><span style="display:flex;"><span>  User git
</span></span><span style="display:flex;"><span>  IdentityFile <span style="color:#f92672">~/</span>.ssh<span style="color:#f92672">/</span>id_rsa_gitlab
</span></span><span style="display:flex;"><span>  IdentitiesOnly yes</span></span></code></pre></div><p>这里的 Host 是你为每个服务设置的别名，User 是 Git 服务的默认用户名（通常是 git），IdentityFile 是你的私钥文件的路径。</p>
<p>测试 SSH 连接：
使用 ssh -T 命令测试与远程服务器的连接。例如：</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>ssh <span style="color:#f92672">-</span>T git<span style="color:#960050;background-color:#1e0010">@</span>github.com
</span></span><span style="display:flex;"><span>ssh <span style="color:#f92672">-</span>T git<span style="color:#960050;background-color:#1e0010">@</span>gitlab.com</span></span></code></pre></div><p>如果一切设置正确，你应该会看到一条欢迎消息，表明你已经成功通过 SSH 密钥验证。</p>
<h2 id="当我有连个github账户时当我用同一台电脑推送的时候如何区分是那个推送的">当我有连个github账户时，当我用同一台电脑推送的时候如何区分是那个推送的</h2>
<p><a href="https://blog.csdn.net/Kingson_Wu/article/details/38960559" target="_blank">推荐文章</a></p>
<p>答案：</p>
<p>首先是克隆下来两个项目一个为test_A,一个为test_B，假设有一个账户是A，另一个是B，而且A账户的邮箱是设置为全局的，即用了这条命令：</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>git config <span style="color:#f92672">--</span>global user.name <span style="color:#e6db74">&#34;A&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>git config <span style="color:#f92672">--</span>global user.email A<span style="color:#960050;background-color:#1e0010">@</span>qq.com
</span></span><span style="display:flex;"><span><span style="color:#75715e">#假设这里的邮箱是QQ</span></span></span></code></pre></div><p>那么在在text_A中不作任何修改，在text_B中添加如下命令即可：</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>git config  user.name <span style="color:#e6db74">&#34;B&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>git config user.email B<span style="color:#960050;background-color:#1e0010">@</span>qq.com
</span></span><span style="display:flex;"><span><span style="color:#75715e">#假设这里的邮箱是QQ</span></span></span></code></pre></div><h2 id="遇到的一些问题">遇到的一些问题</h2>
<p>问题一</p>
<hr>
<p>解决Git上传代码error: failed to push some refs to ‘xxx‘hint:(e.g., ‘git pull &hellip;‘) before pushing again错误</p>
<hr>
<p><a href="https://blog.csdn.net/qq_43265673/article/details/107392047" target="_blank">推荐文章</a></p>
<p>问题二</p>
<hr>
<p>【Git】错误：权限被拒绝（公钥）(Permission denied (publickey).)</p>
<hr>
<p><a href="https://blog.csdn.net/weixin_42282187/article/details/124820546?spm=1001.2101.3001.6650.2&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%25!E%28MISSING%29default%25!E%28MISSING%29CTRLIST%25!E%28MISSING%29Rate-2-124820546-blog-100894172.235%25!E%28MISSING%29v43%25!E%28MISSING%29pc_blog_bottom_relevance_base8&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%25!E%28MISSING%29default%25!E%28MISSING%29CTRLIST%25!E%28MISSING%29Rate-2-124820546-blog-100894172.235%25!E%28MISSING%29v43%25!E%28MISSING%29pc_blog_bottom_relevance_base8&amp;utm_relevant_index=5" target="_blank">推荐文章</a>2)</p>
<p>问题三</p>
<hr>
<p>解决Git上传代码error: failed to push some refs to ‘xxx‘hint:(e.g., ‘git pull &hellip;‘) before pushing again错误</p>
<hr>
<p><a href="https://blog.csdn.net/qq_43265673/article/details/107392047" target="_blank">推荐文章</a>

<div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
  <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
  <ul class="box-content attachments-files">
  </ul>
</div></p>

            <footer class="footline">
<div class=" taxonomy-categories term-list cstyle  " title="Categories" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../../categories/b1-%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0/">B1-博客文章</a></li>
  </ul>
</div>
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="Tags" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../../tags/%E6%96%87%E7%AB%A0/">文章</a></li>
  </ul>
</div>
            </header>
<h1 id="5自定义页面以康奈尔笔记格式输出">5.自定义页面以康奈尔笔记格式输出</h1>

<link rel="stylesheet" href="../../css/cornell-notes.css"> <div class="cornell-notes"> <div class="cues">
<h2 id="cues">Cues</h2>
<ul>
<li><a href="#cues">Cues</a></li>
<li><a href="#notes">Notes</a>
<ul>
<li><a href="#%E5%88%9B%E5%BB%BAcss%E6%96%87%E4%BB%B6">创建css文件</a></li>
<li><a href="#%E5%9C%A8hugo%E9%85%8D%E7%BD%AE%E4%B8%AD%E8%AE%BE%E7%BD%AE">在hugo配置中设置</a></li>
<li><a href="#%E5%9C%A8markdown%E6%96%87%E6%A1%A3%E4%B8%AD%E5%BC%95%E7%94%A8">在markdown文档中引用</a></li>
</ul>
</li>
<li><a href="#summary">Summary</a></li>
</ul>
<p><strong>标签/提示</strong> ：静态网页，康奈尔笔记，hugo，自定义页面输出格式。</p>
</div>
<div class="notes">
<h2 id="notes">Notes</h2>
<h3 id="创建css文件">创建css文件</h3>
<p>康奈尔笔记的布局，其中左侧是 &ldquo;Cues&rdquo;，右侧是 &ldquo;Notes&rdquo;，底部是 &ldquo;Summary&rdquo;，您可以使用 Flexbox 的 row 和 column 布局来实现。这里是一个 CSS 示例，它将创建一个两列的布局，左侧为 &ldquo;Cues&rdquo;，右侧为 &ldquo;Notes&rdquo;，然后在这两列下方是 &ldquo;Summary&rdquo;。</p>
<p>首先，创建一个名为 cornell-notes.css 的 CSS 文件，并添加以下样式代码：</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>.cornell<span style="color:#f92672">-</span>notes {
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  border: <span style="color:#ae81ff">1</span>px solid <span style="color:#960050;background-color:#1e0010">#</span>ccc;
</span></span><span style="display:flex;"><span>  padding: <span style="color:#ae81ff">20</span>px;
</span></span><span style="display:flex;"><span>  margin: <span style="color:#ae81ff">20</span>px;
</span></span><span style="display:flex;"><span>  display: flex;
</span></span><span style="display:flex;"><span>  flex<span style="color:#f92672">-</span>wrap: wrap;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.cues {
</span></span><span style="display:flex;"><span>  background<span style="color:#f92672">-</span>image: <span style="color:#a6e22e">url</span>(<span style="color:#960050;background-color:#1e0010">&#39;</span>icon2.svg<span style="color:#960050;background-color:#1e0010">&#39;</span>);
</span></span><span style="display:flex;"><span>  border<span style="color:#f92672">-</span>right: <span style="color:#ae81ff">1</span>px solid <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">080808</span>;
</span></span><span style="display:flex;"><span>  flex: <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>  padding<span style="color:#f92672">-</span>right: <span style="color:#ae81ff">20</span>px;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.notes {
</span></span><span style="display:flex;"><span>  background<span style="color:#f92672">-</span>image: <span style="color:#a6e22e">url</span>(<span style="color:#960050;background-color:#1e0010">&#39;</span>icon1.svg<span style="color:#960050;background-color:#1e0010">&#39;</span>);
</span></span><span style="display:flex;"><span>  border<span style="color:#f92672">-</span>left: <span style="color:#ae81ff">1</span>px solid <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">080808</span>;
</span></span><span style="display:flex;"><span>  flex: <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>  padding<span style="color:#f92672">-</span>left: <span style="color:#ae81ff">20</span>px;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.summary {
</span></span><span style="display:flex;"><span>  width: <span style="color:#ae81ff">100</span><span style="color:#f92672">%</span>;
</span></span><span style="display:flex;"><span>  clear: both; <span style="color:#75715e">/* 清除浮动，确保摘要部分在下方 */</span>
</span></span><span style="display:flex;"><span>  padding<span style="color:#f92672">-</span>top: <span style="color:#ae81ff">20</span>px;
</span></span><span style="display:flex;"><span>  background<span style="color:#f92672">-</span>image:<span style="color:#a6e22e">url</span>(<span style="color:#960050;background-color:#1e0010">&#39;</span>wwwatercolor.jpg<span style="color:#960050;background-color:#1e0010">&#39;</span>);
</span></span><span style="display:flex;"><span>  margin<span style="color:#f92672">-</span>top: <span style="color:#ae81ff">20</span>px;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>在这个样式中，.cornell-notes 是整个康奈尔笔记的容器，我们使用 display: flex; 和 flex-wrap: wrap; 来创建一个 Flex 容器，允许子元素根据需要换行。.cues 和 .notes 分别设置为容器的子项，并通过 flex 属性来分配空间。.summary 部分使用 width: 100%; 来确保它在 .cues 和 .notes 下方显示，并使用 clear: both; 来清除之前的浮动。</p>
<p>此处分享一个免费的svg网站，<a href="https://fffuel.co/" target="_blank">bbburst：</a>
<a href="#R-image-7a5b2c476a4abc2bdab49bae551905cb" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/5.%E5%BA%B7%E5%A5%88%E5%B0%94%E7%AC%94%E8%AE%B0%E6%A0%B7%E5%BC%8F%E7%9A%84%E5%88%9B%E5%BB%BA/image.png" alt="bbburst" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-7a5b2c476a4abc2bdab49bae551905cb"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/5.%E5%BA%B7%E5%A5%88%E5%B0%94%E7%AC%94%E8%AE%B0%E6%A0%B7%E5%BC%8F%E7%9A%84%E5%88%9B%E5%BB%BA/image.png" alt="bbburst" class="lightbox-image        " loading="lazy"></a>
在这个网站或许你可以找到适合你的背景图，用以装饰自己的康奈尔容器，此处的svg是放在css文件夹下的，所以是直接引用，如果你放在别的的放那么还请使用正确的的路径。</p>
<h3 id="在hugo配置中设置">在hugo配置中设置</h3>
<p>接下来，确保将 cornell-notes.css 文件放置在 Hugo 站点的 static/css 目录下。然后，在 Hugo 的配置文件 config.toml 中添加对 CSS 文件的引用：</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e"># config.toml
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>[Params]
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># 其他参数...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>[markup]
</span></span><span style="display:flex;"><span>  [markup.goldmark]
</span></span><span style="display:flex;"><span>    [markup.goldmark.renderer]
</span></span><span style="display:flex;"><span>      unsafe <span style="color:#f92672">=</span> true  <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#960050;background-color:#1e0010">允许在</span> Markdown <span style="color:#960050;background-color:#1e0010">中使用</span> HTML <span style="color:#960050;background-color:#1e0010">和</span> CSS</span></span></code></pre></div><p>如果使用的是code打开的项目，那么可以先在code内搜索上面的配置是否已添加，因为部分hugo主题原来就添加了这一配置。</p>
<h3 id="在markdown文档中引用">在markdown文档中引用</h3>
<p>在 Markdown 文件中，你可以这样使用这些类：</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>title: <span style="color:#e6db74">&#34;康奈尔笔记示例&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;</span>link rel<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> href<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/css/cornell-notes.css&#34;</span><span style="color:#f92672">&gt;</span>  <span style="color:#f92672">&lt;</span>div class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;cornell-notes&#34;</span><span style="color:#f92672">&gt;</span>    <span style="color:#f92672">&lt;</span>div class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;cues&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## Cues
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">-</span> <span style="color:#960050;background-color:#1e0010">这里是关键词和提示。</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/</span>div<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;</span>div class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;notes&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## Notes
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#f92672">-</span> <span style="color:#960050;background-color:#1e0010">这里是详细的笔记内容。</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/</span>div<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;</span>div class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;summary&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## Summary
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> <span style="color:#f92672">-</span> <span style="color:#960050;background-color:#1e0010">这里是笔记的摘要。</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/</span>div<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/</span>div<span style="color:#f92672">&gt;</span></span></span></code></pre></div><p>确保在 Markdown 文件中添加 <link> 标签来引入 CSS 文件，并为每个部分使用相应的类。这样，当你构建并查看 Hugo 站点时，康奈尔笔记将以正确的样式显示，其中 &ldquo;Cues&rdquo; 在左侧，&ldquo;Notes&rdquo; 在右侧，&ldquo;Summary&rdquo; 在底部。</p>
</div>
<div class="summary">
<h2 id="summary">Summary</h2>
<p>在上面我们学习了如何自定义hugo中页面的输出格式，在引用hugo主题情况下，自定义自己的页面输出格式只需要三点，即创建css文件，在config配置文件中配置相关信息，在markdown中引用。其实我们可以拓展，如果你想创建属于自己的笔记你可以参照上面的方法自制简单的笔记，希望本期内容对你有所帮助。</p>
</div>
</div>

            <footer class="footline">
<div class=" taxonomy-categories term-list cstyle  " title="Categories" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../../categories/w1-%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0/">W1-博客文章</a></li>
  </ul>
</div>
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="Tags" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../../tags/github/">github</a></li>
    <li><a class="term-link" href="../../tags/%E9%AB%98%E7%BA%A7%E6%90%9C%E7%B4%A2/">高级搜索</a></li>
  </ul>
</div>
            </header>
<h1 id="4如何在github上使用高级搜索搜出自己想要的项目">4.如何在github上使用高级搜索搜出自己想要的项目？</h1>

<p><a href="https://www.cnblogs.com/tntblog/p/13715084.html" target="_blank">原文章链接</a></p>

<div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
  <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
  <ul class="box-content attachments-files">
  </ul>
</div>

            <footer class="footline">
<div class=" taxonomy-categories term-list cstyle  " title="Categories" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../../categories/w1-%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0/">W1-博客文章</a></li>
  </ul>
</div>
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="Tags" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../../tags/%E7%BD%91%E7%AB%99/">网站</a></li>
  </ul>
</div>
            </header>
<h1 id="文章标题的多样设计">文章标题的多样设计</h1>

<p>在标题前面显示图标：</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#f92672">+++</span>
</span></span><span style="display:flex;"><span>menuPre <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&lt;i class=&#39;fab fa-github&#39;&gt;&lt;/i&gt; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+++</span></span></span></code></pre></div><p>添加这个后的效果如下：</p>
<p><a href="#R-image-dcb04f9a135f895e01111c4d03ac00d3" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/3.%E6%96%87%E7%AB%A0%E6%A0%87%E9%A2%98%E7%9A%84%E5%A4%9A%E6%A0%B7%E8%AE%BE%E8%AE%A1/image.png" alt="效果图" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-dcb04f9a135f895e01111c4d03ac00d3"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/3.%E6%96%87%E7%AB%A0%E6%A0%87%E9%A2%98%E7%9A%84%E5%A4%9A%E6%A0%B7%E8%AE%BE%E8%AE%A1/image.png" alt="效果图" class="lightbox-image        " loading="lazy"></a>

<div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
  <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
  <ul class="box-content attachments-files">
  </ul>
</div></p>

            <footer class="footline">
<div class=" taxonomy-categories term-list cstyle  " title="Categories" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../../categories/b1-%E6%8B%93%E5%B1%95%E7%AC%94%E8%AE%B0/">B1-拓展笔记</a></li>
  </ul>
</div>
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="Tags" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../../tags/git/">git</a></li>
    <li><a class="term-link" href="../../tags/github/">github</a></li>
    <li><a class="term-link" href="../../tags/%E6%8A%A5%E9%94%99%E4%B8%8E%E8%A7%A3%E5%86%B3/">报错与解决</a></li>
  </ul>
</div>
            </header>
<h1 id="常与问题总结">常与问题总结</h1>

<h2 id="1使用git-commi--m-时报错-your-branch-is-up-to-date-with-originmaster">1、使用git commi -m &ldquo;……&ldquo;时报错： Your branch is up to date with ‘origin/master‘</h2>
<p>今天在提交项目的时候报了这个错误，在网上查了解决办法，有的说创建新的分支可以解决，但我的不行。</p>
<p>最后我的解决办法是先退出git base here，再重新进入，下面是具体步骤：</p>
<ul>
<li>先使用<code>git add .</code>；</li>
<li>接着使用<code>git status -s</code>查看我更改的文件，也是我要推送的文件，如果前面的有M和??，那么久重新更新文件，然后重复上面的步骤；</li>
<li>发现前面的M是绿色的后就可以使用<code>git commit -m &quot;文件备注&quot;</code>；</li>
<li>然后推送就可以了<code>git push origin main</code>。</li>
</ul>
<h2 id="androidstudio中的grable下载很慢如何解决">AndroidStudio中的grable下载很慢，如何解决？</h2>
<p><a href="https://blog.csdn.net/BG1230521/article/details/136605382" target="_blank">参考地址</a></p>
<p>这里的关键命令是git status -s，我现在搞不懂这个错误产生的原因……</p>
<h2 id="虚拟机连接不上网络没有分配ens33">虚拟机连接不上网络，没有分配ENS33</h2>
<p><a href="https://blog.csdn.net/qq_44853430/article/details/109974779" target="_blank">参考链接</a></p>
<h2 id="浏览器突然无法访问某些网站之前可以突然不行">浏览器突然无法访问某些网站，之前可以突然不行。</h2>
<p>解决办法：
<a href="#R-image-08a4ad87b0598f2181407a5b250adef4" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/github%E5%B8%B8%E9%81%87%E9%97%AE%E9%A2%98/image.png" alt="11" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-08a4ad87b0598f2181407a5b250adef4"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/github%E5%B8%B8%E9%81%87%E9%97%AE%E9%A2%98/image.png" alt="11" class="lightbox-image        " loading="lazy"></a></p>
<p>在浏览器中关闭，使用安全的 DNS 指定如何查找网站的网络地址，然后就可以访问了，原因我还没弄清楚。</p>
<h2 id="androidstudio中为什么不建议使用case-ridgenerate判断而是使用ifvgetid--ridgenerate">AndroidStudio中为什么不建议使用<code>case R.id.generate</code>判断，而是使用<code>if(v.getId() == R.id.generate)</code>？</h2>
<p>1.当使用Switch语句写如下代码时，</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">switch</span> (v.<span style="color:#a6e22e">getId</span>()){
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">generate</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">add</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>        }</span></span></code></pre></div><p>（红色表示报错）如果报错android studio报错constant expression required，
可以把Switch语句换成if-else语句即</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>If<span style="color:#960050;background-color:#1e0010">（</span>v.<span style="color:#a6e22e">getId</span>() <span style="color:#f92672">==</span> R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">generate</span><span style="color:#960050;background-color:#1e0010">）</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">……</span>
</span></span><span style="display:flex;"><span>}<span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span><span style="color:#960050;background-color:#1e0010">（</span>v.<span style="color:#a6e22e">getId</span>() <span style="color:#f92672">==</span> R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">add</span><span style="color:#960050;background-color:#1e0010">）</span>{
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">……</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>这样就可以了。来源以及具体原因：
<a href="https://blog.csdn.net/weixin_43912621/article/details/106178388" target="_blank">https://blog.csdn.net/weixin_43912621/article/details/106178388</a></p>

<div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
  <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
  <ul class="box-content attachments-files">
  </ul>
</div>

            <footer class="footline">
<div class=" taxonomy-categories term-list cstyle  " title="Categories" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../../categories/w1-%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0/">W1-博客文章</a></li>
  </ul>
</div>
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="Tags" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../../tags/%E5%89%8D%E7%AB%AF/">前端</a></li>
    <li><a class="term-link" href="../../tags/%E7%BD%91%E7%BB%9C/">网络</a></li>
    <li><a class="term-link" href="../../tags/%E7%BD%91%E7%AB%99/">网站</a></li>
  </ul>
</div>
            </header>
<h1 id="如何用旧电脑搭建自己的服务器">如何用旧电脑搭建自己的服务器？</h1>

<p>拥有一个属于自己的服务器个人感觉就很赞，我最初是在不买公网IP情况下，用一台电脑做服务器，然后另外一台电脑可以远程访问，部署网站，然后别人可以访问这个网站，这样一个功能。如果你也有这样的想法还请阅读下去，希望自己的经验对你有所帮助。</p>
<h2 id="所需设备">所需设备</h2>
<p>一台旧电脑，一台目前在使用的电脑。</p>
<h2 id="在旧电脑上安装natapp程序">在旧电脑上安装natapp程序</h2>
<p>在百度上搜索NATAPP，或点击这个链接:<a href="https://natapp.cn/" target="_blank">NATAPP</a>,</p>
<p><a href="#R-image-89957cdabfece419c6124b39efb78d47" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-02-02%20113627.png" alt="网站首页面" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-89957cdabfece419c6124b39efb78d47"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-02-02%20113627.png" alt="网站首页面" class="lightbox-image        " loading="lazy"></a></p>
<p>进入网站后先简单注册一下用户,顺便实名认证一下，因为买隧道会提示需要实名，接着点击首页下载自己的电脑系统对应版本，我的是Windows（下面的测试也是基于Windows）</p>
<p><a href="#R-image-0afc4ddef00ea6e8f9f9c4f5795423bc" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE1.png" alt="下载页面" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-0afc4ddef00ea6e8f9f9c4f5795423bc"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE1.png" alt="下载页面" class="lightbox-image        " loading="lazy"></a></p>
<p>下载好后解压文件，得到如下图程序：</p>
<p><a href="#R-image-f56b0f30422f3dcfb9e8946ba80997c4" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE2.png" alt="下载页面" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f56b0f30422f3dcfb9e8946ba80997c4"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE2.png" alt="下载页面" class="lightbox-image        " loading="lazy"></a></p>
<p>在解压文件下新建一个文件： <code>config.ini</code>,做好这一步后我们去购买免费的隧道，如下图：</p>
<p><a href="#R-image-eb43fefa02a0c700c0264c5ca0aa7a10" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE3.png" alt="下载页面" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-eb43fefa02a0c700c0264c5ca0aa7a10"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE3.png" alt="下载页面" class="lightbox-image        " loading="lazy"></a></p>
<p>点击网站的文档，然后点击教程/文档里的 <strong>使用本地配置文件config.ini</strong> 文章，</p>
<p><a href="#R-image-3edb62b05248640c2711fb5d35e7a50b" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE6.png" alt="下载页面" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-3edb62b05248640c2711fb5d35e7a50b"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE6.png" alt="下载页面" class="lightbox-image        " loading="lazy"></a></p>
<p>然后复制里面的配置信息：</p>
<p><a href="#R-image-0f163083193545bf48d3c5b36d3c93df" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE7.png" alt="下载页面" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-0f163083193545bf48d3c5b36d3c93df"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE7.png" alt="下载页面" class="lightbox-image        " loading="lazy"></a></p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-config.ini" data-lang="config.ini"><span style="display:flex;"><span><span style="color:#75715e">#将本文件放置于natapp同级目录 程序将读取 [default] 段</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#在命令行参数模式如 natapp -authtoken=xxx 等相同参数将会覆盖掉此配置</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#命令行参数 -config= 可以指定任意config.ini文件</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">[default]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">authtoken</span><span style="color:#f92672">=</span>                      <span style="color:#e6db74">#对应一条隧道的authtoken</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clienttoken</span><span style="color:#f92672">=</span>                    <span style="color:#e6db74">#对应客户端的clienttoken,将会忽略authtoken,若无请留空,</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">log</span><span style="color:#f92672">=</span><span style="color:#e6db74">none                        #log 日志文件,可指定本地文件, none=不做记录,stdout=直接屏幕输出 ,默认为none</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">loglevel</span><span style="color:#f92672">=</span><span style="color:#e6db74">ERROR                  #日志等级 DEBUG, INFO, WARNING, ERROR 默认为 DEBUG</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">http_proxy</span><span style="color:#f92672">=</span>                     <span style="color:#e6db74">#代理设置 如 http://10.123.10.10:3128 非代理上网用户请务必留空</span></span></span></code></pre></div><p>在字段<code>authtoken</code>后面值在我的隧道配置里可以找到，如下：</p>
<p><a href="#R-image-4da62617d7795aff58be840cb0f28451" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE4.png" alt="下载页面" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4da62617d7795aff58be840cb0f28451"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE4.png" alt="下载页面" class="lightbox-image        " loading="lazy"></a></p>
<p>复制下图<code>authtoken</code>的值填到config.ini文件里</p>
<p><a href="#R-image-69e3ec14d48875901a7b47ada25421cb" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE5.png" alt="下载页面" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-69e3ec14d48875901a7b47ada25421cb"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE5.png" alt="下载页面" class="lightbox-image        " loading="lazy"></a></p>
<p>我这边演示的效果如下：</p>
<p><a href="#R-image-5612c8a2b78c545bdb83405de13a6a96" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE8.png" alt="下载页面" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5612c8a2b78c545bdb83405de13a6a96"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE8.png" alt="下载页面" class="lightbox-image        " loading="lazy"></a>
<a href="#R-image-b31d4d374949d4b40746569fe6fec446" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE9.png" alt="下载页面" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-b31d4d374949d4b40746569fe6fec446"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE9.png" alt="下载页面" class="lightbox-image        " loading="lazy"></a></p>
<p>完成上面的操作后，我们运行NATAPP程序，结果如下：</p>
<p><a href="#R-image-9101e28c13d0031831886597af3684e2" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE10.png" alt="下载页面" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-9101e28c13d0031831886597af3684e2"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE10.png" alt="下载页面" class="lightbox-image        " loading="lazy"></a></p>
<p>你会得到一个随机的网址，这个网址指向你的本地端口，当你有网站挂载到本地端口时，你就可以通过网址访问到你的本地端口网址，内网外网都可以，但是这个网址每一次运行都会不一样，这点需要注意，然后就是端口的设置，看下图：</p>
<p><a href="#R-image-967c2d259fdec545332846acb5fe6161" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE5.png" alt="下载页面" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-967c2d259fdec545332846acb5fe6161"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE5.png" alt="下载页面" class="lightbox-image        " loading="lazy"></a></p>
<p>我这里写的的端口是1313，如果你网站运行后不在1313，例如你运行网站后，本地的网站启动端口是8080.那你就把这个地方的1313改为8080就可以了。</p>
<p>下面我们举个例子看看，假设我现在我需要外网的网友访问我挂在在自己电脑本地的网站，那们在做好上面的操作后我先去启动自己的网站，这里使用hugo的网站模版，用code程序打开网站模版，然后调出终端，在终端输入命令 <code>hugo server</code> ,表示启动网站，如下图：</p>
<p><a href="#R-image-957b231f2d74b28ef4ac9ca6da1e4f52" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE11.png" alt="下载页面" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-957b231f2d74b28ef4ac9ca6da1e4f52"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE11.png" alt="下载页面" class="lightbox-image        " loading="lazy"></a></p>
<p>然后去复制刚才运行NATAPP程序后的网站，在浏览器中打开，我们先试一下局域网能不能访问，结果如下：</p>
<p><a href="#R-image-ccc5a7db27ab3859d5d4d1275558c6c2" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE12.png" alt="下载页面" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-ccc5a7db27ab3859d5d4d1275558c6c2"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE12.png" alt="下载页面" class="lightbox-image        " loading="lazy"></a></p>
<p>将网站发给自己的朋友，测试外网是否可以访问，</p>
<p><a href="#R-image-4e124ee0034ff31b61b32f67caae5c76" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE13.png" alt="下载页面" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4e124ee0034ff31b61b32f67caae5c76"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE13.png" alt="下载页面" class="lightbox-image        " loading="lazy"></a></p>
<p>结果是外网可以正常可以访问。</p>
<p><a href="#R-image-99a2206debe9a88a4ea479348c254ca1" class="lightbox-link"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE14.png" alt="下载页面" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-99a2206debe9a88a4ea479348c254ca1"><img src="../../branch-bundle-1/1.%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9B%BE14.png" alt="下载页面" class="lightbox-image        " loading="lazy"></a></p>
<p>那么到这里你的电脑其实就充当了一台服务器，将网站放到了你电脑上，只要你的电脑保持开机状态那么别人就可以一直访问你的网站，或许NATAPP网站还有别的有趣功能，所以你不妨去摸索摸索，所不定可以找到多次启动NATAPP指向你本地的网址不变，你也就不用每次启动后都要发新的网址给对方了。</p>
<p>那么其实到这里就差不多了，但是我们还需要用一台电脑控制另一台电脑，简而言之就是电脑的远程登录，其实电脑远程登录有许多的方法，这里我需要借助一个来实现内网穿透，其实上面的旧电脑变服务器也是使用了内网穿透，

<div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
  <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
  <ul class="box-content attachments-files">
  </ul>
</div></p>

            <footer class="footline">
<div class=" taxonomy-categories term-list cstyle  " title="Categories" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../../categories/w1-%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0/">W1-博客文章</a></li>
  </ul>
</div>
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="Tags" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../../tags/%E5%89%8D%E7%AB%AF/">前端</a></li>
    <li><a class="term-link" href="../../tags/%E7%BD%91%E7%AB%99/">网站</a></li>
  </ul>
</div>
            </header>
<h1 id="创建hugo静态网站的经历">创建hugo静态网站的经历</h1>


<div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
  <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
  <ul class="box-content attachments-files">
  </ul>
</div>
<h2 id="一为什么要创建属于自己博客网站">一、为什么要创建属于自己博客网站</h2>
<p>自从进入大三的学习，自己接触了许多开发板、以及七七八八的软件，个人记忆力又不咋地，平时很容易把重要或者重复的知识忘记，所以我希望做一个网站记录自己所学的知识，方便查找，但我没学<strong>JS</strong>，深入学又耗费时间，如果你也有我的一些情况，想自己创建一个网站“玩玩”，那么请看下去，希望自己的一些分享能对想短期内创建静态网站、且没学过网站设计的朋友有所帮助。</p>
<h2 id="二选择静态网站布局工具以及远程仓库">二、选择静态网站布局工具以及远程仓库</h2>
<h3 id="1工具的选择">1、工具的选择</h3>
<p>在这里我就只推荐<strong>hugo</strong>，因为本人用的就是hugo，其他的并不是很了解（如果你有更好的方法还请通过留言告诉我，谢谢！），首先确定自己要装在哪个系统上，比如装在Windows、Linux或者Mac（苹果系统），确定好这个后你就去网上搜安装方法即可，一定要搜和自己电脑系统有关的安装方法，不然安装会走很多坑的。
<strong>Windows</strong>系统。我建议使用choco工具在终端上安装，如果电脑没安装choco工具，还请自行安装。
<strong>Linux</strong>系统。首先确定自己的Linux的发行版本，举个例子，像<strong>红帽公司</strong>的和ContentOS的，这两个发行版本使用的工具可能就不一样，像ContentOS使用的是工具Yum工具安装的，还请你在网上自行搜索。
<strong>Mac</strong>系统。使用<strong>brew</strong>工具进行安装，不知道怎么用brew还请网上搜一下。
下载好后使用如下命令检查是否安装成功。</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>    <span style="color:#a6e22e">hugo</span> <span style="color:#a6e22e">verser</span></span></span></code></pre></div><h3 id="2远程仓库的选择">2、远程仓库的选择</h3>
<p>因为要把网站的相关信息放到网上，一遍搜索查找，我们需要一个远程的仓库来装这些数据，无疑github是比较好的选择，当然Gitee、gitLab这些应该也可以（本人没有过）。至于为什么选github我想你只要稍微了解一点IT这行的，多少都知道其原因，不知道也没关系，只要能存放我们的网站数据就行。
首先你需要去注册一个github账号，并掌握在线创建、删除、导入和下载仓库，以及文件的上传、删除修改等操作，这些其实并不是很难，刚开始需要你换一点时间，详细请上网搜索。</p>
<p>当我们hugo下载好和仓库创建等操作都学会后我们就可以开始操作了。</p>
<h2 id="三仓库创建与静态网站布局">三、仓库创建与静态网站布局</h2>
<p>仓库创建最好是和自己github的账户名字一样，且都是小写，然后后面跟着
<strong>.github.io</strong>,例如：</p>
<hr>
<pre><code>wang32.github.io
</code></pre>
<p>这是比较稳妥的做法，如果你不想这么做还请自己花时间去琢磨别的方法。接着我么创建一个空项目，什么都不需要哦!</p>
<p>下一步是静态网站的部署，首先你需要下载一个hugo的主题，也就是用别人的网页主题作为自己网站的基础，这样呢我们及时没学过JS也可以部署自己的网站。
创建一个目录，比如<strong>myblog</strong>，接着用code打开这个目录，在code编译器中打开终端窗口监视器，在里面输入命令</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>   <span style="color:#a6e22e">hugo</span> <span style="color:#a6e22e">new</span> <span style="color:#a6e22e">site</span></span></span></code></pre></div><p>这个时候myblog目录下会生成一个<strong>theme</strong>的目录，用来放主题，把下载好的hugo主题放在该目录下，在使用如下命令：</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>    <span style="color:#a6e22e">hugo</span> <span style="color:#f92672">--</span><span style="color:#a6e22e">theme</span>=&lt;<span style="color:#a6e22e">主题名字</span>&gt;  <span style="color:#f92672">--</span><span style="color:#a6e22e">baseURL</span>=<span style="color:#e6db74">&#34;&lt;你github仓库的路径&gt;&#34;</span> <span style="color:#f92672">--</span><span style="color:#a6e22e">buildDrafts</span></span></span></code></pre></div><p>举个例子：</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>   <span style="color:#a6e22e">hugo</span> <span style="color:#f92672">--</span><span style="color:#a6e22e">theme</span>=<span style="color:#a6e22e">m10c</span>  <span style="color:#f92672">--</span><span style="color:#a6e22e">baseURL</span>=<span style="color:#e6db74">&#34;https://wung32.github.io/&#34;</span> <span style="color:#f92672">--</span><span style="color:#a6e22e">buildDrafts</span></span></span></code></pre></div><p>上面m10c是主题的名字，也就是你下载的hugo主题名字，而https://wung32.github.io/仓库路径。</p>
<p>在这你需要注意：如果不是Windows系统这的<strong>baseURL</strong>可能写为<strong>baseUrl</strong>,要确定这件事就去看<strong>hugo.tolm</strong>文件，有的主题写为<strong>config.tolm</strong>,里面的第一二行就会提到baseURL，注意这里的要去主题目录里找。而不是在你创建的目录myblog下找。
运行上面的代码没问题就会在你创建的myblog目录下产生一个<strong>public</strong>的目录，里面装的就是你的网页信息。</p>
<p>接着使用git命令把这个文件推送到远程的仓库，一般的步骤如下：</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-git" data-lang="git">    git init #初始化：本地建库（即文件夹）
    git add  #添加到仓库：代码文件放入本地库，
    git commit -m “注释内容” #提交时要给注释
    git remote add origin https://github.com/xu-xiaoya/Elegent.git #远程仓库关联

    git push (-u) origin master #本地仓库的代码推送到远程仓库Github上</code></pre></div><p>如果报错：</p>
<hr>
<pre><code>error: RPC failed; HTTP 504 curl 18 HTTP/2 stream 7 was reset
send-pack: unexpected disconnect while reading sideband packet
fatal: the remote end hung up unexpectedly
Everything up-to-date
</code></pre>
<p>那么加一句：</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-git" data-lang="git">    git config --global http.postBuffer 524288000</code></pre></div><p>接着继续推送就是了。</p>
<p>然后去自己的仓库，点击设置，找到Page选项，有个<strong>Custom domain</strong>，在那里写上你的网站名称。</p>
<h2 id="四买一个域名">四、买一个域名</h2>
<p>我在没买之前网页一直加载不出来，自己也不知道为什么（如果你知道不用买域名也可以实现网站部署还请告诉我，谢谢啦！）。所以我自己是买了一个六块钱的域名的，试用期一年；当你买一个域名后要记得去解析域名，然后把解析的域名写到上面说的<strong>Custom domain</strong>那个地方，比如你解析得到的域名是：myblog.wang32.com,那么你就写这个上去。</p>
<p>如果不知道怎么买。怎么解析，那么——是的，一样上网查一下。</p>
<h2 id="五网站的优化">五、网站的优化</h2>
<p>这个我不建议你一个人慢慢磨，慢慢的去网上找方法，其实制作主题的作者已经把怎么基于他的主题做出自己的网站的方法了，所以你老老实实的跟着作者的文档走就是了，实在有些地方不懂的在查一查看。</p>
<h2 id="补充">补充</h2>
<h4 id="1为什么我插入的图片无法显示">1、为什么我插入的图片无法显示？</h4>
<p>图片的显示：首先要看你的主题是基于什么语言写的，比如我的是markdown,对于这个语言只需要使用：</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-hugo" data-lang="hugo">    ![nihao](../../../public/webfonts/fa-brands-400.svg)</code></pre></div><p>上面的这个方法就可以让图片显示，但实际上不一定能可以，因为hugo有个目录创建规则——<strong>Page Bundles</strong>(连接：https://www.rectcircle.cn/series/hugo/content-management/page-bundles/)，如果不按照这个规则创建，那么你使用别人的主题，插入图片时可能无法显示。</p>
<p>光是上面这点我就搞了一个星期，所以还是希望你好好看一下Page Bundles文档。</p>
<p>今天先到这了……
2023年12月11日</p>
<hr>

            <footer class="footline">
<div class=" taxonomy-categories term-list cstyle  " title="Categories" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../../categories/w1-%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0/">W1-博客文章</a></li>
  </ul>
</div>
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="Tags" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../../tags/%E5%89%8D%E7%AB%AF/">前端</a></li>
    <li><a class="term-link" href="../../tags/%E7%BD%91%E7%AB%99/">网站</a></li>
    <li><a class="term-link" href="../../tags/%E7%BD%91%E7%AB%99%E4%BC%98%E5%8C%96/">网站优化</a></li>
  </ul>
</div>
            </header>
<h1 id="网站内常用到的模版">网站内常用到的模版</h1>

<h2 id="代码分制表">代码分制表</h2>
<p>以<code>&lt; tabs title=&quot;file name&quot; &gt;，&lt; /tabs &gt;</code>结尾；
然后里面写以<code>% tab title=&quot;code name&quot; style=&quot;info&quot; color=&quot;blue &quot;  %，% /tab %</code>结尾
他们都需要用<code>{{}}</code>括起来

<div class="tab-panel" data-tab-group="shortcode-parameter">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="代码"
      class="tab-nav-button tab-panel-style cstyle initial active" tabindex="-1"
      onclick="switchTab('shortcode-parameter','代码')"
    >
      <span class="tab-nav-text">代码</span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="代码"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">

<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>{{&lt; <span style="color:#a6e22e">tabs</span> <span style="color:#a6e22e">title</span>=<span style="color:#e6db74">&#34;hello.&#34;</span> &gt;}}
</span></span><span style="display:flex;"><span><span style="color:#75715e">//代码块一
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>{{<span style="color:#f92672">%</span> <span style="color:#a6e22e">tab</span> <span style="color:#a6e22e">title</span>=<span style="color:#e6db74">&#34;py&#34;</span> <span style="color:#f92672">%</span>}}
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">```markdown
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    **这里写代码**
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ```</span>
</span></span><span style="display:flex;"><span>{{<span style="color:#f92672">%</span> <span style="color:#f92672">/</span><span style="color:#a6e22e">tab</span> <span style="color:#f92672">%</span>}}
</span></span><span style="display:flex;"><span><span style="color:#75715e">//代码块二
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>{{<span style="color:#f92672">%</span> <span style="color:#a6e22e">tab</span> <span style="color:#a6e22e">title</span>=<span style="color:#e6db74">&#34;sh&#34;</span> <span style="color:#f92672">%</span>}}
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">```markdown
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    **这里写代码**
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ```</span>
</span></span><span style="display:flex;"><span>{{<span style="color:#f92672">%</span> <span style="color:#f92672">/</span><span style="color:#a6e22e">tab</span> <span style="color:#f92672">%</span>}}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{{&lt; <span style="color:#f92672">/</span><span style="color:#a6e22e">tabs</span> &gt;}}</span></span></code></pre></div></div>
    </div>
  </div>
</div></p>
<h2 id="附件">附件</h2>
<p>在双花括号里写：<code>attachments color=&quot;fuchsia&quot; icon=&quot;fab fa-hackerrank&quot;</code>，即可，</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>    {{<span style="color:#f92672">%</span> <span style="color:#a6e22e">attachments</span> <span style="color:#a6e22e">color</span>=<span style="color:#e6db74">&#34;fuchsia&#34;</span> <span style="color:#a6e22e">icon</span>=<span style="color:#e6db74">&#34;fab fa-hackerrank&#34;</span> <span style="color:#f92672">%</span>}}</span></span></code></pre></div><p>效果如下：

 <div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
   <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
   <ul class="box-content attachments-files">
   </ul>
 </div></p>

            <footer class="footline">
<div class=" taxonomy-categories term-list cstyle  " title="Categories" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../../categories/w1-%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0/">W1-博客文章</a></li>
  </ul>
</div>
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="Tags" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../../tags/%E5%89%8D%E7%AB%AF/">前端</a></li>
    <li><a class="term-link" href="../../tags/%E7%BD%91%E7%AB%99/">网站</a></li>
    <li><a class="term-link" href="../../tags/%E7%BD%91%E7%AB%99%E4%BC%98%E5%8C%96/">网站优化</a></li>
  </ul>
</div>
            </header>
<h1 id="网站的目录与子目录创建">网站的目录与子目录创建</h1>

<p>不论是创建首页页面，还是左边框的选项，归根结底它们都是“目录”，从根上说，你需要创建一个目录然后在目录里面创建一个.md文件来装这个目录或说显示这个目录的内容。</p>
<h2 id="首页的创建">首页的创建</h2>
<p>创建首页使用了命令</p>
<hr>
<blockquote>
<p>hugo new &ndash;kind home _index.md</p>
</blockquote>
<hr>
<p>而后产生的页面，它自动生成头文件</p>
<hr>
<pre><code>+++
archetype = &quot;home&quot;
title = &quot;&quot;
+++
</code></pre>
<hr>
<p>值得注意的是，如果你用命令</p>
<hr>
<blockquote>
<p>hugo new site myblog</p>
</blockquote>
<hr>
<p>创建了一个myblog的目录，那么你在里面操作
<a href="%22#ff4589%22">hugo new &ndash;kind home _index.md</a>
的时候,用于显示首页的文件<a href="%22#ff4589%22">_index.md</a>会自动产生在content文件里。</p>
<h2 id="创建章节的方法">创建章节的方法</h2>
<p>使用命令：</p>
<hr>
<pre><code>hugo new &lt;chapter&gt;/&lt;name&gt;/_index.md
</code></pre>
<hr>
<p>或者：</p>
<hr>
<pre><code>hugo new &lt;chapter&gt;/&lt;name&gt;.md
</code></pre>
<hr>
<p>在创建章节的时候需要加上<code>alwaysopen = false</code>,如下面的例子：</p>
<hr>
<pre><code>+++
alwaysopen = false
archetype = &quot;chapter&quot;
title = &quot;2.AndroidStudio&quot;
weight = 20
+++
</code></pre>
<hr>

<div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
  <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
  <ul class="box-content attachments-files">
  </ul>
</div>

            <footer class="footline">
<div class=" taxonomy-categories term-list cstyle  " title="Categories" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../../categories/w1-%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0/">W1-博客文章</a></li>
  </ul>
</div>
            </footer>
          </article>

          </section>
        </div>
      </main>
    </div>
    <script src="../../js/clipboard.min.js?1743696568" defer></script>
    <script src="../../js/perfect-scrollbar.min.js?1743696568" defer></script>
    <script src="../../js/theme.js?1743696568" defer></script>
  </body>
</html>
