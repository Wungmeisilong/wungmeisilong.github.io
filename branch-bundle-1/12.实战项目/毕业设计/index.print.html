<!DOCTYPE html>
<html lang="zh" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.120.4">
    <meta name="generator" content="Relearn 5.23.2+tip">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="毕业设计 :: Maloudown">
    <meta name="twitter:description" content="目录 运行环境 【ESP32学习】联网模块 ESP8266-01S上传数据到OneNet 收藏的一些资料 最终的操作结果 ESP32&amp;&amp;">
    <meta property="og:title" content="毕业设计 :: Maloudown">
    <meta property="og:description" content="目录 运行环境 【ESP32学习】联网模块 ESP8266-01S上传数据到OneNet 收藏的一些资料 最终的操作结果 ESP32&amp;&amp;">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://wungmeisilong.github.io/branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/">
    <meta property="article:section" content="12.实战项目 :: Maloudown">
    <meta property="article:published_time" content="2024-07-07T18:10:42+08:00">
    <meta property="article:modified_time" content="2024-07-07T18:10:42+08:00">
    <meta property="og:site_name" content="Maloudown">
    <title>毕业设计 :: Maloudown</title>
    <link href="https://wungmeisilong.github.io/branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/" rel="canonical" type="text/html" title="毕业设计 :: Maloudown">
    <link href="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/index.xml" rel="alternate" type="application/rss+xml" title="毕业设计 :: Maloudown">
    <link href="../../../images/favicon.png?1743696567" rel="icon" type="image/png">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="../../../css/fontawesome-all.min.css?1743696568" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fontawesome-all.min.css?1743696568" rel="stylesheet"></noscript>
    <link href="../../../css/nucleus.css?1743696568" rel="stylesheet">
    <link href="../../../css/auto-complete.css?1743696568" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/auto-complete.css?1743696568" rel="stylesheet"></noscript>
    <link href="../../../css/perfect-scrollbar.min.css?1743696568" rel="stylesheet">
    <link href="../../../css/fonts.css?1743696568" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fonts.css?1743696568" rel="stylesheet"></noscript>
    <link href="../../../css/theme.css?1743696568" rel="stylesheet">
    <link href="../../../css/theme-auto.css?1743696568" rel="stylesheet" id="R-variant-style">
    <link href="../../../css/variant.css?1743696568" rel="stylesheet">
    <link href="../../../css/print.css?1743696568" rel="stylesheet" media="print">
    <link href="../../../css/format-print.css?1743696568" rel="stylesheet">
    <link href="../../../css/ie.css?1743696568" rel="stylesheet">
    <script src="../../../js/url.js?1743696568"></script>
    <script src="../../../js/variant.js?1743696568"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="../../../index.search.js";
      var root_url="../../../";
      var baseUri=root_url.replace(/\/$/, '');
      window.relearn = window.relearn || {};
      window.relearn.baseUriFull='https:\/\/wungmeisilong.github.io/';
      // variant stuff
      window.variants && variants.init( [ 'auto', 'zen-light', 'zen-dark', 'neon', 'zen-light' ] );
      // translations
      window.T_Copy_to_clipboard = `复制到剪贴板`;
      window.T_Copied_to_clipboard = `复制到剪贴板！`;
      window.T_Copy_link_to_clipboard = `将链接复制到剪贴板`;
      window.T_Link_copied_to_clipboard = `链接复制到剪贴板！`;
      window.T_Reset_view = `重置视图`;
      window.T_View_reset = `查看重置！`;
      window.T_No_results_found = `找不到"{0}"的结果`;
      window.T_N_results_found = `为"{0}"找到 {1} 个结果`;
    </script>
  </head>
  <body class="mobile-support print" data-url="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide">
              <button class="topbar-control" onclick="toggleNav()" type="button" title="导航 (CTRL&#43;ALT&#43;n)">
                <i class="fa-fw fas fa-bars"></i>
              </button>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../"><span itemprop="name">Maloudown</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../branch-bundle-1/"><span itemprop="name">一、博客文章</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/"><span itemprop="name">12.实战项目</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">毕业设计</span><meta itemprop="position" content="4"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="Tags" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../../../tags/onenet/">OneNet</a></li>
  </ul>
</div>
            </header>
<h1 id="毕业设计">毕业设计</h1>

<p><a href="#%E8%81%94%E7%BD%91%E6%A8%A1%E5%9D%97">目录</a></p>
<ul>
<li><a href="#%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83">运行环境</a></li>
<li><a href="#esp32%E5%AD%A6%E4%B9%A0%E8%81%94%E7%BD%91%E6%A8%A1%E5%9D%97">【ESP32学习】联网模块</a>
<ul>
<li><a href="#esp8266-01s%E4%B8%8A%E4%BC%A0%E6%95%B0%E6%8D%AE%E5%88%B0onenet">ESP8266-01S上传数据到OneNet</a>
<ul>
<li><a href="#%E6%94%B6%E8%97%8F%E7%9A%84%E4%B8%80%E4%BA%9B%E8%B5%84%E6%96%99">收藏的一些资料</a></li>
<li><a href="#%E6%9C%80%E7%BB%88%E7%9A%84%E6%93%8D%E4%BD%9C%E7%BB%93%E6%9E%9C">最终的操作结果</a></li>
</ul>
</li>
<li><a href="#esp32esp8266-12e%E8%BF%9E%E6%8E%A5onenet%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">ESP32&amp;&amp;ESP8266-12E连接ONeNet参考资料</a>
<ul>
<li><a href="#onenet%E4%BA%91%E5%B9%B3%E5%8F%B0%E6%8A%A5%E9%94%99-protocolmqttoffline_time2024-07-15-160149977offline_reasoncloseduetoprotoerror%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3">ONeNet云平台报错： {&ldquo;protocol&rdquo;:&ldquo;MQTT&rdquo;,&ldquo;offline_time&rdquo;:&ldquo;2024-07-15 16:01:49.977&rdquo;,&ldquo;offline_reason&rdquo;:&ldquo;CloseDueToProtoError&rdquo;}怎么解决？</a></li>
</ul>
</li>
<li><a href="#app%E8%BF%9E%E6%8E%A5onenet">APP连接ONeNet</a>
<ul>
<li><a href="#json%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90%E6%AD%A5%E9%AA%A4">json数据解析步骤</a></li>
</ul>
</li>
<li><a href="#stm32%E7%94%B5%E8%84%91%E6%A8%A1%E6%8B%9Fesp32esp8266%E9%80%9A%E4%BF%A1">STM32+电脑(模拟ESP32)+ESP8266通信</a></li>
<li><a href="#%E8%AE%BE%E5%A4%87%E7%83%AD%E7%82%B9%E9%85%8D%E7%BD%91%E6%8A%80%E6%9C%AFwifimanager">设备热点配网技术——WIFIManager</a>
<ul>
<li><a href="#%E6%8A%A5%E9%94%99error-wifi_country_t-does-not-name-a-type-const-wifi_country_t-wm_country_usus111wifi_country_policy_auto">报错：error: &lsquo;wifi_country_t&rsquo; does not name a type const wifi_country_t WM_COUNTRY_US{&ldquo;US&rdquo;,1,11,WIFI_COUNTRY_POLICY_AUTO};</a></li>
</ul>
</li>
<li><a href="#%E9%80%9A%E4%BF%A1%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98">通信过程中遇到的问题</a></li>
<li><a href="#%E8%BF%99%E4%B8%80%E9%83%A8%E5%88%86%E6%89%80%E7%94%A8%E5%88%B0%E7%9A%84%E8%B5%84%E6%96%99%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80">这一部分所用到的资料下载地址</a></li>
<li><a href="#%E5%AE%9E%E9%AA%8Cspiffs%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%BD%BF%E7%94%A8">【实验】SPIFFS文件系统的使用</a></li>
<li><a href="#%E5%AE%9E%E9%AA%8Ctcpudp%E9%80%9A%E4%BF%A1%E5%AE%9E%E9%AA%8C">【实验】TCP/UDP通信实验</a></li>
</ul>
</li>
<li><a href="#stm32f4%E5%AD%A6%E4%B9%A0%E6%91%84%E5%83%8F%E5%A4%B4">【STM32F4学习】摄像头</a>
<ul>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">参考资料</a></li>
</ul>
</li>
<li><a href="#stm32f4%E5%B7%A5%E7%A8%8B%E4%BB%A3%E7%A0%81">STM32F4工程代码</a></li>
<li><a href="#%E6%9C%8D%E5%8A%A1%E5%99%A8nginx">【服务器】NGINX</a>
<ul>
<li><a href="#%E5%9C%A8linux%E4%B8%AD%E6%90%AD%E5%BB%BAnginx%E6%9C%8D%E5%8A%A1%E5%99%A8">在Linux中搭建NGINX服务器</a></li>
<li><a href="#tcpip%E5%8D%8F%E8%AE%AE">TCP/IP协议</a></li>
<li><a href="#%E7%9F%A5%E8%AF%86%E5%82%A8%E5%A4%87">[知识储备]</a></li>
<li><a href="#nginx%E6%9E%B6%E6%9E%84">NGINX架构</a>
<ul>
<li><a href="#nginx%E4%B8%ADmaster%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">NGINX中master的工作原理</a></li>
</ul>
</li>
<li><a href="#nginx%E5%A4%84%E7%90%86http%E8%AF%B7%E6%B1%82%E7%9A%84%E8%BF%87%E7%A8%8B">nginx处理HTTP请求的过程</a></li>
<li><a href="#%E5%AE%89%E8%A3%85nginx">安装NGINX</a></li>
</ul>
</li>
<li><a href="#%E6%9C%8D%E5%8A%A1%E5%99%A8tomcat">【服务器】Tomcat</a></li>
<li><a href="#%E6%9C%8D%E5%8A%A1%E5%99%A8zlmedaikit%E6%B5%81%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1%E5%99%A8">【服务器】ZLMedaikit流媒体服务器</a></li>
<li><a href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93ffmpeg%E5%AA%92%E4%BD%93%E6%B5%81%E8%BD%AC%E7%A0%81%E5%B7%A5%E5%85%B7">【第三方库】FFmpeg媒体流转码工具</a></li>
<li><a href="#%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E9%A3%9E%E6%A1%A8paddlepaddle%E5%AE%9E%E6%88%98">【深度学习】飞桨paddlepaddle实战</a>
<ul>
<li><a href="#x-cudeai%E5%9C%A8%E7%BA%BF%E8%AF%BE%E7%A8%8B">X-CUDE—AI在线课程</a></li>
<li><a href="#%E7%9B%B8%E5%85%B3%E8%AE%BA%E6%96%87%E5%8F%82%E8%80%83">相关论文参考</a></li>
</ul>
</li>
<li><a href="#%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0hmm%E6%A8%A1%E5%9E%8B%E9%9A%90%E9%A9%AC%E5%B0%94%E7%A7%91%E5%A4%AB%E5%88%97">【机器学习】HMM模型（隐马尔科夫列）</a>
<ul>
<li><a href="#%E7%9B%B8%E5%85%B3%E8%AE%BA%E6%96%87%E5%8F%82%E8%80%83-1">相关论文参考</a></li>
<li><a href="#%E5%AF%BC%E5%85%A5%E5%BA%93">导入库</a></li>
</ul>
</li>
<li><a href="#%E9%9F%B3%E8%A7%86%E9%A2%91%E5%AD%A6%E4%B9%A0">【音视频学习】</a>
<ul>
<li><a href="#h264%E7%BC%96%E7%A0%81">H.264编码</a></li>
<li><a href="#%E5%AE%89%E5%8D%93%E9%9F%B3%E8%A7%86%E9%A2%91%E5%AE%9E%E6%88%98%E7%BC%96%E7%A8%8B">安卓音视频实战编程</a></li>
<li><a href="#yuv">YUV</a></li>
<li><a href="#rtmp%E5%8D%8F%E8%AE%AE%E6%89%80%E5%9C%A8%E6%89%80%E5%9C%A8%E7%9A%84%E7%BD%91%E7%BB%9C%E5%B1%82%E7%BB%93%E6%9E%84">RTMP协议所在所在的网络层结构</a></li>
<li><a href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93librtmp">【第三方库】LIBRTMP</a></li>
<li><a href="#%E5%B7%A5%E5%85%B7%E7%B1%BB%E4%BC%BC%E5%AE%89%E5%8D%93%E8%99%9A%E6%8B%9F%E6%9C%BAtotal-control">【工具】类似安卓虚拟机：Total Control</a></li>
<li><a href="#%E9%87%87%E9%9B%86%E9%9F%B3%E9%A2%91%E6%95%B0%E6%8D%AE%E5%B7%A5%E5%85%B7">采集音频数据工具</a></li>
<li><a href="#%E8%A7%86%E9%A2%91%E9%87%87%E9%9B%86%E5%B7%A5%E5%85%B7---mediaprojection">视频采集工具&mdash;MediaProjection</a></li>
</ul>
</li>
<li><a href="#%E5%AE%89%E5%8D%93app%E5%88%B6%E4%BD%9C">【安卓APP制作】</a>
<ul>
<li><a href="#%E5%AE%89%E5%8D%93%E7%9A%84%E4%B8%A4%E7%A7%8D%E7%99%BB%E5%BD%95%E6%96%B9%E5%BC%8F">安卓的两种登录方式</a></li>
<li><a href="#%E5%AE%89%E5%8D%93%E4%B8%AD%E9%9B%86%E6%88%90%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E8%BF%9B%E8%A1%8C%E7%99%BB%E5%BD%95">安卓中集成第三方库进行登录</a></li>
<li><a href="#%E5%AE%89%E5%8D%93%E6%98%BE%E7%A4%BAonenet%E6%8F%90%E4%BE%9B%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96%E9%93%BE%E6%8E%A5">安卓显示ONENet提供的可视化链接</a></li>
</ul>
</li>
<li><a href="#%E7%A1%AC%E4%BB%B6%E7%B3%BB%E7%BB%9F">硬件系统</a></li>
</ul>
<h2 id="运行环境">运行环境</h2>
<h2 id="esp32学习联网模块">【ESP32学习】联网模块</h2>
<h3 id="esp8266-01s上传数据到onenet">ESP8266-01S上传数据到OneNet</h3>
<p><a href="https://www.bilibili.com/video/BV1jS421A7Bk/?spm_id_from=333.337.search-card.all.click&amp;vd_source=8b3841f9fc62479f11b65d83945326a7" target="_blank">参考视频</a></p>
<p>1.进入OneNet创建产品和设备（具体步骤待补充）</p>
<p>2.复制产品和设备的详细信息（备份）</p>
<p>目的是为了方便使用AT指令以及代码编写。</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">设备名称</span>(clientlD) <span style="color:#f92672">:</span> test
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">产品</span>ID (username) <span style="color:#f92672">:</span> F1AVyfXw7l
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>password: version<span style="color:#f92672">=</span><span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">31</span><span style="color:#f92672">&amp;</span>res<span style="color:#f92672">=</span>products<span style="color:#f92672">%</span><span style="color:#ae81ff">2FF</span><span style="color:#ae81ff">1</span>AVyfXw71<span style="color:#f92672">%</span><span style="color:#ae81ff">2F</span>devices<span style="color:#f92672">%</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2F</span>test<span style="color:#f92672">&amp;</span>et<span style="color:#f92672">=</span><span style="color:#ae81ff">2810313321</span><span style="color:#f92672">&amp;</span>method<span style="color:#f92672">=</span>md5<span style="color:#f92672">&amp;</span>sign<span style="color:#f92672">=</span>EfJtPPxHwMX6iWWf3YksbA<span style="color:#f92672">%</span><span style="color:#ae81ff">3</span>D<span style="color:#f92672">%</span><span style="color:#ae81ff">3</span>D.urI:mqtts.heclouds.com
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">端口号</span><span style="color:#f92672">:</span><span style="color:#ae81ff">1883</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">订阅</span><span style="color:#f92672">:</span> <span style="color:#960050;background-color:#1e0010">$</span>sys<span style="color:#f92672">/</span>F1AVyfXw7I<span style="color:#f92672">/</span>test<span style="color:#f92672">/</span>thing<span style="color:#f92672">/</span>property<span style="color:#f92672">/</span>post<span style="color:#f92672">/</span>reply发布: <span style="color:#960050;background-color:#1e0010">$</span>sys<span style="color:#f92672">/</span>F1AVyfXw7l<span style="color:#f92672">/</span>test<span style="color:#f92672">/</span>thing<span style="color:#f92672">/</span>property<span style="color:#f92672">/</span>post
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">设备密钥</span><span style="color:#f92672">:</span> cjFZSWRwUGNrazdRR2d6eTJ4Tm9YNXN5bTNuMGpMTIE<span style="color:#f92672">=</span>access key: vclTl19loOn7mcfdtT39l1eRfVffM6FfH8U<span style="color:#f92672">/</span>U3HhUQc<span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>res:products<span style="color:#f92672">/</span>F1AVyfXw7l<span style="color:#f92672">/</span>devices<span style="color:#f92672">/</span>test
</span></span><span style="display:flex;"><span>et:<span style="color:#960050;background-color:#1e0010">时间戳</span></span></span></code></pre></div><h4 id="收藏的一些资料">收藏的一些资料</h4>
<p><a href="https://open.iot.10086.cn/console/product/own" target="_blank">OneNet云平台</a>
<a href="#R-image-5dc0be0c4229b319682ca4d45d5c6483" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-2.png" alt="OneNet云平台" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5dc0be0c4229b319682ca4d45d5c6483"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-2.png" alt="OneNet云平台" class="lightbox-image        " loading="lazy"></a></p>
<p><a href="https://www.beijing-time.org/shijianchuo/" target="_blank">2.时间戳</a>
<a href="#R-image-db98524e3d4855a9c24fe310224e362a" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image.png" alt="时间戳" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-db98524e3d4855a9c24fe310224e362a"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image.png" alt="时间戳" class="lightbox-image        " loading="lazy"></a></p>
<p><a href="https://open.iot.10086.cn/doc/v5/develop/detail/639" target="_blank">OneNet文档中心</a>
<a href="#R-image-e5a0e30a768c818a2b7fc387995183e7" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-1.png" alt="OneNet文档中心" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e5a0e30a768c818a2b7fc387995183e7"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-1.png" alt="OneNet文档中心" class="lightbox-image        " loading="lazy"></a></p>
<h4 id="最终的操作结果">最终的操作结果</h4>
<p><a href="#R-image-e6310de2e8f9cad0ef66e3f16e4f66ca" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-3.png" alt="结果" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e6310de2e8f9cad0ef66e3f16e4f66ca"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-3.png" alt="结果" class="lightbox-image        " loading="lazy"></a></p>
<h3 id="esp32esp8266-12e连接onenet参考资料">ESP32&amp;&amp;ESP8266-12E连接ONeNet参考资料</h3>
<ul>
<li><a href="https://open.iot.10086.cn/doc/v5/fuse/detail/1007" target="_blank">云平台调试错误码</a></li>
<li><a href="https://open.iot.10086.cn/doc/v5/fuse/detail/922" target="_blank">设备之间数据交换实战项目</a></li>
<li><a href="https://github.com/arduino-libraries/WiFi" target="_blank">wifi.h库</a></li>
<li><a href="https://blog.csdn.net/qq_40700822/article/details/116640694" target="_blank">SCND文章</a></li>
</ul>
<p>代码部分唯一不同的是引用的库函数不同，</p>
<p>ESP8266使用的是</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;ESP8266WiFi.h&gt;</span></span></span></code></pre></div><p>ESP32使用的是</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;WiFi.h&gt;</span></span></span></code></pre></div><p>在使用时需要注意引用的库函数，如果库函数不匹配，可能会导致编译失败，这部分的代码以放在附件中。</p>
<ul>
<li><strong>ESP-12EConnectONenet</strong>是ESP8266-12E连接ONeNet的代码；</li>
<li><strong>ESP32ConnectONenet</strong> 是ESP8266-12E连接ONeNet的代码。</li>
</ul>
<p>**注意：**我提供的代码是以onejson格式上传的，而不是数据流的格式。在云平台创建产品时需要注意这点，当然代码里博主写的就是以数据流格式上传，如果你用原来博主写的，那么创建产品时就选数据流。</p>
<hr>
<p>上面的代码只能实现数据上传，并不能实现命令控制，下面就介绍如何实现命令控制。
主要修改的地方是callback函数，当拿到topic的时候要解析拿到一段ID，具体可以看<a href="https://open.iot.10086.cn/doc/v5/fuse/detail/922" target="_blank">官方的资料</a>,里面有提到命令下发的操作。
<a href="#R-image-9cc4910986d19ca1aab205dd866f486d" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-4.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-9cc4910986d19ca1aab205dd866f486d"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-4.png" alt="alt text" class="lightbox-image        " loading="lazy"></a></p>
<h4 id="onenet云平台报错-protocolmqttoffline_time2024-07-15-160149977offline_reasoncloseduetoprotoerror怎么解决">ONeNet云平台报错： {&ldquo;protocol&rdquo;:&ldquo;MQTT&rdquo;,&ldquo;offline_time&rdquo;:&ldquo;2024-07-15 16:01:49.977&rdquo;,&ldquo;offline_reason&rdquo;:&ldquo;CloseDueToProtoError&rdquo;}怎么解决？</h4>
<p>这个错误是协议格式不对，也就是用的topic不正确，通过下面的案例对这个作说明。</p>
<p>当我们在云平台下发命令的时候，在<code>callback</code>函数里使用<code>Serial.println(topic);</code>会打印订阅的topic，格式为:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span>sys<span style="color:#f92672">/</span><span style="color:#ae81ff">584938</span><span style="color:#f92672">/</span>onenet_mqtt_dev1<span style="color:#f92672">/</span>cmd<span style="color:#f92672">/</span>request<span style="color:#f92672">/</span>c5a7e27e<span style="color:#f92672">-</span><span style="color:#ae81ff">05</span>bb<span style="color:#f92672">-</span><span style="color:#ae81ff">41</span>eb<span style="color:#f92672">-</span><span style="color:#ae81ff">972</span>b<span style="color:#f92672">-</span>abce424ade8e</span></span></code></pre></div><p>callback函数如下：</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">/********************************************************************************
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">函数：callback
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">功能：接收ONeNet传回的信息
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">返回值：无
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">参数：
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    topic是消息的主题，
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    payload是消息的有效载荷（数据部分），
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    length是payload的长度
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*********************************************************************************/</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">callback</span>(<span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>topic, byte <span style="color:#f92672">*</span>payload, <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">int</span> length)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;message rev:&#34;</span>);
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">println</span>(topic);                    <span style="color:#75715e">// 打印订阅的topic
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> lastSlash <span style="color:#f92672">=</span> <span style="color:#a6e22e">strrchr</span>(topic, <span style="color:#e6db74">&#39;/&#39;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (lastSlash <span style="color:#f92672">!=</span> NULL) {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> cmdId <span style="color:#f92672">=</span> lastSlash <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>;      <span style="color:#75715e">// 命令ID位于最后一个&#39;/&#39;之后
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    msgid <span style="color:#f92672">=</span> <span style="color:#a6e22e">String</span>(cmdId);                  <span style="color:#75715e">//将命令ID复制给msgid，msgid定义为全局变量
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  }
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">println</span>(msgid);                    <span style="color:#75715e">// 打印拿到的ID
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">strstr</span>(topic, ONENET_GET_CAM_REQUEST)) <span style="color:#75715e">//ONENET_GET_CAM_REQUEST=&#34;$sys/{产品ID}/{设备名}/cmd/request/&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  {
</span></span><span style="display:flex;"><span>    DynamicJsonDocument <span style="color:#a6e22e">doc</span>(<span style="color:#ae81ff">100</span>);
</span></span><span style="display:flex;"><span>    DeserializationError error <span style="color:#f92672">=</span> <span style="color:#a6e22e">deserializeJson</span>(doc, payload);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (error)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      Serial.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;parse json failed&#34;</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    JsonObject setAlinkMsgObj <span style="color:#f92672">=</span> doc.as<span style="color:#f92672">&lt;</span>JsonObject<span style="color:#f92672">&gt;</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">serializeJsonPretty</span>(setAlinkMsgObj, Serial);
</span></span><span style="display:flex;"><span>    String cam <span style="color:#f92672">=</span> setAlinkMsgObj[<span style="color:#e6db74">&#34;cam&#34;</span>].as<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span>();
</span></span><span style="display:flex;"><span>    Serial.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;@&#34;</span><span style="color:#f92672">+</span>cam);                <span style="color:#75715e">//取出下发的命令并在前面加@
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">char</span> RESPONSE_TOPIC[<span style="color:#ae81ff">100</span>];
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">sprintf</span>(RESPONSE_TOPIC, <span style="color:#e6db74">&#34;$sys/{产品ID}/{设备名}/cmd/response/%s&#34;</span>,msgid.<span style="color:#a6e22e">c_str</span>());
</span></span><span style="display:flex;"><span>    client.<span style="color:#a6e22e">publish</span>(RESPONSE_TOPIC, <span style="color:#e6db74">&#34;OK&#34;</span>);   <span style="color:#75715e">// 向平台响应OK
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  }<span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>    Serial.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;GET_CAM faile!&#34;</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>这份代码是根据一位博主的代码改的（<a href="https://blog.csdn.net/qq_40700822/article/details/116640694" target="_blank">博主文章链接</a>），取出后面的ID用如下代码即可</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> lastSlash <span style="color:#f92672">=</span> <span style="color:#a6e22e">strrchr</span>(topic, <span style="color:#e6db74">&#39;/&#39;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (lastSlash <span style="color:#f92672">!=</span> NULL) {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> cmdId <span style="color:#f92672">=</span> lastSlash <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>;      <span style="color:#75715e">// 命令ID位于最后一个&#39;/&#39;之后
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    msgid <span style="color:#f92672">=</span> <span style="color:#a6e22e">String</span>(cmdId);                  <span style="color:#75715e">//将命令ID复制给msgid，msgid定义为全局变量
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  }
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">println</span>(msgid);                    <span style="color:#75715e">// 打印拿到的ID
</span></span></span></code></pre></div><p>而这个时候我们需要响应这个命令用的是</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span>sys<span style="color:#f92672">/</span><span style="color:#ae81ff">584938</span><span style="color:#f92672">/</span>onenet_mqtt_dev1<span style="color:#f92672">/</span>cmd<span style="color:#f92672">/</span>response<span style="color:#f92672">/</span>c5a7e27e<span style="color:#f92672">-</span><span style="color:#ae81ff">05</span>bb<span style="color:#f92672">-</span><span style="color:#ae81ff">41</span>eb<span style="color:#f92672">-</span><span style="color:#ae81ff">972</span>b<span style="color:#f92672">-</span>abce424ade8e</span></span></code></pre></div><p>一个是request，一个是response，所以在拿到下发命令的topic后要取出后面跟着的ID，然后再重新拼接在<code>$sys/584938/onenet_mqtt_dev1/cmd/response/</code>后面，然后用这个拼接的topic发送响应数据给云平台。</p>
<p>这个时候就能在云平台那看到类似如下信息：</p>
<p><a href="#R-image-9fc2ebd70f8791e3927b250c55e46cc2" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-5.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-9fc2ebd70f8791e3927b250c55e46cc2"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-5.png" alt="alt text" class="lightbox-image        " loading="lazy"></a></p>
<p>一般格式错误返回的错误码是15，原因就是格式有问题。使用如下的格式上传响应都可能有问题：</p>
<p>1.$sys/584938/onenet_mqtt_dev1/cmd/response/</p>
<p>2.$sys/584938/onenet_mqtt_dev1/cmd/response/+</p>
<p>3.$sys/584938/onenet_mqtt_dev1/cmd/response/+/+</p>
<p>以上内容仅供参考，如果你有更好的方法，请在评论区告诉我。</p>
<h3 id="app连接onenet">APP连接ONeNet</h3>
<ul>
<li><a href="https://blog.csdn.net/m0_57523637/article/details/134110774" target="_blank">1.内含demo</a></li>
<li><a href="https://www.bilibili.com/video/BV1Sx42127ni/?spm_id_from=333.337.search-card.all.click&amp;vd_source=5e8e4e9e284af3291f1a3addff3fc2c3" target="_blank">2.新版视频地址</a></li>
<li><a href="https://www.json.cn/json2java/" target="_blank">3.json格式化网站</a></li>
<li><a href="https://blog.csdn.net/NakajimaFN/article/details/109074166" target="_blank">4.Android Okhttp3的使用（很全面，包含Post提交字符串、键值对、表单、上传文件、无参请求和Get有参无参请求，还有自动添加token）</a></li>
<li><a href="https://blog.csdn.net/weixin_46323814/article/details/124662664" target="_blank">从json中取出数据,结合第一点看</a></li>
<li><a href="https://open.iot.10086.cn/doc/v5/fuse/detail/1007" target="_blank">5.云平台调试错误码</a></li>
</ul>
<p>在B站上学习OKHTTP3，我把主要的核心代码放在附件里，分别是get和post的同步和异步请求，返回的结果和视频地址2里讲的一样。</p>
<ul>
<li><a href="https://www.bilibili.com/video/BV1Kr4y1b7Kw?p=2&amp;vd_source=5e8e4e9e284af3291f1a3addff3fc2c3" target="_blank">视频地址1</a>,</li>
<li><a href="https://www.bilibili.com/video/BV1Z8411i7Yo/?p=70&amp;spm_id_from=333.880.my_history.page.click&amp;vd_source=5e8e4e9e284af3291f1a3addff3fc2c3" target="_blank">视频地址2</a></li>
</ul>
<p>在编写HTTPS网络请求（post）时需要上传一些数据，这些数据有一定的上传格式，下面的网址汇总了上传格式content参数</p>
<ul>
<li><a href="https://www.runoob.com/http/http-content-type.html" target="_blank">HTTP的content格式汇总网址</a></li>
</ul>
<hr>
<p>2024.8.19</p>
<h4 id="json数据解析步骤">json数据解析步骤</h4>
<p>方法一：</p>
<p><a href="#R-image-6ac1f97819f45d34f9e2b57b7b99f17f" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-26.png" alt="1" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-6ac1f97819f45d34f9e2b57b7b99f17f"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-26.png" alt="1" class="lightbox-image        " loading="lazy"></a>
<a href="#R-image-b2dfbf6a72a843aad5abf8a8d9ba1942" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-27.png" alt="2" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-b2dfbf6a72a843aad5abf8a8d9ba1942"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-27.png" alt="2" class="lightbox-image        " loading="lazy"></a></p>
<p>方法二：</p>
<p>使用第三方库Gson,在使用前需要创建一个Jsonbear，就是接收Jsons数据的格式。</p>
<p>总结：</p>
<p>在Android Studio中，如果你想要生成代码，例如getter和setter方法，可以使用快捷键Alt + Insert（Windows/Linux系统）或Command + N（Mac系统） 。这个快捷操作会引导你通过一个菜单来选择想要生成的代码类型，比如构造函数、toString方法、以及各种重写方法等。</p>
<p>此外，如果你需要查看某个方法的参数信息，可以使用快捷键Ctrl + P（Windows/Linux系统）或Command + P（Mac系统），这将展示出当前方法的参数列表及其类型。</p>
<h3 id="stm32电脑模拟esp32esp8266通信">STM32+电脑(模拟ESP32)+ESP8266通信</h3>
<p>STM32————电脑：串口1（PA 9  PA10）,手机连接指定热点，连接成功后等待一段时间把摄像头的网址发给单片机，单片机通过串口2发给ESP8266.ESP8266再传到OneNet上。</p>
<p><strong>注意</strong>：在用ESP8266最小系统通信的时，需要给板子单独供电，否则通信可能失败，原因我想可能是因为电压不够。</p>
<h3 id="设备热点配网技术wifimanager">设备热点配网技术——WIFIManager</h3>
<p>这个配网技术是让开发板设置热点，然后让手机连接，连接好后配置要让开发板连接的WIFI和密码，这个技术叫设备热点技术。相比于以往的一键配网技术，我个人觉得这个设备热点配网技术成功率要要一些。</p>
<p>缺点是这个技术不能用AT指令来实现，所以目前AT指令在不配合其他设备的情况下，通常都使用一键配网技术。</p>
<p><strong>ESP32和ESP8266使用设备热点配网技术的区别</strong></p>
<ul>
<li>区别一：使用的WiFi库不同，ESP32使用<code>WiFi.h</code>，而ESP8266使用<code>ESP8266WiFi.h</code></li>
<li>区别二：使用的WiFiManager.h版本不同，ESP32使用<code>2.0.17</code>(目前这个版本是最新的)，而ESP8266使用<code>0.16或0.15</code>
在使用ESP32时，请使用目前最新版的wifimanage库，而使用ESP8266的话请使用0.15或0.16版本的WIFIManager，如果ESP8266使用最新版的可能会报错。报什么错呢？</li>
</ul>
<h4 id="报错error-wifi_country_t-does-not-name-a-type-const-wifi_country_t-wm_country_usus111wifi_country_policy_auto">报错：error: &lsquo;wifi_country_t&rsquo; does not name a type const wifi_country_t WM_COUNTRY_US{&ldquo;US&rdquo;,1,11,WIFI_COUNTRY_POLICY_AUTO};</h4>
<p>完整报错如下：</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>d:<span style="color:#960050;background-color:#1e0010">\</span>Program <span style="color:#a6e22e">Files</span> (x86)<span style="color:#960050;background-color:#1e0010">\</span>arduino<span style="color:#960050;background-color:#1e0010">\</span>libraries<span style="color:#960050;background-color:#1e0010">\</span>WiFiManager<span style="color:#f92672">/</span>wm_consts_en.h:<span style="color:#ae81ff">162</span><span style="color:#f92672">:</span><span style="color:#ae81ff">7</span><span style="color:#f92672">:</span> error: <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#66d9ef">wifi_country_t</span><span style="color:#960050;background-color:#1e0010">&#39;</span> does not name a type
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">wifi_country_t</span> WM_COUNTRY_US{<span style="color:#e6db74">&#34;US&#34;</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">11</span>,WIFI_COUNTRY_POLICY_AUTO};
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">^</span>
</span></span><span style="display:flex;"><span>d:<span style="color:#960050;background-color:#1e0010">\</span>Program <span style="color:#a6e22e">Files</span> (x86)<span style="color:#960050;background-color:#1e0010">\</span>arduino<span style="color:#960050;background-color:#1e0010">\</span>libraries<span style="color:#960050;background-color:#1e0010">\</span>WiFiManager<span style="color:#f92672">/</span>wm_consts_en.h:<span style="color:#ae81ff">163</span><span style="color:#f92672">:</span><span style="color:#ae81ff">7</span><span style="color:#f92672">:</span> error: <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#66d9ef">wifi_country_t</span><span style="color:#960050;background-color:#1e0010">&#39;</span> does not name a type
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">wifi_country_t</span> WM_COUNTRY_CN{<span style="color:#e6db74">&#34;CN&#34;</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">13</span>,WIFI_COUNTRY_POLICY_AUTO};
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">^</span>
</span></span><span style="display:flex;"><span>d:<span style="color:#960050;background-color:#1e0010">\</span>Program <span style="color:#a6e22e">Files</span> (x86)<span style="color:#960050;background-color:#1e0010">\</span>arduino<span style="color:#960050;background-color:#1e0010">\</span>libraries<span style="color:#960050;background-color:#1e0010">\</span>WiFiManager<span style="color:#f92672">/</span>wm_consts_en.h:<span style="color:#ae81ff">164</span><span style="color:#f92672">:</span><span style="color:#ae81ff">7</span><span style="color:#f92672">:</span> error: <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#66d9ef">wifi_country_t</span><span style="color:#960050;background-color:#1e0010">&#39;</span> does not name a type
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">wifi_country_t</span> WM_COUNTRY_JP{<span style="color:#e6db74">&#34;JP&#34;</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">14</span>,WIFI_COUNTRY_POLICY_AUTO};
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">^</span></span></span></code></pre></div><p>这个错误我目前没有解决，如果你解决了还请评论区或邮件（3256149770@qq.con）告诉我。</p>
<h3 id="通信过程中遇到的问题">通信过程中遇到的问题</h3>
<ul>
<li>
<p>keil5中一点击下载就闪退或点击debug中的setting就闪退。<a href="https://blog.csdn.net/wcanon/article/details/129645304" target="_blank">参照文章</a></p>
</li>
<li>
<p>Keil5编程之warning: #223-D: function “xxx“ declared implicitly.<a href="https://blog.csdn.net/weixin_45714385/article/details/114965914" target="_blank">参考链接</a></p>
</li>
</ul>
<h3 id="这一部分所用到的资料下载地址">这一部分所用到的资料下载地址</h3>
<ul>
<li><a href="http://www.openedv.com/docs/modules/iot/atk-esp.html" target="_blank">正点原子AKT-ESP-Fwifi模块</a></li>
</ul>
<hr>
<p><strong>2024.8.12(更新).</strong></p>
<h3 id="实验spiffs文件系统的使用">【实验】SPIFFS文件系统的使用</h3>
<p><a href="https://blog.csdn.net/Naisu_kun/article/details/90442925" target="_blank">参考地址</a></p>
<h3 id="实验tcpudp通信实验">【实验】TCP/UDP通信实验</h3>
<p><a href="https://blog.csdn.net/sinat_25923849/article/details/123682679" target="_blank">参考地址</a></p>
<h2 id="stm32f4学习摄像头">【STM32F4学习】摄像头</h2>
<h3 id="参考资料">参考资料</h3>
<ul>
<li><a href="https://blog.csdn.net/LiangWF22/article/details/113618532" target="_blank">基于STM32F407的摄像头（不带FIFO的OV7670）图像采集及LCD显示实验-笔记整理</a></li>
<li><a href="https://openatomworkshop.csdn.net/664701d5b12a9d168eb6e4d6.html?dp_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MTY4MDg5NSwiZXhwIjoxNzIyMTgwMzc2LCJpYXQiOjE3MjE1NzU1NzYsInVzZXJuYW1lIjoicXFfNjU3OTU3ODUifQ.xZCSUMCprrwP5K6jTYw716zgdx461uUG6SQOkClUhhw" target="_blank">STM32F4驱动OV7670总结</a></li>
<li><a href="https://github.com/weizhangCJLU/stm32f407vgt6-ov7670-tft" target="_blank">基于stm32f407vgt6驱动ov7670的TFT实时视频显示</a></li>
</ul>
<h2 id="stm32f4工程代码">STM32F4工程代码</h2>
<p><strong>使用三个ADC通道要注意按顺序去初始化，否则可能会出现问题，运营我还不知道.</strong></p>
<h2 id="服务器nginx">【服务器】NGINX</h2>
<h3 id="在linux中搭建nginx服务器">在Linux中搭建NGINX服务器</h3>
<h3 id="tcpip协议">TCP/IP协议</h3>
<p><a href="#R-image-fae65d3cd9ce81f666e7a688947e5a0f" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-6.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-fae65d3cd9ce81f666e7a688947e5a0f"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-6.png" alt="alt text" class="lightbox-image        " loading="lazy"></a>
<a href="#R-image-580de8ad14a999fb0ab647a9a41f457e" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-7.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-580de8ad14a999fb0ab647a9a41f457e"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-7.png" alt="alt text" class="lightbox-image        " loading="lazy"></a>
<a href="#R-image-f65197d14f444b2909855a9f931cb013" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-8.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f65197d14f444b2909855a9f931cb013"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-8.png" alt="alt text" class="lightbox-image        " loading="lazy"></a>
<a href="#R-image-371fe2c3a32f703f32574cf4ccc56c61" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-9.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-371fe2c3a32f703f32574cf4ccc56c61"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-9.png" alt="alt text" class="lightbox-image        " loading="lazy"></a>
<a href="#R-image-4f0528bf8f8a419aa7ec0737560ac398" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-10.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4f0528bf8f8a419aa7ec0737560ac398"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-10.png" alt="alt text" class="lightbox-image        " loading="lazy"></a>
<a href="#R-image-d81cddba28a69f33c51c5c326cf5beda" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-11.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d81cddba28a69f33c51c5c326cf5beda"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-11.png" alt="alt text" class="lightbox-image        " loading="lazy"></a></p>
<hr>
<h3 id="知识储备">[知识储备]</h3>
<p><a href="https://www.digitalocean.com/community/tools/nginx?global.app.lang=zhCN" target="_blank">在线自动生成nginx配置文件的网站</a></p>
<ul>
<li>可以自由选择所需的应用，生成nginx配置作为参考。</li>
<li>根据你的业务需求，自动生成复杂的nginx配置文件，提供你作为参考，非常好用</li>
</ul>
<h3 id="nginx架构">NGINX架构</h3>
<h4 id="nginx中master的工作原理">NGINX中master的工作原理</h4>
<p><a href="#R-image-325ce31f5ed49615c19cabf58a494e1c" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-12.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-325ce31f5ed49615c19cabf58a494e1c"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-12.png" alt="alt text" class="lightbox-image        " loading="lazy"></a></p>
<h3 id="nginx处理http请求的过程">nginx处理HTTP请求的过程</h3>
<p><a href="#R-image-f106fe88312c1124b6ace8fa5b91f8e7" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-13.png" alt="过程" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f106fe88312c1124b6ace8fa5b91f8e7"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-13.png" alt="过程" class="lightbox-image        " loading="lazy"></a></p>
<h3 id="安装nginx">安装NGINX</h3>
<p><a href="#R-image-a9a852ff1cc70038217a06ca0e812dbe" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-15.png" alt="任务" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a9a852ff1cc70038217a06ca0e812dbe"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-15.png" alt="任务" class="lightbox-image        " loading="lazy"></a></p>
<p>安装路径：https://blog.csdn.net/u011715638/article/details/138670319</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>server {
</span></span><span style="display:flex;"><span>    listen <span style="color:#ae81ff">80</span>;
</span></span><span style="display:flex;"><span>    listen [<span style="color:#f92672">::</span>]<span style="color:#f92672">:</span><span style="color:#ae81ff">80</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    server_name example.com www.example.com;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    root <span style="color:#f92672">/</span>var<span style="color:#f92672">/</span>www<span style="color:#f92672">/</span>html;
</span></span><span style="display:flex;"><span>    index index.html index.htm;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    location <span style="color:#f92672">/</span> {
</span></span><span style="display:flex;"><span>        try_files <span style="color:#960050;background-color:#1e0010">$</span>uri <span style="color:#960050;background-color:#1e0010">$</span>uri<span style="color:#f92672">/</span> <span style="color:#f92672">=</span><span style="color:#ae81ff">404</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>上面是配置文件的内容，下面说明一下配置时的一些注意事项：</p>
<ul>
<li>把配置文件的<code>example.com www.example.com</code>换成172.0.0.1，这样方便在本地测试；</li>
<li>在Ubuntu中可以下载ifconfig来查看Ubuntu的IP地址（ip addr也可以）</li>
<li>每次修改配置文件记<code>sudo systemctl reload nginx</code></li>
</ul>
<h2 id="服务器tomcat">【服务器】Tomcat</h2>
<p>1.安装Tomcat要使用哪个版本的java？</p>
<p>使用jdk8或更高版本，详细参考<a href="https://tomcat.apache.org/tomcat-9.0-doc/setup.html" target="_blank">官方文档</a></p>
<p>2.如何在Ubuntu安装Tomcat？</p>
<ul>
<li>安装jdk8或更高版本</li>
<li>安装</li>
</ul>
<h2 id="服务器zlmedaikit流媒体服务器">【服务器】ZLMedaikit流媒体服务器</h2>
<p>需要掌握的知识点：
<a href="#R-image-c4ad465afa45c320da38540a8ddb6e5b" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-29.png" alt="知识点" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c4ad465afa45c320da38540a8ddb6e5b"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-29.png" alt="知识点" class="lightbox-image        " loading="lazy"></a></p>
<h2 id="第三方库ffmpeg媒体流转码工具">【第三方库】FFmpeg媒体流转码工具</h2>
<ul>
<li><a href="https://cn.linux-console.net/?p=16693" target="_blank">Ubuntu上安装ffmpeg的方法</a></li>
<li><a href="https://git.ffmpeg.org/ffmpeg.git" target="_blank">下载ffmpeg源代码地址</a></li>
</ul>
<h2 id="深度学习飞桨paddlepaddle实战">【深度学习】飞桨paddlepaddle实战</h2>
<hr>
<p>2024.8.18</p>
<p><strong>1.从入门到实际运用，请参考B站up主视频：</strong><a href="https://www.bilibili.com/video/BV1AM4y187yR/?spm_id_from=333.999.0.0" target="_blank">点击链接</a></p>
<p><strong>2.学完上面的视频后学习paddlepaddle的语音识别课程：</strong></p>
<p><strong>3.接着参考STM32cudeXM.AI的相关知识，把模型转换成onnx格式然后在但【单片机上运行：</strong></p>
<p><strong>3.1先用一个项目练练手：</strong><code>https://shequ.stmicroelectronics.cn/thread-632736-1-1.html</code></p>
<ul>
<li><a href="https://stm32ai.st.com/zh/stm32-cube-ai/" target="_blank">官网</a></li>
<li><a href="https://www.st.com/resource/zh/user_manual/dm00570145-getting-started-with-x-cube-ai-expansion-package-for-artificial-intelligence-ai-stmicroelectronics.pdf" target="_blank">入门手册文档</a></li>
<li><a href="https://shequ.stmicroelectronics.cn/forum.php?mod=forumdisplay&amp;fid=1327&amp;filter=dateline&amp;orderby=dateline" target="_blank">官网视频</a></li>
<li><a href="https://www.bilibili.com/video/BV1ns4y1D7ea/?p=16" target="_blank">B站视频</a></li>
</ul>
<p>意外收获，这是一个学习论坛：<code>https://www.waveshare.net/study/portal.php?mod=list&amp;catid=38</code></p>
<hr>
<p>2024.8.25</p>
<p>参考文献：</p>
<ul>
<li>禹鑫鹏,贺庆,王世昕,.基于STM32CubeMX AI和NanoEdge AI的眼动信号分类效果对比研究【J】.传感器世界,2024,(04):6-10.</li>
</ul>
<hr>
<p>2024.8.26</p>
<h3 id="x-cudeai在线课程">X-CUDE—AI在线课程</h3>
<p><a href="https://www.st.com.cn/content/st_com/zh/support/learning/stm32-education/stm32-moocs/Introduction_to_STM32CubeAI_MOOC.html" target="_blank">参考地址</a></p>
<p>当模型验证结束后，需要修改以下内容：
<a href="#R-image-589b8160ecd8519c8a238b76674e0a9c" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-28.png" alt="修改文件" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-589b8160ecd8519c8a238b76674e0a9c"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-28.png" alt="修改文件" class="lightbox-image        " loading="lazy"></a></p>
<h3 id="相关论文参考">相关论文参考</h3>
<ul>
<li><a href="https://github.com/ldknight/Babysound-Sort-tensorflow/blob/main/README.md" target="_blank">【github项目网址】婴儿哭声分类识别</a></li>
</ul>
<h2 id="机器学习hmm模型隐马尔科夫列">【机器学习】HMM模型（隐马尔科夫列）</h2>
<p>隐马尔科夫列模型定义：
<a href="#R-image-f36061eb77af641dd4b75d84ca6c4076" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-25.png" alt="定义" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f36061eb77af641dd4b75d84ca6c4076"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-25.png" alt="定义" class="lightbox-image        " loading="lazy"></a></p>
<h3 id="相关论文参考-1">相关论文参考</h3>
<p>-<a href="https://sprateam-ustc.github.io/Publications/shuxianwang-2022-ncmmsc.pdf" target="_blank">【1.基于声学的婴儿哭声识别细分市场模型】(Baby Cry Recognition Based on Acoustic)</a>
-<a href="https://asmp-eurasipjournals.springeropen.com/articles/10.1186/s13636-018-0124-x" target="_blank">【2.使用隐马尔可夫模型自动分割婴儿哭闹信号】(Automatic segmentation of infant cry signals using hidden Markov models)</a></p>
<h3 id="导入库">导入库</h3>
<h2 id="音视频学习">【音视频学习】</h2>
<h3 id="h264编码">H.264编码</h3>
<p>所谓视频编码就是指通过特定的压缩技术，将某个视频格式文件转换成另一种视频格式文件的方式。</p>
<p>视频流传输中最重要的编解码标准有国际电联(TU-T，国际电信联盟)的H.261、H.263、H.264等，运动静止图像专家组（由ISO国际标准化组织与IEC国际电子委员会于1988年联合成立)的MPEG系列标准MPEG1、MPEG2、MPEG4 AVC等。</p>
<p>其中ITU-TH.264/MPEG-4 AVC是ITU-T与ISO/IEC连手合作制订的新标准。ITU-T方面称之为H.264。但ISOIEC的则将这个新标准归纳于MPEG系列,称为MPEG-4 AVC。</p>
<p>而H.265则被视为是ITU-TH.264/MPEG-4AVC标准的继任者，又称为高效率视频编码(High Efficiency VideoCoding，简称HEVC)</p>
<p><a href="#R-image-3c38b092529723b0e27ddac66591e84c" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-17.png" alt="h264" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-3c38b092529723b0e27ddac66591e84c"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-17.png" alt="h264" class="lightbox-image        " loading="lazy"></a></p>
<p>格式：
<a href="#R-image-2f77e99e4a16132bbe196e4d63ab75f4" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-16.png" alt="h264" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-2f77e99e4a16132bbe196e4d63ab75f4"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-16.png" alt="h264" class="lightbox-image        " loading="lazy"></a></p>
<h3 id="安卓音视频实战编程">安卓音视频实战编程</h3>
<p>构建预览布局-使用SurfaceView或者TextureView</p>
<p>打开相机- Camera.open</p>
<p>设置参数- Camera.Parameters</p>
<p>设置预览数据回调- PreviewCallback</p>
<p>设置预览画布并启动- setPreviewTexture/startPreview</p>
<p>释放相机- stopPreview/release</p>
<h3 id="yuv">YUV</h3>
<p>YUV主要应用于优化彩色视频信号的传输，与RGB相比，YUV只需要占用极少的频宽(RGB需要三个独立的视频信号同时传输)。YUV中Y代表明亮度，也称灰阶值;U与V表示的则是色度（色调和饱和度)也可以记作:YCbCr。如果只有Y数据,那么表示的图像就是黑白的。</p>
<p>使用YUV的原因：</p>
<p>使用YUV格式才能极大地去除冗余信息，人眼对亮点信息更敏感，对色度敏感度不高。也就是说,可以压缩UV数据,而人眼难以发现。所以压缩算法的第一步，往往先把RGB数据转换成YUV数据。对Y少压缩一点，对UV多压缩一点，以平衡图像效果和压缩率。这也是为什么编码选择使用YUV而不是RGB。</p>
<p>推算公式：
<a href="#R-image-1bdd0d4b0b5b1e37edac3ad976edbaf1" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-18.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-1bdd0d4b0b5b1e37edac3ad976edbaf1"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-18.png" alt="alt text" class="lightbox-image        " loading="lazy"></a></p>
<p>YUV是一组数据的压缩格式，其下还有因为排列不同而衍生的不同格式名称</p>
<p><a href="#R-image-4bdebd825accbe4c015cb79f07c3a5ed" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-19.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4bdebd825accbe4c015cb79f07c3a5ed"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-19.png" alt="alt text" class="lightbox-image        " loading="lazy"></a></p>
<p>NV21转I420
<a href="#R-image-e17b44f0bb2254189ba682f3c95e8a02" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-20.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e17b44f0bb2254189ba682f3c95e8a02"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-20.png" alt="alt text" class="lightbox-image        " loading="lazy"></a></p>
<p>MediaCode组件：
<a href="#R-image-923e0036b5994df576cc66cc95a76ef7" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-21.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-923e0036b5994df576cc66cc95a76ef7"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-21.png" alt="alt text" class="lightbox-image        " loading="lazy"></a></p>
<h3 id="rtmp协议所在所在的网络层结构">RTMP协议所在所在的网络层结构</h3>
<p><a href="#R-image-a288d879d9336de9afd498b047873417" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-22.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a288d879d9336de9afd498b047873417"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-22.png" alt="alt text" class="lightbox-image        " loading="lazy"></a></p>
<h3 id="第三方库librtmp">【第三方库】LIBRTMP</h3>
<h3 id="工具类似安卓虚拟机total-control">【工具】类似安卓虚拟机：Total Control</h3>
<h3 id="采集音频数据工具">采集音频数据工具</h3>
<p><a href="#R-image-2ae71e4336f08e5184add07f69a5fac2" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-23.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-2ae71e4336f08e5184add07f69a5fac2"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-23.png" alt="alt text" class="lightbox-image        " loading="lazy"></a></p>
<h3 id="视频采集工具---mediaprojection">视频采集工具&mdash;MediaProjection</h3>
<p><a href="#R-image-7168e119c8a76f20c822b123f20f7c6e" class="lightbox-link"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-24.png" alt="alt text" class="figure-image        " style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-7168e119c8a76f20c822b123f20f7c6e"><img src="../../../branch-bundle-1/12.%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/image-24.png" alt="alt text" class="lightbox-image        " loading="lazy"></a></p>
<hr>
<p>安卓P18</p>
<hr>
<p>2024.8.27</p>
<p>方法一：</p>
<p><a href="https://blog.csdn.net/gs12software/article/details/130618598?spm=1001.2101.3001.6650.3&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7Ebaidujs_baidulandingword%7ECtr-3-130618598-blog-114264625.235%5Ev43%5Epc_blog_bottom_relevance_base2&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7Ebaidujs_baidulandingword%7ECtr-3-130618598-blog-114264625.235%5Ev43%5Epc_blog_bottom_relevance_base2&amp;utm_relevant_index=6" target="_blank">安卓使用VLC库实内网播放ESPCam摄像头数据</a></p>
<p>方法二：</p>
<p><a href="https://blog.csdn.net/u011418943/article/details/107561111" target="_blank">Mediacode编解码</a></p>
<h2 id="安卓app制作">【安卓APP制作】</h2>
<p>1.安卓登录开发</p>
<hr>
<p>2024.8.21</p>
<h3 id="安卓的两种登录方式">安卓的两种登录方式</h3>
<p>登录可以进去就强登录，或进去后在某个页面触发登录。</p>
<p>对于第一个只需要在第一个页面做登录处理即可，而第二种需要<code>Hook AMS + APT</code>框架实现，具体看这篇博文：<a href="https://blog.csdn.net/calm1516/article/details/114482477" target="_blank">文章连接</a></p>
<h3 id="安卓中集成第三方库进行登录">安卓中集成第三方库进行登录</h3>
<p>可以使用目前比较流行的第三方库实现：</p>
<p><code>JustAuth开源组件</code>：<strong>JustAuth</strong>是一个整合了国内外数十家知名平台的OAuth登录的开源组件，它提供了丰富的OAuth平台支持，自定义State、自定义OAuth、自定义Http接口和自定义Scope等功能，极大地简化了开发者在第三方登录功能上的工作量。</p>
<hr>
<p>2024.8.23</p>
<p>2.数据显示</p>
<h3 id="安卓显示onenet提供的可视化链接">安卓显示ONENet提供的可视化链接</h3>
<p><a href="https://blog.csdn.net/qq_52608074/article/details/138144200" target="_blank">参考链接</a></p>
<hr>
<p>2024.8.29</p>
<h2 id="硬件系统">硬件系统</h2>
<p>一、设备选型</p>
<p>1.空气质量模块设备选型：</p>
<p><a href="https://blog.csdn.net/qilin001cs/article/details/118771474" target="_blank">（1）MQ135测量空气质量和氨气PPM的计算</a></p>

<div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
  <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
  <ul class="box-content attachments-files">
      <li><a href="../../../branch-bundle-1/12.%e5%ae%9e%e6%88%98%e9%a1%b9%e7%9b%ae/%e6%af%95%e4%b8%9a%e8%ae%be%e8%ae%a1/index.files/ESP-12ConnectOnenet.c">ESP-12ConnectOnenet.c</a> (7 KB)</li>
      <li><a href="../../../branch-bundle-1/12.%e5%ae%9e%e6%88%98%e9%a1%b9%e7%9b%ae/%e6%af%95%e4%b8%9a%e8%ae%be%e8%ae%a1/index.files/ESP32ConnectOnenet%20.c">ESP32ConnectOnenet .c</a> (7 KB)</li>
      <li><a href="../../../branch-bundle-1/12.%e5%ae%9e%e6%88%98%e9%a1%b9%e7%9b%ae/%e6%af%95%e4%b8%9a%e8%ae%be%e8%ae%a1/index.files/https.java">https.java</a> (2 KB)</li>
  </ul>
</div>

            <footer class="footline">
<div class=" taxonomy-categories term-list cstyle  " title="Categories" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../../../categories/b3-%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/">B3-毕业设计</a></li>
  </ul>
</div>
            </footer>
          </article>

        </div>
      </main>
    </div>
    <script src="../../../js/clipboard.min.js?1743696568" defer></script>
    <script src="../../../js/perfect-scrollbar.min.js?1743696568" defer></script>
    <script src="../../../js/theme.js?1743696568" defer></script>
  </body>
</html>
